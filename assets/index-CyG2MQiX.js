(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const p of d)if(p.type==="childList")for(const _ of p.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&u(_)}).observe(document,{childList:!0,subtree:!0});function l(d){const p={};return d.integrity&&(p.integrity=d.integrity),d.referrerPolicy&&(p.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?p.credentials="include":d.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(d){if(d.ep)return;d.ep=!0;const p=l(d);fetch(d.href,p)}})();function od(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wh={exports:{}},cl={};var Yg;function ub(){if(Yg)return cl;Yg=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(u,d,p){var _=null;if(p!==void 0&&(_=""+p),d.key!==void 0&&(_=""+d.key),"key"in d){p={};for(var b in d)b!=="key"&&(p[b]=d[b])}else p=d;return d=p.ref,{$$typeof:a,type:u,key:_,ref:d!==void 0?d:null,props:p}}return cl.Fragment=s,cl.jsx=l,cl.jsxs=l,cl}var Ig;function cb(){return Ig||(Ig=1,wh.exports=ub()),wh.exports}var x=cb(),Sh={exports:{}},Dt={};var Kg;function fb(){if(Kg)return Dt;Kg=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),_=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),N=Symbol.iterator;function j(C){return C===null||typeof C!="object"?null:(C=N&&C[N]||C["@@iterator"],typeof C=="function"?C:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,P={};function Z(C,H,rt){this.props=C,this.context=H,this.refs=P,this.updater=rt||B}Z.prototype.isReactComponent={},Z.prototype.setState=function(C,H){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,H,"setState")},Z.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function et(){}et.prototype=Z.prototype;function at(C,H,rt){this.props=C,this.context=H,this.refs=P,this.updater=rt||B}var ct=at.prototype=new et;ct.constructor=at,z(ct,Z.prototype),ct.isPureReactComponent=!0;var ut=Array.isArray;function ot(){}var F={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function gt(C,H,rt){var lt=rt.ref;return{$$typeof:a,type:C,key:H,ref:lt!==void 0?lt:null,props:rt}}function yt(C,H){return gt(C.type,H,C.props)}function ht(C){return typeof C=="object"&&C!==null&&C.$$typeof===a}function vt(C){var H={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(rt){return H[rt]})}var kt=/\/+/g;function Ct(C,H){return typeof C=="object"&&C!==null&&C.key!=null?vt(""+C.key):H.toString(36)}function st(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ot,ot):(C.status="pending",C.then(function(H){C.status==="pending"&&(C.status="fulfilled",C.value=H)},function(H){C.status==="pending"&&(C.status="rejected",C.reason=H)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function O(C,H,rt,lt,ft){var dt=typeof C;(dt==="undefined"||dt==="boolean")&&(C=null);var Tt=!1;if(C===null)Tt=!0;else switch(dt){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(C.$$typeof){case a:case s:Tt=!0;break;case A:return Tt=C._init,O(Tt(C._payload),H,rt,lt,ft)}}if(Tt)return ft=ft(C),Tt=lt===""?"."+Ct(C,0):lt,ut(ft)?(rt="",Tt!=null&&(rt=Tt.replace(kt,"$&/")+"/"),O(ft,H,rt,"",function(xe){return xe})):ft!=null&&(ht(ft)&&(ft=yt(ft,rt+(ft.key==null||C&&C.key===ft.key?"":(""+ft.key).replace(kt,"$&/")+"/")+Tt)),H.push(ft)),1;Tt=0;var Jt=lt===""?".":lt+":";if(ut(C))for(var Rt=0;Rt<C.length;Rt++)lt=C[Rt],dt=Jt+Ct(lt,Rt),Tt+=O(lt,H,rt,dt,ft);else if(Rt=j(C),typeof Rt=="function")for(C=Rt.call(C),Rt=0;!(lt=C.next()).done;)lt=lt.value,dt=Jt+Ct(lt,Rt++),Tt+=O(lt,H,rt,dt,ft);else if(dt==="object"){if(typeof C.then=="function")return O(st(C),H,rt,lt,ft);throw H=String(C),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function I(C,H,rt){if(C==null)return C;var lt=[],ft=0;return O(C,lt,"","",function(dt){return H.call(rt,dt,ft++)}),lt}function K(C){if(C._status===-1){var H=C._result;H=H(),H.then(function(rt){(C._status===0||C._status===-1)&&(C._status=1,C._result=rt)},function(rt){(C._status===0||C._status===-1)&&(C._status=2,C._result=rt)}),C._status===-1&&(C._status=0,C._result=H)}if(C._status===1)return C._result.default;throw C._result}var mt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},tt={map:I,forEach:function(C,H,rt){I(C,function(){H.apply(this,arguments)},rt)},count:function(C){var H=0;return I(C,function(){H++}),H},toArray:function(C){return I(C,function(H){return H})||[]},only:function(C){if(!ht(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Dt.Activity=T,Dt.Children=tt,Dt.Component=Z,Dt.Fragment=l,Dt.Profiler=d,Dt.PureComponent=at,Dt.StrictMode=u,Dt.Suspense=v,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return F.H.useMemoCache(C)}},Dt.cache=function(C){return function(){return C.apply(null,arguments)}},Dt.cacheSignal=function(){return null},Dt.cloneElement=function(C,H,rt){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var lt=z({},C.props),ft=C.key;if(H!=null)for(dt in H.key!==void 0&&(ft=""+H.key),H)!$.call(H,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&H.ref===void 0||(lt[dt]=H[dt]);var dt=arguments.length-2;if(dt===1)lt.children=rt;else if(1<dt){for(var Tt=Array(dt),Jt=0;Jt<dt;Jt++)Tt[Jt]=arguments[Jt+2];lt.children=Tt}return gt(C.type,ft,lt)},Dt.createContext=function(C){return C={$$typeof:_,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:p,_context:C},C},Dt.createElement=function(C,H,rt){var lt,ft={},dt=null;if(H!=null)for(lt in H.key!==void 0&&(dt=""+H.key),H)$.call(H,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(ft[lt]=H[lt]);var Tt=arguments.length-2;if(Tt===1)ft.children=rt;else if(1<Tt){for(var Jt=Array(Tt),Rt=0;Rt<Tt;Rt++)Jt[Rt]=arguments[Rt+2];ft.children=Jt}if(C&&C.defaultProps)for(lt in Tt=C.defaultProps,Tt)ft[lt]===void 0&&(ft[lt]=Tt[lt]);return gt(C,dt,ft)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(C){return{$$typeof:b,render:C}},Dt.isValidElement=ht,Dt.lazy=function(C){return{$$typeof:A,_payload:{_status:-1,_result:C},_init:K}},Dt.memo=function(C,H){return{$$typeof:w,type:C,compare:H===void 0?null:H}},Dt.startTransition=function(C){var H=F.T,rt={};F.T=rt;try{var lt=C(),ft=F.S;ft!==null&&ft(rt,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(ot,mt)}catch(dt){mt(dt)}finally{H!==null&&rt.types!==null&&(H.types=rt.types),F.T=H}},Dt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Dt.use=function(C){return F.H.use(C)},Dt.useActionState=function(C,H,rt){return F.H.useActionState(C,H,rt)},Dt.useCallback=function(C,H){return F.H.useCallback(C,H)},Dt.useContext=function(C){return F.H.useContext(C)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(C,H){return F.H.useDeferredValue(C,H)},Dt.useEffect=function(C,H){return F.H.useEffect(C,H)},Dt.useEffectEvent=function(C){return F.H.useEffectEvent(C)},Dt.useId=function(){return F.H.useId()},Dt.useImperativeHandle=function(C,H,rt){return F.H.useImperativeHandle(C,H,rt)},Dt.useInsertionEffect=function(C,H){return F.H.useInsertionEffect(C,H)},Dt.useLayoutEffect=function(C,H){return F.H.useLayoutEffect(C,H)},Dt.useMemo=function(C,H){return F.H.useMemo(C,H)},Dt.useOptimistic=function(C,H){return F.H.useOptimistic(C,H)},Dt.useReducer=function(C,H,rt){return F.H.useReducer(C,H,rt)},Dt.useRef=function(C){return F.H.useRef(C)},Dt.useState=function(C){return F.H.useState(C)},Dt.useSyncExternalStore=function(C,H,rt){return F.H.useSyncExternalStore(C,H,rt)},Dt.useTransition=function(){return F.H.useTransition()},Dt.version="19.2.3",Dt}var Qg;function ld(){return Qg||(Qg=1,Sh.exports=fb()),Sh.exports}var X=ld();const Jr=od(X);var Eh={exports:{}},fl={},Th={exports:{}},Ah={};var Xg;function hb(){return Xg||(Xg=1,(function(a){function s(O,I){var K=O.length;O.push(I);t:for(;0<K;){var mt=K-1>>>1,tt=O[mt];if(0<d(tt,I))O[mt]=I,O[K]=tt,K=mt;else break t}}function l(O){return O.length===0?null:O[0]}function u(O){if(O.length===0)return null;var I=O[0],K=O.pop();if(K!==I){O[0]=K;t:for(var mt=0,tt=O.length,C=tt>>>1;mt<C;){var H=2*(mt+1)-1,rt=O[H],lt=H+1,ft=O[lt];if(0>d(rt,K))lt<tt&&0>d(ft,rt)?(O[mt]=ft,O[lt]=K,mt=lt):(O[mt]=rt,O[H]=K,mt=H);else if(lt<tt&&0>d(ft,K))O[mt]=ft,O[lt]=K,mt=lt;else break t}}return I}function d(O,I){var K=O.sortIndex-I.sortIndex;return K!==0?K:O.id-I.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;a.unstable_now=function(){return p.now()}}else{var _=Date,b=_.now();a.unstable_now=function(){return _.now()-b}}var v=[],w=[],A=1,T=null,N=3,j=!1,B=!1,z=!1,P=!1,Z=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function ct(O){for(var I=l(w);I!==null;){if(I.callback===null)u(w);else if(I.startTime<=O)u(w),I.sortIndex=I.expirationTime,s(v,I);else break;I=l(w)}}function ut(O){if(z=!1,ct(O),!B)if(l(v)!==null)B=!0,ot||(ot=!0,vt());else{var I=l(w);I!==null&&st(ut,I.startTime-O)}}var ot=!1,F=-1,$=5,gt=-1;function yt(){return P?!0:!(a.unstable_now()-gt<$)}function ht(){if(P=!1,ot){var O=a.unstable_now();gt=O;var I=!0;try{t:{B=!1,z&&(z=!1,et(F),F=-1),j=!0;var K=N;try{e:{for(ct(O),T=l(v);T!==null&&!(T.expirationTime>O&&yt());){var mt=T.callback;if(typeof mt=="function"){T.callback=null,N=T.priorityLevel;var tt=mt(T.expirationTime<=O);if(O=a.unstable_now(),typeof tt=="function"){T.callback=tt,ct(O),I=!0;break e}T===l(v)&&u(v),ct(O)}else u(v);T=l(v)}if(T!==null)I=!0;else{var C=l(w);C!==null&&st(ut,C.startTime-O),I=!1}}break t}finally{T=null,N=K,j=!1}I=void 0}}finally{I?vt():ot=!1}}}var vt;if(typeof at=="function")vt=function(){at(ht)};else if(typeof MessageChannel<"u"){var kt=new MessageChannel,Ct=kt.port2;kt.port1.onmessage=ht,vt=function(){Ct.postMessage(null)}}else vt=function(){Z(ht,0)};function st(O,I){F=Z(function(){O(a.unstable_now())},I)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(O){O.callback=null},a.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},a.unstable_getCurrentPriorityLevel=function(){return N},a.unstable_next=function(O){switch(N){case 1:case 2:case 3:var I=3;break;default:I=N}var K=N;N=I;try{return O()}finally{N=K}},a.unstable_requestPaint=function(){P=!0},a.unstable_runWithPriority=function(O,I){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=N;N=O;try{return I()}finally{N=K}},a.unstable_scheduleCallback=function(O,I,K){var mt=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?mt+K:mt):K=mt,O){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=K+tt,O={id:A++,callback:I,priorityLevel:O,startTime:K,expirationTime:tt,sortIndex:-1},K>mt?(O.sortIndex=K,s(w,O),l(v)===null&&O===l(w)&&(z?(et(F),F=-1):z=!0,st(ut,K-mt))):(O.sortIndex=tt,s(v,O),B||j||(B=!0,ot||(ot=!0,vt()))),O},a.unstable_shouldYield=yt,a.unstable_wrapCallback=function(O){var I=N;return function(){var K=N;N=I;try{return O.apply(this,arguments)}finally{N=K}}}})(Ah)),Ah}var Fg;function db(){return Fg||(Fg=1,Th.exports=hb()),Th.exports}var zh={exports:{}},ln={};var Jg;function mb(){if(Jg)return ln;Jg=1;var a=ld();function s(v){var w="https://react.dev/errors/"+v;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)w+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+v+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var u={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},d=Symbol.for("react.portal");function p(v,w,A){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:T==null?null:""+T,children:v,containerInfo:w,implementation:A}}var _=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(v,w){if(v==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,ln.createPortal=function(v,w){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(s(299));return p(v,w,null,A)},ln.flushSync=function(v){var w=_.T,A=u.p;try{if(_.T=null,u.p=2,v)return v()}finally{_.T=w,u.p=A,u.d.f()}},ln.preconnect=function(v,w){typeof v=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,u.d.C(v,w))},ln.prefetchDNS=function(v){typeof v=="string"&&u.d.D(v)},ln.preinit=function(v,w){if(typeof v=="string"&&w&&typeof w.as=="string"){var A=w.as,T=b(A,w.crossOrigin),N=typeof w.integrity=="string"?w.integrity:void 0,j=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;A==="style"?u.d.S(v,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:T,integrity:N,fetchPriority:j}):A==="script"&&u.d.X(v,{crossOrigin:T,integrity:N,fetchPriority:j,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},ln.preinitModule=function(v,w){if(typeof v=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var A=b(w.as,w.crossOrigin);u.d.M(v,{crossOrigin:A,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&u.d.M(v)},ln.preload=function(v,w){if(typeof v=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var A=w.as,T=b(A,w.crossOrigin);u.d.L(v,A,{crossOrigin:T,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},ln.preloadModule=function(v,w){if(typeof v=="string")if(w){var A=b(w.as,w.crossOrigin);u.d.m(v,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:A,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else u.d.m(v)},ln.requestFormReset=function(v){u.d.r(v)},ln.unstable_batchedUpdates=function(v,w){return v(w)},ln.useFormState=function(v,w,A){return _.H.useFormState(v,w,A)},ln.useFormStatus=function(){return _.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var Wg;function U0(){if(Wg)return zh.exports;Wg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),zh.exports=mb(),zh.exports}var $g;function pb(){if($g)return fl;$g=1;var a=db(),s=ld(),l=U0();function u(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function p(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function _(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function v(t){if(p(t)!==t)throw Error(u(188))}function w(t){var e=t.alternate;if(!e){if(e=p(t),e===null)throw Error(u(188));return e!==t?null:t}for(var i=t,o=e;;){var f=i.return;if(f===null)break;var h=f.alternate;if(h===null){if(o=f.return,o!==null){i=o;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===i)return v(f),t;if(h===o)return v(f),e;h=h.sibling}throw Error(u(188))}if(i.return!==o.return)i=f,o=h;else{for(var y=!1,E=f.child;E;){if(E===i){y=!0,i=f,o=h;break}if(E===o){y=!0,o=f,i=h;break}E=E.sibling}if(!y){for(E=h.child;E;){if(E===i){y=!0,i=h,o=f;break}if(E===o){y=!0,o=h,i=f;break}E=E.sibling}if(!y)throw Error(u(189))}}if(i.alternate!==o)throw Error(u(190))}if(i.tag!==3)throw Error(u(188));return i.stateNode.current===i?t:e}function A(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=A(t),e!==null)return e;t=t.sibling}return null}var T=Object.assign,N=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),et=Symbol.for("react.consumer"),at=Symbol.for("react.context"),ct=Symbol.for("react.forward_ref"),ut=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),gt=Symbol.for("react.activity"),yt=Symbol.for("react.memo_cache_sentinel"),ht=Symbol.iterator;function vt(t){return t===null||typeof t!="object"?null:(t=ht&&t[ht]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Symbol.for("react.client.reference");function Ct(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===kt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case Z:return"Profiler";case P:return"StrictMode";case ut:return"Suspense";case ot:return"SuspenseList";case gt:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case at:return t.displayName||"Context";case et:return(t._context.displayName||"Context")+".Consumer";case ct:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return e=t.displayName||null,e!==null?e:Ct(t.type)||"Memo";case $:e=t._payload,t=t._init;try{return Ct(t(e))}catch{}}return null}var st=Array.isArray,O=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},mt=[],tt=-1;function C(t){return{current:t}}function H(t){0>tt||(t.current=mt[tt],mt[tt]=null,tt--)}function rt(t,e){tt++,mt[tt]=t.current,t.current=e}var lt=C(null),ft=C(null),dt=C(null),Tt=C(null);function Jt(t,e){switch(rt(dt,e),rt(ft,t),rt(lt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?mg(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=mg(e),t=pg(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(lt),rt(lt,t)}function Rt(){H(lt),H(ft),H(dt)}function xe(t){t.memoizedState!==null&&rt(Tt,t);var e=lt.current,i=pg(e,t.type);e!==i&&(rt(ft,t),rt(lt,i))}function fn(t){ft.current===t&&(H(lt),H(ft)),Tt.current===t&&(H(Tt),rl._currentValue=K)}var fe,Ue;function He(t){if(fe===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);fe=e&&e[1]||"",Ue=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+t+Ue}var hn=!1;function Mn(t,e){if(!t||hn)return"";hn=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(e){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Q){var Y=Q}Reflect.construct(t,[],it)}else{try{it.call()}catch(Q){Y=Q}t.call(it.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(it=t())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),y=h[0],E=h[1];if(y&&E){var k=y.split(`
`),G=E.split(`
`);for(f=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(o===k.length||f===G.length)for(o=k.length-1,f=G.length-1;1<=o&&0<=f&&k[o]!==G[f];)f--;for(;1<=o&&0<=f;o--,f--)if(k[o]!==G[f]){if(o!==1||f!==1)do if(o--,f--,0>f||k[o]!==G[f]){var J=`
`+k[o].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=o&&0<=f);break}}}finally{hn=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?He(i):""}function yi(t,e){switch(t.tag){case 26:case 27:case 5:return He(t.type);case 16:return He("Lazy");case 13:return t.child!==e&&e!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return Mn(t.type,!1);case 11:return Mn(t.type.render,!1);case 1:return Mn(t.type,!0);case 31:return He("Activity");default:return""}}function Xe(t){try{var e="",i=null;do e+=yi(t,i),i=t,t=t.return;while(t);return e}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var bt=Object.prototype.hasOwnProperty,Nt=a.unstable_scheduleCallback,Ht=a.unstable_cancelCallback,qt=a.unstable_shouldYield,_t=a.unstable_requestPaint,Lt=a.unstable_now,At=a.unstable_getCurrentPriorityLevel,Bt=a.unstable_ImmediatePriority,Gt=a.unstable_UserBlockingPriority,Se=a.unstable_NormalPriority,nn=a.unstable_LowPriority,Ge=a.unstable_IdlePriority,an=a.log,qn=a.unstable_setDisableYieldValue,sn=null,me=null;function On(t){if(typeof an=="function"&&qn(t),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(sn,t)}catch{}}var Fe=Math.clz32?Math.clz32:ro,vi=Math.log,or=Math.LN2;function ro(t){return t>>>=0,t===0?32:31-(vi(t)/or|0)|0}var qi=256,Ea=262144,Gi=4194304;function ii(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _i(t,e,i){var o=t.pendingLanes;if(o===0)return 0;var f=0,h=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~h,o!==0?f=ii(o):(y&=E,y!==0?f=ii(y):i||(i=E&~t,i!==0&&(f=ii(i))))):(E=o&~h,E!==0?f=ii(E):y!==0?f=ii(y):i||(i=o&~t,i!==0&&(f=ii(i)))),f===0?0:e!==0&&e!==f&&(e&h)===0&&(h=f&-f,i=e&-e,h>=i||h===32&&(i&4194048)!==0)?e:f}function Vi(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Cc(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function El(){var t=Gi;return Gi<<=1,(Gi&62914560)===0&&(Gi=4194304),t}function oo(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Yi(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Lc(t,e,i,o,f,h){var y=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var E=t.entanglements,k=t.expirationTimes,G=t.hiddenUpdates;for(i=y&~i;0<i;){var J=31-Fe(i),it=1<<J;E[J]=0,k[J]=-1;var Y=G[J];if(Y!==null)for(G[J]=null,J=0;J<Y.length;J++){var Q=Y[J];Q!==null&&(Q.lane&=-536870913)}i&=~it}o!==0&&Tl(t,o,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(y&~e))}function Tl(t,e,i){t.pendingLanes|=e,t.suspendedLanes&=~e;var o=31-Fe(e);t.entangledLanes|=e,t.entanglements[o]=t.entanglements[o]|1073741824|i&261930}function Al(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var o=31-Fe(i),f=1<<o;f&e|t[o]&e&&(t[o]|=e),i&=~f}}function zl(t,e){var i=e&-e;return i=(i&42)!==0?1:yn(i),(i&(t.suspendedLanes|e))!==0?0:i}function yn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function St(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function lo(){var t=I.p;return t!==0?t:(t=window.event,t===void 0?32:Ug(t.type))}function uo(t,e){var i=I.p;try{return I.p=t,e()}finally{I.p=i}}var ai=Math.random().toString(36).slice(2),Me="__reactFiber$"+ai,Ve="__reactProps$"+ai,Ii="__reactContainer$"+ai,bi="__reactEvents$"+ai,Cl="__reactListeners$"+ai,Nc="__reactHandles$"+ai,Ll="__reactResources$"+ai,ys="__reactMarker$"+ai;function co(t){delete t[Me],delete t[Ve],delete t[bi],delete t[Cl],delete t[Nc]}function Ki(t){var e=t[Me];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Ii]||i[Me]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=wg(t);t!==null;){if(i=t[Me])return i;t=wg(t)}return e}t=i,i=t.parentNode}return null}function Ta(t){if(t=t[Me]||t[Ii]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function xi(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(u(33))}function Aa(t){var e=t[Ll];return e||(e=t[Ll]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Oe(t){t[ys]=!0}var Nl=new Set,Ml={};function Qi(t,e){wi(t,e),wi(t+"Capture",e)}function wi(t,e){for(Ml[t]=e,t=0;t<e.length;t++)Nl.add(e[t])}var vs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fo={},ho={};function _s(t){return bt.call(ho,t)?!0:bt.call(fo,t)?!1:vs.test(t)?ho[t]=!0:(fo[t]=!0,!1)}function Vt(t,e,i){if(_s(e))if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var o=e.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+i)}}function oe(t,e,i){if(i===null)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+i)}}function vn(t,e,i,o){if(o===null)t.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(e,i,""+o)}}function Pe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xi(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mo(t,e,i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return f.call(this)},set:function(y){i=""+y,h.call(this,y)}}),Object.defineProperty(t,e,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jt(t){if(!t._valueTracker){var e=Xi(t)?"checked":"value";t._valueTracker=mo(t,e,""+t[e])}}function ve(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),o="";return t&&(o=Xi(t)?t.checked?"true":"false":t.value),t=o,t!==i?(e.setValue(t),!0):!1}function za(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var lr=/[\n"\\]/g;function pe(t){return t.replace(lr,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function po(t,e,i,o,f,h,y,E){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),e!=null?y==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Pe(e)):t.value!==""+Pe(e)&&(t.value=""+Pe(e)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),e!=null?si(t,y,Pe(e)):i!=null?si(t,y,Pe(i)):o!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Pe(E):t.removeAttribute("name")}function bs(t,e,i,o,f,h,y,E){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),e!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||e!=null)){jt(t);return}i=i!=null?""+Pe(i):"",e=e!=null?""+Pe(e):i,E||e===t.value||(t.value=e),t.defaultValue=e}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),jt(t)}function si(t,e,i){e==="number"&&za(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function he(t,e,i,o){if(t=t.options,e){e={};for(var f=0;f<i.length;f++)e["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=e.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&o&&(t[i].defaultSelected=!0)}else{for(i=""+Pe(i),e=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}e!==null||t[f].disabled||(e=t[f])}e!==null&&(e.selected=!0)}}function Si(t,e,i){if(e!=null&&(e=""+Pe(e),e!==t.value&&(t.value=e),i==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=i!=null?""+Pe(i):""}function Ca(t,e,i,o){if(e==null){if(o!=null){if(i!=null)throw Error(u(92));if(st(o)){if(1<o.length)throw Error(u(93));o=o[0]}i=o}i==null&&(i=""),e=i}i=Pe(e),t.defaultValue=i,o=t.textContent,o===i&&o!==""&&o!==null&&(t.value=o),jt(t)}function Gn(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var go=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function La(t,e,i){var o=e.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":o?t.setProperty(e,i):typeof i!="number"||i===0||go.has(e)?e==="float"?t.cssFloat=i:t[e]=(""+i).trim():t[e]=i+"px"}function ur(t,e,i){if(e!=null&&typeof e!="object")throw Error(u(62));if(t=t.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||e!=null&&e.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in e)o=e[f],e.hasOwnProperty(f)&&i[f]!==o&&La(t,f,o)}else for(var h in e)e.hasOwnProperty(h)&&La(t,h,e[h])}function xs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(t){return yo.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function _n(){}var fr=null;function ws(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ma=null,Ot=null;function kn(t){var e=Ta(t);if(e&&(t=e.stateNode)){var i=t[Ve]||null;t:switch(t=e.stateNode,e.type){case"input":if(po(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+pe(""+e)+'"][type="radio"]'),e=0;e<i.length;e++){var o=i[e];if(o!==t&&o.form===t.form){var f=o[Ve]||null;if(!f)throw Error(u(90));po(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(e=0;e<i.length;e++)o=i[e],o.form===t.form&&ve(o)}break t;case"textarea":Si(t,i.value,i.defaultValue);break t;case"select":e=i.value,e!=null&&he(t,!!i.multiple,e,!1)}}}var ae=!1;function vo(t,e,i){if(ae)return t(e,i);ae=!0;try{var o=t(e);return o}finally{if(ae=!1,(Ma!==null||Ot!==null)&&(zu(),Ma&&(e=Ma,t=Ot,Ot=Ma=null,kn(e),t)))for(e=0;e<t.length;e++)kn(t[e])}}function Fi(t,e){var i=t.stateNode;if(i===null)return null;var o=i[Ve]||null;if(o===null)return null;i=o[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break t;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(u(231,e,typeof i));return i}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ss=!1;if(Rn)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){Ss=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{Ss=!1}var Vn=null,Ji=null,Ee=null;function Ei(){if(Ee)return Ee;var t,e=Ji,i=e.length,o,f="value"in Vn?Vn.value:Vn.textContent,h=f.length;for(t=0;t<i&&e[t]===f[t];t++);var y=i-t;for(o=1;o<=y&&e[i-o]===f[h-o];o++);return Ee=f.slice(t,1<o?1-o:void 0)}function Es(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ts(){return!0}function Ol(){return!1}function Je(t){function e(i,o,f,h,y){this._reactName=i,this._targetInst=f,this.type=o,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(i=t[E],this[E]=i?i(h):h[E]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ts:Ol,this.isPropagationStopped=Ol,this}return T(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),e}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=Je(ri),Oa=T({},ri,{view:0,detail:0}),Qt=Je(Oa),_o,dn,oi,As=T({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:To,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oi&&(oi&&t.type==="mousemove"?(_o=t.screenX-oi.screenX,dn=t.screenY-oi.screenY):dn=_o=0,oi=t),_o)},movementY:function(t){return"movementY"in t?t.movementY:dn}}),kl=Je(As),bo=T({},As,{dataTransfer:0}),Mc=Je(bo),Rl=T({},Oa,{relatedTarget:0}),xo=Je(Rl),Oc=T({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),wo=Je(Oc),kc=T({},ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yn=Je(kc),Rc=T({},ri,{data:0}),So=Je(Rc),Ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eo(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jl[t])?!!e[t]:!1}function To(){return Eo}var Dl=T({},Oa,{key:function(t){if(t.key){var e=Ti[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Es(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:To,charCode:function(t){return t.type==="keypress"?Es(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Es(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ul=Je(Dl),Bc=T({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hl=Je(Bc),Ao=T({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:To}),jc=Je(Ao),Pl=T({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zl=Je(Pl),dr=T({},As,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wi=Je(dr),Dc=T({},ri,{newState:0,oldState:0}),zs=Je(Dc),bn=[9,13,27,32],mr=Rn&&"CompositionEvent"in window,ka=null;Rn&&"documentMode"in document&&(ka=document.documentMode);var Uc=Rn&&"TextEvent"in window&&!ka,pr=Rn&&(!mr||ka&&8<ka&&11>=ka),gr=" ",ql=!1;function Gl(t,e){switch(t){case"keyup":return bn.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function jn(t,e){switch(t){case"compositionend":return zo(e);case"keypress":return e.which!==32?null:(ql=!0,gr);case"textInput":return t=e.data,t===gr&&ql?null:t;default:return null}}function Ba(t,e){if(Ra)return t==="compositionend"||!mr&&Gl(t,e)?(t=Ei(),Ee=Ji=Vn=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pr&&e.locale!=="ko"?null:e.data;default:return null}}var Hc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hc[t.type]:e==="textarea"}function Vl(t,e,i,o){Ma?Ot?Ot.push(o):Ot=[o]:Ma=o,e=Ru(e,"onChange"),0<e.length&&(i=new hr("onChange","change",null,i,o),t.push({event:i,listeners:e}))}var Kn=null,Cs=null;function Ls(t){lg(t,0)}function Ns(t){var e=xi(t);if(ve(e))return t}function Ms(t,e){if(t==="change")return e}var Yl=!1;if(Rn){var Qn;if(Rn){var ja="oninput"in document;if(!ja){var Il=document.createElement("div");Il.setAttribute("oninput","return;"),ja=typeof Il.oninput=="function"}Qn=ja}else Qn=!1;Yl=Qn&&(!document.documentMode||9<document.documentMode)}function yr(){Kn&&(Kn.detachEvent("onpropertychange",Kl),Cs=Kn=null)}function Kl(t){if(t.propertyName==="value"&&Ns(Cs)){var e=[];Vl(e,Cs,t,ws(t)),vo(Ls,e)}}function li(t,e,i){t==="focusin"?(yr(),Kn=e,Cs=i,Kn.attachEvent("onpropertychange",Kl)):t==="focusout"&&yr()}function Pc(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ns(Cs)}function Da(t,e){if(t==="click")return Ns(e)}function Zc(t,e){if(t==="input"||t==="change")return Ns(e)}function ui(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ye=typeof Object.is=="function"?Object.is:ui;function Ua(t,e){if(Ye(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var f=i[o];if(!bt.call(e,f)||!Ye(t[f],e[f]))return!1}return!0}function vr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Os(t,e){var i=vr(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=e&&o>=e)return{node:i,offset:e-t};t=o}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=vr(i)}}function _r(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_r(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ks(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=za(t.document);e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=za(t.document)}return e}function Ai(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var br=Rn&&"documentMode"in document&&11>=document.documentMode,zi=null,xr=null,Rs=null,Ha=!1;function Ql(t,e,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ha||zi==null||zi!==za(o)||(o=zi,"selectionStart"in o&&Ai(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Rs&&Ua(Rs,o)||(Rs=o,o=Ru(xr,"onSelect"),0<o.length&&(e=new hr("onSelect","select",null,e,i),t.push({event:e,listeners:o}),e.target=zi)))}function Ci(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Pa={animationend:Ci("Animation","AnimationEnd"),animationiteration:Ci("Animation","AnimationIteration"),animationstart:Ci("Animation","AnimationStart"),transitionrun:Ci("Transition","TransitionRun"),transitionstart:Ci("Transition","TransitionStart"),transitioncancel:Ci("Transition","TransitionCancel"),transitionend:Ci("Transition","TransitionEnd")},wr={},Xl={};Rn&&(Xl=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Ie(t){if(wr[t])return wr[t];if(!Pa[t])return t;var e=Pa[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in Xl)return wr[t]=e[i];return t}var Bs=Ie("animationend"),Fl=Ie("animationiteration"),js=Ie("animationstart"),qc=Ie("transitionrun"),Jl=Ie("transitionstart"),Gc=Ie("transitioncancel"),Za=Ie("transitionend"),Wl=new Map,Li="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Li.push("scrollEnd");function xn(t,e){Wl.set(t,e),Qi(e,[t])}var Ds=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},wn=[],rn=0,Sr=0;function Us(){for(var t=rn,e=Sr=rn=0;e<t;){var i=wn[e];wn[e++]=null;var o=wn[e];wn[e++]=null;var f=wn[e];wn[e++]=null;var h=wn[e];if(wn[e++]=null,o!==null&&f!==null){var y=o.pending;y===null?f.next=f:(f.next=y.next,y.next=f),o.pending=f}h!==0&&qa(i,f,h)}}function Ni(t,e,i,o){wn[rn++]=t,wn[rn++]=e,wn[rn++]=i,wn[rn++]=o,Sr|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Co(t,e,i,o){return Ni(t,e,i,o),Hs(t)}function Xn(t,e){return Ni(t,null,null,e),Hs(t)}function qa(t,e,i){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i);for(var f=!1,h=t.return;h!==null;)h.childLanes|=i,o=h.alternate,o!==null&&(o.childLanes|=i),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,f&&e!==null&&(f=31-Fe(i),t=h.hiddenUpdates,o=t[f],o===null?t[f]=[e]:o.push(e),e.lane=i|536870912),h):null}function Hs(t){if(50<$o)throw $o=0,If=null,Error(u(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var $i={};function Vc(t,e,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,i,o){return new Vc(t,e,i,o)}function Er(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fn(t,e){var i=t.alternate;return i===null?(i=on(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Lo(t,e){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Ps(t,e,i,o,f,h){var y=0;if(o=t,typeof t=="function")Er(t)&&(y=1);else if(typeof t=="string")y=J_(t,i,lt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case gt:return t=on(31,i,e,f),t.elementType=gt,t.lanes=h,t;case z:return ta(i.children,f,h,e);case P:y=8,f|=24;break;case Z:return t=on(12,i,e,f|2),t.elementType=Z,t.lanes=h,t;case ut:return t=on(13,i,e,f),t.elementType=ut,t.lanes=h,t;case ot:return t=on(19,i,e,f),t.elementType=ot,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case at:y=10;break t;case et:y=9;break t;case ct:y=11;break t;case F:y=14;break t;case $:y=16,o=null;break t}y=29,i=Error(u(130,t===null?"null":typeof t,"")),o=null}return e=on(y,i,e,f),e.elementType=t,e.type=o,e.lanes=h,e}function ta(t,e,i,o){return t=on(7,t,o,e),t.lanes=i,t}function Tr(t,e,i){return t=on(6,t,null,e),t.lanes=i,t}function No(t){var e=on(18,null,null,0);return e.stateNode=t,e}function Mo(t,e,i){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var n=new WeakMap;function r(t,e){if(typeof t=="object"&&t!==null){var i=n.get(t);return i!==void 0?i:(e={value:t,source:e,stack:Xe(e)},n.set(t,e),e)}return{value:t,source:e,stack:Xe(e)}}var c=[],m=0,g=null,S=0,M=[],U=0,V=null,nt=1,pt="";function Et(t,e){c[m++]=S,c[m++]=g,g=t,S=e}function Pt(t,e,i){M[U++]=nt,M[U++]=pt,M[U++]=V,V=t;var o=nt;t=pt;var f=32-Fe(o)-1;o&=~(1<<f),i+=1;var h=32-Fe(e)+f;if(30<h){var y=f-f%5;h=(o&(1<<y)-1).toString(32),o>>=y,f-=y,nt=1<<32-Fe(e)+f|i<<f|o,pt=h+t}else nt=1<<h|i<<f|o,pt=t}function Ze(t){t.return!==null&&(Et(t,1),Pt(t,1,0))}function Te(t){for(;t===g;)g=c[--m],c[m]=null,S=c[--m],c[m]=null;for(;t===V;)V=M[--U],M[U]=null,pt=M[--U],M[U]=null,nt=M[--U],M[U]=null}function mn(t,e){M[U++]=nt,M[U++]=pt,M[U++]=V,nt=e.id,pt=e.overflow,V=t}var Wt=null,$t=null,Yt=!1,Mi=null,Sn=!1,Ar=Error(u(519));function Oi(t){var e=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zs(r(e,t)),Ar}function Oo(t){var e=t.stateNode,i=t.type,o=t.memoizedProps;switch(e[Me]=t,e[Ve]=o,i){case"dialog":Kt("cancel",e),Kt("close",e);break;case"iframe":case"object":case"embed":Kt("load",e);break;case"video":case"audio":for(i=0;i<el.length;i++)Kt(el[i],e);break;case"source":Kt("error",e);break;case"img":case"image":case"link":Kt("error",e),Kt("load",e);break;case"details":Kt("toggle",e);break;case"input":Kt("invalid",e),bs(e,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Kt("invalid",e);break;case"textarea":Kt("invalid",e),Ca(e,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||e.textContent===""+i||o.suppressHydrationWarning===!0||hg(e.textContent,i)?(o.popover!=null&&(Kt("beforetoggle",e),Kt("toggle",e)),o.onScroll!=null&&Kt("scroll",e),o.onScrollEnd!=null&&Kt("scrollend",e),o.onClick!=null&&(e.onclick=_n),e=!0):e=!1,e||Oi(t,!0)}function we(t){for(Wt=t.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Sn=!1;return;case 27:case 3:Sn=!0;return;default:Wt=Wt.return}}function ci(t){if(t!==Wt)return!1;if(!Yt)return we(t),Yt=!0,!1;var e=t.tag,i;if((i=e!==3&&e!==27)&&((i=e===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||oh(t.type,t.memoizedProps)),i=!i),i&&$t&&Oi(t),we(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));$t=xg(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));$t=xg(t)}else e===27?(e=$t,ns(t.type)?(t=hh,hh=null,$t=t):$t=e):$t=Wt?Wn(t.stateNode.nextSibling):null;return!0}function ea(){$t=Wt=null,Yt=!1}function ko(){var t=Mi;return t!==null&&(zn===null?zn=t:zn.push.apply(zn,t),Mi=null),t}function Zs(t){Mi===null?Mi=[t]:Mi.push(t)}var qs=C(null),ki=null,fi=null;function Ga(t,e,i){rt(qs,e._currentValue),e._currentValue=i}function na(t){t._currentValue=qs.current,H(qs)}function Yc(t,e,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===i)break;t=t.return}}function Ic(t,e,i,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var y=f.child;h=h.firstContext;t:for(;h!==null;){var E=h;h=f;for(var k=0;k<e.length;k++)if(E.context===e[k]){h.lanes|=i,E=h.alternate,E!==null&&(E.lanes|=i),Yc(h.return,i,t),o||(y=null);break t}h=E.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(u(341));y.lanes|=i,h=y.alternate,h!==null&&(h.lanes|=i),Yc(y,i,t),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function zr(t,e,i,o){t=null;for(var f=e,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(u(387));if(y=y.memoizedProps,y!==null){var E=f.type;Ye(f.pendingProps.value,y.value)||(t!==null?t.push(E):t=[E])}}else if(f===Tt.current){if(y=f.alternate,y===null)throw Error(u(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(rl):t=[rl])}f=f.return}t!==null&&Ic(e,t,i,o),e.flags|=262144}function $l(t){for(t=t.firstContext;t!==null;){if(!Ye(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gs(t){ki=t,fi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function We(t){return Jd(ki,t)}function tu(t,e){return ki===null&&Gs(t),Jd(t,e)}function Jd(t,e){var i=e._currentValue;if(e={context:e,memoizedValue:i,next:null},fi===null){if(t===null)throw Error(u(308));fi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else fi=fi.next=e;return i}var Kv=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(i,o){t.push(o)}};this.abort=function(){e.aborted=!0,t.forEach(function(i){return i()})}},Qv=a.unstable_scheduleCallback,Xv=a.unstable_NormalPriority,ke={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new Kv,data:new Map,refCount:0}}function Ro(t){t.refCount--,t.refCount===0&&Qv(Xv,function(){t.controller.abort()})}var Bo=null,Qc=0,Cr=0,Lr=null;function Fv(t,e){if(Bo===null){var i=Bo=[];Qc=0,Cr=Wf(),Lr={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Qc++,e.then(Wd,Wd),e}function Wd(){if(--Qc===0&&Bo!==null){Lr!==null&&(Lr.status="fulfilled");var t=Bo;Bo=null,Cr=0,Lr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Jv(t,e){var i=[],o={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){o.status="fulfilled",o.value=e;for(var f=0;f<i.length;f++)(0,i[f])(e)},function(f){for(o.status="rejected",o.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),o}var $d=O.S;O.S=function(t,e){jp=Lt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Fv(t,e),$d!==null&&$d(t,e)};var Vs=C(null);function Xc(){var t=Vs.current;return t!==null?t:de.pooledCache}function eu(t,e){e===null?rt(Vs,Vs.current):rt(Vs,e.pool)}function tm(){var t=Xc();return t===null?null:{parent:ke._currentValue,pool:t}}var Nr=Error(u(460)),Fc=Error(u(474)),nu=Error(u(542)),iu={then:function(){}};function em(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nm(t,e,i){switch(i=t[i],i===void 0?t.push(e):i!==e&&(e.then(_n,_n),e=i),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,am(t),t;default:if(typeof e.status=="string")e.then(_n,_n);else{if(t=de,t!==null&&100<t.shellSuspendCounter)throw Error(u(482));t=e,t.status="pending",t.then(function(o){if(e.status==="pending"){var f=e;f.status="fulfilled",f.value=o}},function(o){if(e.status==="pending"){var f=e;f.status="rejected",f.reason=o}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,am(t),t}throw Is=e,Nr}}function Ys(t){try{var e=t._init;return e(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Is=i,Nr):i}}var Is=null;function im(){if(Is===null)throw Error(u(459));var t=Is;return Is=null,t}function am(t){if(t===Nr||t===nu)throw Error(u(483))}var Mr=null,jo=0;function au(t){var e=jo;return jo+=1,Mr===null&&(Mr=[]),nm(Mr,t,e)}function Do(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function su(t,e){throw e.$$typeof===N?Error(u(525)):(t=Object.prototype.toString.call(e),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function sm(t){function e(D,R){if(t){var q=D.deletions;q===null?(D.deletions=[R],D.flags|=16):q.push(R)}}function i(D,R){if(!t)return null;for(;R!==null;)e(D,R),R=R.sibling;return null}function o(D){for(var R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function f(D,R){return D=Fn(D,R),D.index=0,D.sibling=null,D}function h(D,R,q){return D.index=q,t?(q=D.alternate,q!==null?(q=q.index,q<R?(D.flags|=67108866,R):q):(D.flags|=67108866,R)):(D.flags|=1048576,R)}function y(D){return t&&D.alternate===null&&(D.flags|=67108866),D}function E(D,R,q,W){return R===null||R.tag!==6?(R=Tr(q,D.mode,W),R.return=D,R):(R=f(R,q),R.return=D,R)}function k(D,R,q,W){var zt=q.type;return zt===z?J(D,R,q.props.children,W,q.key):R!==null&&(R.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===$&&Ys(zt)===R.type)?(R=f(R,q.props),Do(R,q),R.return=D,R):(R=Ps(q.type,q.key,q.props,null,D.mode,W),Do(R,q),R.return=D,R)}function G(D,R,q,W){return R===null||R.tag!==4||R.stateNode.containerInfo!==q.containerInfo||R.stateNode.implementation!==q.implementation?(R=Mo(q,D.mode,W),R.return=D,R):(R=f(R,q.children||[]),R.return=D,R)}function J(D,R,q,W,zt){return R===null||R.tag!==7?(R=ta(q,D.mode,W,zt),R.return=D,R):(R=f(R,q),R.return=D,R)}function it(D,R,q){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Tr(""+R,D.mode,q),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case j:return q=Ps(R.type,R.key,R.props,null,D.mode,q),Do(q,R),q.return=D,q;case B:return R=Mo(R,D.mode,q),R.return=D,R;case $:return R=Ys(R),it(D,R,q)}if(st(R)||vt(R))return R=ta(R,D.mode,q,null),R.return=D,R;if(typeof R.then=="function")return it(D,au(R),q);if(R.$$typeof===at)return it(D,tu(D,R),q);su(D,R)}return null}function Y(D,R,q,W){var zt=R!==null?R.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return zt!==null?null:E(D,R,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case j:return q.key===zt?k(D,R,q,W):null;case B:return q.key===zt?G(D,R,q,W):null;case $:return q=Ys(q),Y(D,R,q,W)}if(st(q)||vt(q))return zt!==null?null:J(D,R,q,W,null);if(typeof q.then=="function")return Y(D,R,au(q),W);if(q.$$typeof===at)return Y(D,R,tu(D,q),W);su(D,q)}return null}function Q(D,R,q,W,zt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return D=D.get(q)||null,E(R,D,""+W,zt);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case j:return D=D.get(W.key===null?q:W.key)||null,k(R,D,W,zt);case B:return D=D.get(W.key===null?q:W.key)||null,G(R,D,W,zt);case $:return W=Ys(W),Q(D,R,q,W,zt)}if(st(W)||vt(W))return D=D.get(q)||null,J(R,D,W,zt,null);if(typeof W.then=="function")return Q(D,R,q,au(W),zt);if(W.$$typeof===at)return Q(D,R,q,tu(R,W),zt);su(R,W)}return null}function xt(D,R,q,W){for(var zt=null,te=null,wt=R,Zt=R=0,Ft=null;wt!==null&&Zt<q.length;Zt++){wt.index>Zt?(Ft=wt,wt=null):Ft=wt.sibling;var ee=Y(D,wt,q[Zt],W);if(ee===null){wt===null&&(wt=Ft);break}t&&wt&&ee.alternate===null&&e(D,wt),R=h(ee,R,Zt),te===null?zt=ee:te.sibling=ee,te=ee,wt=Ft}if(Zt===q.length)return i(D,wt),Yt&&Et(D,Zt),zt;if(wt===null){for(;Zt<q.length;Zt++)wt=it(D,q[Zt],W),wt!==null&&(R=h(wt,R,Zt),te===null?zt=wt:te.sibling=wt,te=wt);return Yt&&Et(D,Zt),zt}for(wt=o(wt);Zt<q.length;Zt++)Ft=Q(wt,D,Zt,q[Zt],W),Ft!==null&&(t&&Ft.alternate!==null&&wt.delete(Ft.key===null?Zt:Ft.key),R=h(Ft,R,Zt),te===null?zt=Ft:te.sibling=Ft,te=Ft);return t&&wt.forEach(function(os){return e(D,os)}),Yt&&Et(D,Zt),zt}function Mt(D,R,q,W){if(q==null)throw Error(u(151));for(var zt=null,te=null,wt=R,Zt=R=0,Ft=null,ee=q.next();wt!==null&&!ee.done;Zt++,ee=q.next()){wt.index>Zt?(Ft=wt,wt=null):Ft=wt.sibling;var os=Y(D,wt,ee.value,W);if(os===null){wt===null&&(wt=Ft);break}t&&wt&&os.alternate===null&&e(D,wt),R=h(os,R,Zt),te===null?zt=os:te.sibling=os,te=os,wt=Ft}if(ee.done)return i(D,wt),Yt&&Et(D,Zt),zt;if(wt===null){for(;!ee.done;Zt++,ee=q.next())ee=it(D,ee.value,W),ee!==null&&(R=h(ee,R,Zt),te===null?zt=ee:te.sibling=ee,te=ee);return Yt&&Et(D,Zt),zt}for(wt=o(wt);!ee.done;Zt++,ee=q.next())ee=Q(wt,D,Zt,ee.value,W),ee!==null&&(t&&ee.alternate!==null&&wt.delete(ee.key===null?Zt:ee.key),R=h(ee,R,Zt),te===null?zt=ee:te.sibling=ee,te=ee);return t&&wt.forEach(function(lb){return e(D,lb)}),Yt&&Et(D,Zt),zt}function ce(D,R,q,W){if(typeof q=="object"&&q!==null&&q.type===z&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case j:t:{for(var zt=q.key;R!==null;){if(R.key===zt){if(zt=q.type,zt===z){if(R.tag===7){i(D,R.sibling),W=f(R,q.props.children),W.return=D,D=W;break t}}else if(R.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===$&&Ys(zt)===R.type){i(D,R.sibling),W=f(R,q.props),Do(W,q),W.return=D,D=W;break t}i(D,R);break}else e(D,R);R=R.sibling}q.type===z?(W=ta(q.props.children,D.mode,W,q.key),W.return=D,D=W):(W=Ps(q.type,q.key,q.props,null,D.mode,W),Do(W,q),W.return=D,D=W)}return y(D);case B:t:{for(zt=q.key;R!==null;){if(R.key===zt)if(R.tag===4&&R.stateNode.containerInfo===q.containerInfo&&R.stateNode.implementation===q.implementation){i(D,R.sibling),W=f(R,q.children||[]),W.return=D,D=W;break t}else{i(D,R);break}else e(D,R);R=R.sibling}W=Mo(q,D.mode,W),W.return=D,D=W}return y(D);case $:return q=Ys(q),ce(D,R,q,W)}if(st(q))return xt(D,R,q,W);if(vt(q)){if(zt=vt(q),typeof zt!="function")throw Error(u(150));return q=zt.call(q),Mt(D,R,q,W)}if(typeof q.then=="function")return ce(D,R,au(q),W);if(q.$$typeof===at)return ce(D,R,tu(D,q),W);su(D,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,R!==null&&R.tag===6?(i(D,R.sibling),W=f(R,q),W.return=D,D=W):(i(D,R),W=Tr(q,D.mode,W),W.return=D,D=W),y(D)):i(D,R)}return function(D,R,q,W){try{jo=0;var zt=ce(D,R,q,W);return Mr=null,zt}catch(wt){if(wt===Nr||wt===nu)throw wt;var te=on(29,wt,null,D.mode);return te.lanes=W,te.return=D,te}}}var Ks=sm(!0),rm=sm(!1),Va=!1;function Jc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wc(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ya(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(t,e,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ie&2)!==0){var f=o.pending;return f===null?e.next=e:(e.next=f.next,f.next=e),o.pending=e,e=Hs(t),qa(t,null,i),e}return Ni(t,o,e,i),Hs(t)}function Uo(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194048)!==0)){var o=e.lanes;o&=t.pendingLanes,i|=o,e.lanes=i,Al(t,i)}}function $c(t,e){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var f=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?f=h=y:h=h.next=y,i=i.next}while(i!==null);h===null?f=h=e:h=h.next=e}else f=h=e;i={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}var tf=!1;function Ho(){if(tf){var t=Lr;if(t!==null)throw t}}function Po(t,e,i,o){tf=!1;var f=t.updateQueue;Va=!1;var h=f.firstBaseUpdate,y=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var k=E,G=k.next;k.next=null,y===null?h=G:y.next=G,y=k;var J=t.alternate;J!==null&&(J=J.updateQueue,E=J.lastBaseUpdate,E!==y&&(E===null?J.firstBaseUpdate=G:E.next=G,J.lastBaseUpdate=k))}if(h!==null){var it=f.baseState;y=0,J=G=k=null,E=h;do{var Y=E.lane&-536870913,Q=Y!==E.lane;if(Q?(Xt&Y)===Y:(o&Y)===Y){Y!==0&&Y===Cr&&(tf=!0),J!==null&&(J=J.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var xt=t,Mt=E;Y=e;var ce=i;switch(Mt.tag){case 1:if(xt=Mt.payload,typeof xt=="function"){it=xt.call(ce,it,Y);break t}it=xt;break t;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Mt.payload,Y=typeof xt=="function"?xt.call(ce,it,Y):xt,Y==null)break t;it=T({},it,Y);break t;case 2:Va=!0}}Y=E.callback,Y!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:E.tag,payload:E.payload,callback:E.callback,next:null},J===null?(G=J=Q,k=it):J=J.next=Q,y|=Y;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);J===null&&(k=it),f.baseState=k,f.firstBaseUpdate=G,f.lastBaseUpdate=J,h===null&&(f.shared.lanes=0),Ja|=y,t.lanes=y,t.memoizedState=it}}function om(t,e){if(typeof t!="function")throw Error(u(191,t));t.call(e)}function lm(t,e){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)om(i[t],e)}var Or=C(null),ru=C(0);function um(t,e){t=fa,rt(ru,t),rt(Or,e),fa=t|e.baseLanes}function ef(){rt(ru,fa),rt(Or,Or.current)}function nf(){fa=ru.current,H(Or),H(ru)}var Dn=C(null),Jn=null;function Ka(t){var e=t.alternate;rt(Ce,Ce.current&1),rt(Dn,t),Jn===null&&(e===null||Or.current!==null||e.memoizedState!==null)&&(Jn=t)}function af(t){rt(Ce,Ce.current),rt(Dn,t),Jn===null&&(Jn=t)}function cm(t){t.tag===22?(rt(Ce,Ce.current),rt(Dn,t),Jn===null&&(Jn=t)):Qa()}function Qa(){rt(Ce,Ce.current),rt(Dn,Dn.current)}function Un(t){H(Dn),Jn===t&&(Jn=null),H(Ce)}var Ce=C(0);function ou(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||ch(i)||fh(i)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ia=0,Ut=null,le=null,Re=null,lu=!1,kr=!1,Qs=!1,uu=0,Zo=0,Rr=null,Wv=0;function Ae(){throw Error(u(321))}function sf(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Ye(t[i],e[i]))return!1;return!0}function rf(t,e,i,o,f,h){return ia=h,Ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,O.H=t===null||t.memoizedState===null?Km:xf,Qs=!1,h=i(o,f),Qs=!1,kr&&(h=hm(e,i,o,f)),fm(t),h}function fm(t){O.H=Vo;var e=le!==null&&le.next!==null;if(ia=0,Re=le=Ut=null,lu=!1,Zo=0,Rr=null,e)throw Error(u(300));t===null||Be||(t=t.dependencies,t!==null&&$l(t)&&(Be=!0))}function hm(t,e,i,o){Ut=t;var f=0;do{if(kr&&(Rr=null),Zo=0,kr=!1,25<=f)throw Error(u(301));if(f+=1,Re=le=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}O.H=Qm,h=e(i,o)}while(kr);return h}function $v(){var t=O.H,e=t.useState()[0];return e=typeof e.then=="function"?qo(e):e,t=t.useState()[0],(le!==null?le.memoizedState:null)!==t&&(Ut.flags|=1024),e}function of(){var t=uu!==0;return uu=0,t}function lf(t,e,i){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i}function uf(t){if(lu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}lu=!1}ia=0,Re=le=Ut=null,kr=!1,Zo=uu=0,Rr=null}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?Ut.memoizedState=Re=t:Re=Re.next=t,Re}function Le(){if(le===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=Re===null?Ut.memoizedState:Re.next;if(e!==null)Re=e,le=t;else{if(t===null)throw Ut.alternate===null?Error(u(467)):Error(u(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},Re===null?Ut.memoizedState=Re=t:Re=Re.next=t}return Re}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qo(t){var e=Zo;return Zo+=1,Rr===null&&(Rr=[]),t=nm(Rr,t,e),e=Ut,(Re===null?e.memoizedState:Re.next)===null&&(e=e.alternate,O.H=e===null||e.memoizedState===null?Km:xf),t}function fu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return qo(t);if(t.$$typeof===at)return We(t)}throw Error(u(438,String(t)))}function cf(t){var e=null,i=Ut.updateQueue;if(i!==null&&(e=i.memoCache),e==null){var o=Ut.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(e={data:o.data.map(function(f){return f.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),i===null&&(i=cu(),Ut.updateQueue=i),i.memoCache=e,i=e.data[e.index],i===void 0)for(i=e.data[e.index]=Array(t),o=0;o<t;o++)i[o]=yt;return e.index++,i}function aa(t,e){return typeof e=="function"?e(t):e}function hu(t){var e=Le();return ff(e,le,t)}function ff(t,e,i){var o=t.queue;if(o===null)throw Error(u(311));o.lastRenderedReducer=i;var f=t.baseQueue,h=o.pending;if(h!==null){if(f!==null){var y=f.next;f.next=h.next,h.next=y}e.baseQueue=f=h,o.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{e=f.next;var E=y=null,k=null,G=e,J=!1;do{var it=G.lane&-536870913;if(it!==G.lane?(Xt&it)===it:(ia&it)===it){var Y=G.revertLane;if(Y===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),it===Cr&&(J=!0);else if((ia&Y)===Y){G=G.next,Y===Cr&&(J=!0);continue}else it={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(E=k=it,y=h):k=k.next=it,Ut.lanes|=Y,Ja|=Y;it=G.action,Qs&&i(h,it),h=G.hasEagerState?G.eagerState:i(h,it)}else Y={lane:it,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(E=k=Y,y=h):k=k.next=Y,Ut.lanes|=it,Ja|=it;G=G.next}while(G!==null&&G!==e);if(k===null?y=h:k.next=E,!Ye(h,t.memoizedState)&&(Be=!0,J&&(i=Lr,i!==null)))throw i;t.memoizedState=h,t.baseState=y,t.baseQueue=k,o.lastRenderedState=h}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function hf(t){var e=Le(),i=e.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=t;var o=i.dispatch,f=i.pending,h=e.memoizedState;if(f!==null){i.pending=null;var y=f=f.next;do h=t(h,y.action),y=y.next;while(y!==f);Ye(h,e.memoizedState)||(Be=!0),e.memoizedState=h,e.baseQueue===null&&(e.baseState=h),i.lastRenderedState=h}return[h,o]}function dm(t,e,i){var o=Ut,f=Le(),h=Yt;if(h){if(i===void 0)throw Error(u(407));i=i()}else i=e();var y=!Ye((le||f).memoizedState,i);if(y&&(f.memoizedState=i,Be=!0),f=f.queue,pf(gm.bind(null,o,f,t),[t]),f.getSnapshot!==e||y||Re!==null&&Re.memoizedState.tag&1){if(o.flags|=2048,Br(9,{destroy:void 0},pm.bind(null,o,f,i,e),null),de===null)throw Error(u(349));h||(ia&127)!==0||mm(o,e,i)}return i}function mm(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=Ut.updateQueue,e===null?(e=cu(),Ut.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function pm(t,e,i,o){e.value=i,e.getSnapshot=o,ym(e)&&vm(t)}function gm(t,e,i){return i(function(){ym(e)&&vm(t)})}function ym(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Ye(t,i)}catch{return!0}}function vm(t){var e=Xn(t,2);e!==null&&Cn(e,t,2)}function df(t){var e=pn();if(typeof t=="function"){var i=t;if(t=i(),Qs){On(!0);try{i()}finally{On(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:t},e}function _m(t,e,i,o){return t.baseState=i,ff(t,le,typeof o=="function"?o:aa)}function t_(t,e,i,o,f){if(pu(t))throw Error(u(485));if(t=e.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};O.T!==null?i(!0):h.isTransition=!1,o(h),i=e.pending,i===null?(h.next=e.pending=h,bm(e,h)):(h.next=i.next,e.pending=i.next=h)}}function bm(t,e){var i=e.action,o=e.payload,f=t.state;if(e.isTransition){var h=O.T,y={};O.T=y;try{var E=i(f,o),k=O.S;k!==null&&k(y,E),xm(t,e,E)}catch(G){mf(t,e,G)}finally{h!==null&&y.types!==null&&(h.types=y.types),O.T=h}}else try{h=i(f,o),xm(t,e,h)}catch(G){mf(t,e,G)}}function xm(t,e,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){wm(t,e,o)},function(o){return mf(t,e,o)}):wm(t,e,i)}function wm(t,e,i){e.status="fulfilled",e.value=i,Sm(e),t.state=i,e=t.pending,e!==null&&(i=e.next,i===e?t.pending=null:(i=i.next,e.next=i,bm(t,i)))}function mf(t,e,i){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do e.status="rejected",e.reason=i,Sm(e),e=e.next;while(e!==o)}t.action=null}function Sm(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Em(t,e){return e}function Tm(t,e){if(Yt){var i=de.formState;if(i!==null){t:{var o=Ut;if(Yt){if($t){e:{for(var f=$t,h=Sn;f.nodeType!==8;){if(!h){f=null;break e}if(f=Wn(f.nextSibling),f===null){f=null;break e}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){$t=Wn(f.nextSibling),o=f.data==="F!";break t}}Oi(o)}o=!1}o&&(e=i[0])}}return i=pn(),i.memoizedState=i.baseState=e,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:e},i.queue=o,i=Vm.bind(null,Ut,o),o.dispatch=i,o=df(!1),h=bf.bind(null,Ut,!1,o.queue),o=pn(),f={state:e,dispatch:null,action:t,pending:null},o.queue=f,i=t_.bind(null,Ut,f,h,i),f.dispatch=i,o.memoizedState=t,[e,i,!1]}function Am(t){var e=Le();return zm(e,le,t)}function zm(t,e,i){if(e=ff(t,e,Em)[0],t=hu(aa)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var o=qo(e)}catch(y){throw y===Nr?nu:y}else o=e;e=Le();var f=e.queue,h=f.dispatch;return i!==e.memoizedState&&(Ut.flags|=2048,Br(9,{destroy:void 0},e_.bind(null,f,i),null)),[o,h,t]}function e_(t,e){t.action=e}function Cm(t){var e=Le(),i=le;if(i!==null)return zm(e,i,t);Le(),e=e.memoizedState,i=Le();var o=i.queue.dispatch;return i.memoizedState=t,[e,o,!1]}function Br(t,e,i,o){return t={tag:t,create:i,deps:o,inst:e,next:null},e=Ut.updateQueue,e===null&&(e=cu(),Ut.updateQueue=e),i=e.lastEffect,i===null?e.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,e.lastEffect=t),t}function Lm(){return Le().memoizedState}function du(t,e,i,o){var f=pn();Ut.flags|=t,f.memoizedState=Br(1|e,{destroy:void 0},i,o===void 0?null:o)}function mu(t,e,i,o){var f=Le();o=o===void 0?null:o;var h=f.memoizedState.inst;le!==null&&o!==null&&sf(o,le.memoizedState.deps)?f.memoizedState=Br(e,h,i,o):(Ut.flags|=t,f.memoizedState=Br(1|e,h,i,o))}function Nm(t,e){du(8390656,8,t,e)}function pf(t,e){mu(2048,8,t,e)}function n_(t){Ut.flags|=4;var e=Ut.updateQueue;if(e===null)e=cu(),Ut.updateQueue=e,e.events=[t];else{var i=e.events;i===null?e.events=[t]:i.push(t)}}function Mm(t){var e=Le().memoizedState;return n_({ref:e,nextImpl:t}),function(){if((ie&2)!==0)throw Error(u(440));return e.impl.apply(void 0,arguments)}}function Om(t,e){return mu(4,2,t,e)}function km(t,e){return mu(4,4,t,e)}function Rm(t,e){if(typeof e=="function"){t=t();var i=e(t);return function(){typeof i=="function"?i():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bm(t,e,i){i=i!=null?i.concat([t]):null,mu(4,4,Rm.bind(null,e,t),i)}function gf(){}function jm(t,e){var i=Le();e=e===void 0?null:e;var o=i.memoizedState;return e!==null&&sf(e,o[1])?o[0]:(i.memoizedState=[t,e],t)}function Dm(t,e){var i=Le();e=e===void 0?null:e;var o=i.memoizedState;if(e!==null&&sf(e,o[1]))return o[0];if(o=t(),Qs){On(!0);try{t()}finally{On(!1)}}return i.memoizedState=[o,e],o}function yf(t,e,i){return i===void 0||(ia&1073741824)!==0&&(Xt&261930)===0?t.memoizedState=e:(t.memoizedState=i,t=Up(),Ut.lanes|=t,Ja|=t,i)}function Um(t,e,i,o){return Ye(i,e)?i:Or.current!==null?(t=yf(t,i,o),Ye(t,e)||(Be=!0),t):(ia&42)===0||(ia&1073741824)!==0&&(Xt&261930)===0?(Be=!0,t.memoizedState=i):(t=Up(),Ut.lanes|=t,Ja|=t,e)}function Hm(t,e,i,o,f){var h=I.p;I.p=h!==0&&8>h?h:8;var y=O.T,E={};O.T=E,bf(t,!1,e,i);try{var k=f(),G=O.S;if(G!==null&&G(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var J=Jv(k,o);Go(t,e,J,Zn(t))}else Go(t,e,o,Zn(t))}catch(it){Go(t,e,{then:function(){},status:"rejected",reason:it},Zn())}finally{I.p=h,y!==null&&E.types!==null&&(y.types=E.types),O.T=y}}function i_(){}function vf(t,e,i,o){if(t.tag!==5)throw Error(u(476));var f=Pm(t).queue;Hm(t,f,e,K,i===null?i_:function(){return Zm(t),i(o)})}function Pm(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:K},next:null};var i={};return e.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:i},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Zm(t){var e=Pm(t);e.next===null&&(e=t.alternate.memoizedState),Go(t,e.next.queue,{},Zn())}function _f(){return We(rl)}function qm(){return Le().memoizedState}function Gm(){return Le().memoizedState}function a_(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var i=Zn();t=Ya(i);var o=Ia(e,t,i);o!==null&&(Cn(o,e,i),Uo(o,e,i)),e={cache:Kc()},t.payload=e;return}e=e.return}}function s_(t,e,i){var o=Zn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},pu(t)?Ym(e,i):(i=Co(t,e,i,o),i!==null&&(Cn(i,t,o),Im(i,e,o)))}function Vm(t,e,i){var o=Zn();Go(t,e,i,o)}function Go(t,e,i,o){var f={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(pu(t))Ym(e,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=e.lastRenderedReducer,h!==null))try{var y=e.lastRenderedState,E=h(y,i);if(f.hasEagerState=!0,f.eagerState=E,Ye(E,y))return Ni(t,e,f,0),de===null&&Us(),!1}catch{}if(i=Co(t,e,f,o),i!==null)return Cn(i,t,o),Im(i,e,o),!0}return!1}function bf(t,e,i,o){if(o={lane:2,revertLane:Wf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},pu(t)){if(e)throw Error(u(479))}else e=Co(t,i,o,2),e!==null&&Cn(e,t,2)}function pu(t){var e=t.alternate;return t===Ut||e!==null&&e===Ut}function Ym(t,e){kr=lu=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function Im(t,e,i){if((i&4194048)!==0){var o=e.lanes;o&=t.pendingLanes,i|=o,e.lanes=i,Al(t,i)}}var Vo={readContext:We,use:fu,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useLayoutEffect:Ae,useInsertionEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useSyncExternalStore:Ae,useId:Ae,useHostTransitionStatus:Ae,useFormState:Ae,useActionState:Ae,useOptimistic:Ae,useMemoCache:Ae,useCacheRefresh:Ae};Vo.useEffectEvent=Ae;var Km={readContext:We,use:fu,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:We,useEffect:Nm,useImperativeHandle:function(t,e,i){i=i!=null?i.concat([t]):null,du(4194308,4,Rm.bind(null,e,t),i)},useLayoutEffect:function(t,e){return du(4194308,4,t,e)},useInsertionEffect:function(t,e){du(4,2,t,e)},useMemo:function(t,e){var i=pn();e=e===void 0?null:e;var o=t();if(Qs){On(!0);try{t()}finally{On(!1)}}return i.memoizedState=[o,e],o},useReducer:function(t,e,i){var o=pn();if(i!==void 0){var f=i(e);if(Qs){On(!0);try{i(e)}finally{On(!1)}}}else f=e;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=s_.bind(null,Ut,t),[o.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:function(t){t=df(t);var e=t.queue,i=Vm.bind(null,Ut,e);return e.dispatch=i,[t.memoizedState,i]},useDebugValue:gf,useDeferredValue:function(t,e){var i=pn();return yf(i,t,e)},useTransition:function(){var t=df(!1);return t=Hm.bind(null,Ut,t.queue,!0,!1),pn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,i){var o=Ut,f=pn();if(Yt){if(i===void 0)throw Error(u(407));i=i()}else{if(i=e(),de===null)throw Error(u(349));(Xt&127)!==0||mm(o,e,i)}f.memoizedState=i;var h={value:i,getSnapshot:e};return f.queue=h,Nm(gm.bind(null,o,h,t),[t]),o.flags|=2048,Br(9,{destroy:void 0},pm.bind(null,o,h,i,e),null),i},useId:function(){var t=pn(),e=de.identifierPrefix;if(Yt){var i=pt,o=nt;i=(o&~(1<<32-Fe(o)-1)).toString(32)+i,e="_"+e+"R_"+i,i=uu++,0<i&&(e+="H"+i.toString(32)),e+="_"}else i=Wv++,e="_"+e+"r_"+i.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:_f,useFormState:Tm,useActionState:Tm,useOptimistic:function(t){var e=pn();e.memoizedState=e.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=i,e=bf.bind(null,Ut,!0,i),i.dispatch=e,[t,e]},useMemoCache:cf,useCacheRefresh:function(){return pn().memoizedState=a_.bind(null,Ut)},useEffectEvent:function(t){var e=pn(),i={impl:t};return e.memoizedState=i,function(){if((ie&2)!==0)throw Error(u(440));return i.impl.apply(void 0,arguments)}}},xf={readContext:We,use:fu,useCallback:jm,useContext:We,useEffect:pf,useImperativeHandle:Bm,useInsertionEffect:Om,useLayoutEffect:km,useMemo:Dm,useReducer:hu,useRef:Lm,useState:function(){return hu(aa)},useDebugValue:gf,useDeferredValue:function(t,e){var i=Le();return Um(i,le.memoizedState,t,e)},useTransition:function(){var t=hu(aa)[0],e=Le().memoizedState;return[typeof t=="boolean"?t:qo(t),e]},useSyncExternalStore:dm,useId:qm,useHostTransitionStatus:_f,useFormState:Am,useActionState:Am,useOptimistic:function(t,e){var i=Le();return _m(i,le,t,e)},useMemoCache:cf,useCacheRefresh:Gm};xf.useEffectEvent=Mm;var Qm={readContext:We,use:fu,useCallback:jm,useContext:We,useEffect:pf,useImperativeHandle:Bm,useInsertionEffect:Om,useLayoutEffect:km,useMemo:Dm,useReducer:hf,useRef:Lm,useState:function(){return hf(aa)},useDebugValue:gf,useDeferredValue:function(t,e){var i=Le();return le===null?yf(i,t,e):Um(i,le.memoizedState,t,e)},useTransition:function(){var t=hf(aa)[0],e=Le().memoizedState;return[typeof t=="boolean"?t:qo(t),e]},useSyncExternalStore:dm,useId:qm,useHostTransitionStatus:_f,useFormState:Cm,useActionState:Cm,useOptimistic:function(t,e){var i=Le();return le!==null?_m(i,le,t,e):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:cf,useCacheRefresh:Gm};Qm.useEffectEvent=Mm;function wf(t,e,i,o){e=t.memoizedState,i=i(o,e),i=i==null?e:T({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Sf={enqueueSetState:function(t,e,i){t=t._reactInternals;var o=Zn(),f=Ya(o);f.payload=e,i!=null&&(f.callback=i),e=Ia(t,f,o),e!==null&&(Cn(e,t,o),Uo(e,t,o))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var o=Zn(),f=Ya(o);f.tag=1,f.payload=e,i!=null&&(f.callback=i),e=Ia(t,f,o),e!==null&&(Cn(e,t,o),Uo(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=Zn(),o=Ya(i);o.tag=2,e!=null&&(o.callback=e),e=Ia(t,o,i),e!==null&&(Cn(e,t,i),Uo(e,t,i))}};function Xm(t,e,i,o,f,h,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,y):e.prototype&&e.prototype.isPureReactComponent?!Ua(i,o)||!Ua(f,h):!0}function Fm(t,e,i,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,o),e.state!==t&&Sf.enqueueReplaceState(e,e.state,null)}function Xs(t,e){var i=e;if("ref"in e){i={};for(var o in e)o!=="ref"&&(i[o]=e[o])}if(t=t.defaultProps){i===e&&(i=T({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}function Jm(t){Ds(t)}function Wm(t){console.error(t)}function $m(t){Ds(t)}function gu(t,e){try{var i=t.onUncaughtError;i(e.value,{componentStack:e.stack})}catch(o){setTimeout(function(){throw o})}}function tp(t,e,i){try{var o=t.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Ef(t,e,i){return i=Ya(i),i.tag=3,i.payload={element:null},i.callback=function(){gu(t,e)},i}function ep(t){return t=Ya(t),t.tag=3,t}function np(t,e,i,o){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var h=o.value;t.payload=function(){return f(h)},t.callback=function(){tp(e,i,o)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){tp(e,i,o),typeof f!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function r_(t,e,i,o,f){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(e=i.alternate,e!==null&&zr(e,i,f,!0),i=Dn.current,i!==null){switch(i.tag){case 31:case 13:return Jn===null?Cu():i.alternate===null&&ze===0&&(ze=3),i.flags&=-257,i.flags|=65536,i.lanes=f,o===iu?i.flags|=16384:(e=i.updateQueue,e===null?i.updateQueue=new Set([o]):e.add(o),Xf(t,o,f)),!1;case 22:return i.flags|=65536,o===iu?i.flags|=16384:(e=i.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=e):(i=e.retryQueue,i===null?e.retryQueue=new Set([o]):i.add(o)),Xf(t,o,f)),!1}throw Error(u(435,i.tag))}return Xf(t,o,f),Cu(),!1}if(Yt)return e=Dn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=f,o!==Ar&&(t=Error(u(422),{cause:o}),Zs(r(t,i)))):(o!==Ar&&(e=Error(u(423),{cause:o}),Zs(r(e,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=r(o,i),f=Ef(t.stateNode,o,f),$c(t,f),ze!==4&&(ze=2)),!1;var h=Error(u(520),{cause:o});if(h=r(h,i),Wo===null?Wo=[h]:Wo.push(h),ze!==4&&(ze=2),e===null)return!0;o=r(o,i),i=e;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Ef(i.stateNode,o,t),$c(i,t),!1;case 1:if(e=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Wa===null||!Wa.has(h))))return i.flags|=65536,f&=-f,i.lanes|=f,f=ep(f),np(f,t,i,o),$c(i,f),!1}i=i.return}while(i!==null);return!1}var Tf=Error(u(461)),Be=!1;function $e(t,e,i,o){e.child=t===null?rm(e,null,i,o):Ks(e,t.child,i,o)}function ip(t,e,i,o,f){i=i.render;var h=e.ref;if("ref"in o){var y={};for(var E in o)E!=="ref"&&(y[E]=o[E])}else y=o;return Gs(e),o=rf(t,e,i,y,h,f),E=of(),t!==null&&!Be?(lf(t,e,f),sa(t,e,f)):(Yt&&E&&Ze(e),e.flags|=1,$e(t,e,o,f),e.child)}function ap(t,e,i,o,f){if(t===null){var h=i.type;return typeof h=="function"&&!Er(h)&&h.defaultProps===void 0&&i.compare===null?(e.tag=15,e.type=h,sp(t,e,h,o,f)):(t=Ps(i.type,null,o,e,e.mode,f),t.ref=e.ref,t.return=e,e.child=t)}if(h=t.child,!kf(t,f)){var y=h.memoizedProps;if(i=i.compare,i=i!==null?i:Ua,i(y,o)&&t.ref===e.ref)return sa(t,e,f)}return e.flags|=1,t=Fn(h,o),t.ref=e.ref,t.return=e,e.child=t}function sp(t,e,i,o,f){if(t!==null){var h=t.memoizedProps;if(Ua(h,o)&&t.ref===e.ref)if(Be=!1,e.pendingProps=o=h,kf(t,f))(t.flags&131072)!==0&&(Be=!0);else return e.lanes=t.lanes,sa(t,e,f)}return Af(t,e,i,o,f)}function rp(t,e,i,o){var f=o.children,h=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((e.flags&128)!==0){if(h=h!==null?h.baseLanes|i:i,t!==null){for(o=e.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~h}else o=0,e.child=null;return op(t,e,h,i,o)}if((i&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&eu(e,h!==null?h.cachePool:null),h!==null?um(e,h):ef(),cm(e);else return o=e.lanes=536870912,op(t,e,h!==null?h.baseLanes|i:i,i,o)}else h!==null?(eu(e,h.cachePool),um(e,h),Qa(),e.memoizedState=null):(t!==null&&eu(e,null),ef(),Qa());return $e(t,e,f,i),e.child}function Yo(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function op(t,e,i,o,f){var h=Xc();return h=h===null?null:{parent:ke._currentValue,pool:h},e.memoizedState={baseLanes:i,cachePool:h},t!==null&&eu(e,null),ef(),cm(e),t!==null&&zr(t,e,o,!0),e.childLanes=f,null}function yu(t,e){return e=_u({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function lp(t,e,i){return Ks(e,t.child,null,i),t=yu(e,e.pendingProps),t.flags|=2,Un(e),e.memoizedState=null,t}function o_(t,e,i){var o=e.pendingProps,f=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Yt){if(o.mode==="hidden")return t=yu(e,o),e.lanes=536870912,Yo(null,t);if(af(e),(t=$t)?(t=bg(t,Sn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:V!==null?{id:nt,overflow:pt}:null,retryLane:536870912,hydrationErrors:null},i=No(t),i.return=e,e.child=i,Wt=e,$t=null)):t=null,t===null)throw Oi(e);return e.lanes=536870912,null}return yu(e,o)}var h=t.memoizedState;if(h!==null){var y=h.dehydrated;if(af(e),f)if(e.flags&256)e.flags&=-257,e=lp(t,e,i);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(u(558));else if(Be||zr(t,e,i,!1),f=(i&t.childLanes)!==0,Be||f){if(o=de,o!==null&&(y=zl(o,i),y!==0&&y!==h.retryLane))throw h.retryLane=y,Xn(t,y),Cn(o,t,y),Tf;Cu(),e=lp(t,e,i)}else t=h.treeContext,$t=Wn(y.nextSibling),Wt=e,Yt=!0,Mi=null,Sn=!1,t!==null&&mn(e,t),e=yu(e,o),e.flags|=4096;return e}return t=Fn(t.child,{mode:o.mode,children:o.children}),t.ref=e.ref,e.child=t,t.return=e,t}function vu(t,e){var i=e.ref;if(i===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(u(284));(t===null||t.ref!==i)&&(e.flags|=4194816)}}function Af(t,e,i,o,f){return Gs(e),i=rf(t,e,i,o,void 0,f),o=of(),t!==null&&!Be?(lf(t,e,f),sa(t,e,f)):(Yt&&o&&Ze(e),e.flags|=1,$e(t,e,i,f),e.child)}function up(t,e,i,o,f,h){return Gs(e),e.updateQueue=null,i=hm(e,o,i,f),fm(t),o=of(),t!==null&&!Be?(lf(t,e,h),sa(t,e,h)):(Yt&&o&&Ze(e),e.flags|=1,$e(t,e,i,h),e.child)}function cp(t,e,i,o,f){if(Gs(e),e.stateNode===null){var h=$i,y=i.contextType;typeof y=="object"&&y!==null&&(h=We(y)),h=new i(o,h),e.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Sf,e.stateNode=h,h._reactInternals=e,h=e.stateNode,h.props=o,h.state=e.memoizedState,h.refs={},Jc(e),y=i.contextType,h.context=typeof y=="object"&&y!==null?We(y):$i,h.state=e.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(wf(e,i,y,o),h.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&Sf.enqueueReplaceState(h,h.state,null),Po(e,o,h,f),Ho(),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308),o=!0}else if(t===null){h=e.stateNode;var E=e.memoizedProps,k=Xs(i,E);h.props=k;var G=h.context,J=i.contextType;y=$i,typeof J=="object"&&J!==null&&(y=We(J));var it=i.getDerivedStateFromProps;J=typeof it=="function"||typeof h.getSnapshotBeforeUpdate=="function",E=e.pendingProps!==E,J||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(E||G!==y)&&Fm(e,h,o,y),Va=!1;var Y=e.memoizedState;h.state=Y,Po(e,o,h,f),Ho(),G=e.memoizedState,E||Y!==G||Va?(typeof it=="function"&&(wf(e,i,it,o),G=e.memoizedState),(k=Va||Xm(e,i,k,o,Y,G,y))?(J||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=G),h.props=o,h.state=G,h.context=y,o=k):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{h=e.stateNode,Wc(t,e),y=e.memoizedProps,J=Xs(i,y),h.props=J,it=e.pendingProps,Y=h.context,G=i.contextType,k=$i,typeof G=="object"&&G!==null&&(k=We(G)),E=i.getDerivedStateFromProps,(G=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==it||Y!==k)&&Fm(e,h,o,k),Va=!1,Y=e.memoizedState,h.state=Y,Po(e,o,h,f),Ho();var Q=e.memoizedState;y!==it||Y!==Q||Va||t!==null&&t.dependencies!==null&&$l(t.dependencies)?(typeof E=="function"&&(wf(e,i,E,o),Q=e.memoizedState),(J=Va||Xm(e,i,J,o,Y,Q,k)||t!==null&&t.dependencies!==null&&$l(t.dependencies))?(G||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,Q,k),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,Q,k)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&Y===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&Y===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=Q),h.props=o,h.state=Q,h.context=k,o=J):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&Y===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&Y===t.memoizedState||(e.flags|=1024),o=!1)}return h=o,vu(t,e),o=(e.flags&128)!==0,h||o?(h=e.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:h.render(),e.flags|=1,t!==null&&o?(e.child=Ks(e,t.child,null,f),e.child=Ks(e,null,i,f)):$e(t,e,i,f),e.memoizedState=h.state,t=e.child):t=sa(t,e,f),t}function fp(t,e,i,o){return ea(),e.flags|=256,$e(t,e,i,o),e.child}var zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(t){return{baseLanes:t,cachePool:tm()}}function Lf(t,e,i){return t=t!==null?t.childLanes&~i:0,e&&(t|=Pn),t}function hp(t,e,i){var o=e.pendingProps,f=!1,h=(e.flags&128)!==0,y;if((y=h)||(y=t!==null&&t.memoizedState===null?!1:(Ce.current&2)!==0),y&&(f=!0,e.flags&=-129),y=(e.flags&32)!==0,e.flags&=-33,t===null){if(Yt){if(f?Ka(e):Qa(),(t=$t)?(t=bg(t,Sn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:V!==null?{id:nt,overflow:pt}:null,retryLane:536870912,hydrationErrors:null},i=No(t),i.return=e,e.child=i,Wt=e,$t=null)):t=null,t===null)throw Oi(e);return fh(t)?e.lanes=32:e.lanes=536870912,null}var E=o.children;return o=o.fallback,f?(Qa(),f=e.mode,E=_u({mode:"hidden",children:E},f),o=ta(o,f,i,null),E.return=e,o.return=e,E.sibling=o,e.child=E,o=e.child,o.memoizedState=Cf(i),o.childLanes=Lf(t,y,i),e.memoizedState=zf,Yo(null,o)):(Ka(e),Nf(e,E))}var k=t.memoizedState;if(k!==null&&(E=k.dehydrated,E!==null)){if(h)e.flags&256?(Ka(e),e.flags&=-257,e=Mf(t,e,i)):e.memoizedState!==null?(Qa(),e.child=t.child,e.flags|=128,e=null):(Qa(),E=o.fallback,f=e.mode,o=_u({mode:"visible",children:o.children},f),E=ta(E,f,i,null),E.flags|=2,o.return=e,E.return=e,o.sibling=E,e.child=o,Ks(e,t.child,null,i),o=e.child,o.memoizedState=Cf(i),o.childLanes=Lf(t,y,i),e.memoizedState=zf,e=Yo(null,o));else if(Ka(e),fh(E)){if(y=E.nextSibling&&E.nextSibling.dataset,y)var G=y.dgst;y=G,o=Error(u(419)),o.stack="",o.digest=y,Zs({value:o,source:null,stack:null}),e=Mf(t,e,i)}else if(Be||zr(t,e,i,!1),y=(i&t.childLanes)!==0,Be||y){if(y=de,y!==null&&(o=zl(y,i),o!==0&&o!==k.retryLane))throw k.retryLane=o,Xn(t,o),Cn(y,t,o),Tf;ch(E)||Cu(),e=Mf(t,e,i)}else ch(E)?(e.flags|=192,e.child=t.child,e=null):(t=k.treeContext,$t=Wn(E.nextSibling),Wt=e,Yt=!0,Mi=null,Sn=!1,t!==null&&mn(e,t),e=Nf(e,o.children),e.flags|=4096);return e}return f?(Qa(),E=o.fallback,f=e.mode,k=t.child,G=k.sibling,o=Fn(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,G!==null?E=Fn(G,E):(E=ta(E,f,i,null),E.flags|=2),E.return=e,o.return=e,o.sibling=E,e.child=o,Yo(null,o),o=e.child,E=t.child.memoizedState,E===null?E=Cf(i):(f=E.cachePool,f!==null?(k=ke._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=tm(),E={baseLanes:E.baseLanes|i,cachePool:f}),o.memoizedState=E,o.childLanes=Lf(t,y,i),e.memoizedState=zf,Yo(t.child,o)):(Ka(e),i=t.child,t=i.sibling,i=Fn(i,{mode:"visible",children:o.children}),i.return=e,i.sibling=null,t!==null&&(y=e.deletions,y===null?(e.deletions=[t],e.flags|=16):y.push(t)),e.child=i,e.memoizedState=null,i)}function Nf(t,e){return e=_u({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function _u(t,e){return t=on(22,t,null,e),t.lanes=0,t}function Mf(t,e,i){return Ks(e,t.child,null,i),t=Nf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dp(t,e,i){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),Yc(t.return,e,i)}function Of(t,e,i,o,f,h){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:f,treeForkCount:h}:(y.isBackwards=e,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=i,y.tailMode=f,y.treeForkCount=h)}function mp(t,e,i){var o=e.pendingProps,f=o.revealOrder,h=o.tail;o=o.children;var y=Ce.current,E=(y&2)!==0;if(E?(y=y&1|2,e.flags|=128):y&=1,rt(Ce,y),$e(t,e,o,i),o=Yt?S:0,!E&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dp(t,i,e);else if(t.tag===19)dp(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(i=e.child,f=null;i!==null;)t=i.alternate,t!==null&&ou(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=e.child,e.child=null):(f=i.sibling,i.sibling=null),Of(e,!1,f,i,h,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=e.child,e.child=null;f!==null;){if(t=f.alternate,t!==null&&ou(t)===null){e.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}Of(e,!0,i,null,h,o);break;case"together":Of(e,!1,null,null,void 0,o);break;default:e.memoizedState=null}return e.child}function sa(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Ja|=e.lanes,(i&e.childLanes)===0)if(t!==null){if(zr(t,e,i,!1),(i&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(u(153));if(e.child!==null){for(t=e.child,i=Fn(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=Fn(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function kf(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&$l(t)))}function l_(t,e,i){switch(e.tag){case 3:Jt(e,e.stateNode.containerInfo),Ga(e,ke,t.memoizedState.cache),ea();break;case 27:case 5:xe(e);break;case 4:Jt(e,e.stateNode.containerInfo);break;case 10:Ga(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,af(e),null;break;case 13:var o=e.memoizedState;if(o!==null)return o.dehydrated!==null?(Ka(e),e.flags|=128,null):(i&e.child.childLanes)!==0?hp(t,e,i):(Ka(e),t=sa(t,e,i),t!==null?t.sibling:null);Ka(e);break;case 19:var f=(t.flags&128)!==0;if(o=(i&e.childLanes)!==0,o||(zr(t,e,i,!1),o=(i&e.childLanes)!==0),f){if(o)return mp(t,e,i);e.flags|=128}if(f=e.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Ce,Ce.current),o)break;return null;case 22:return e.lanes=0,rp(t,e,i,e.pendingProps);case 24:Ga(e,ke,t.memoizedState.cache)}return sa(t,e,i)}function pp(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps)Be=!0;else{if(!kf(t,i)&&(e.flags&128)===0)return Be=!1,l_(t,e,i);Be=(t.flags&131072)!==0}else Be=!1,Yt&&(e.flags&1048576)!==0&&Pt(e,S,e.index);switch(e.lanes=0,e.tag){case 16:t:{var o=e.pendingProps;if(t=Ys(e.elementType),e.type=t,typeof t=="function")Er(t)?(o=Xs(t,o),e.tag=1,e=cp(null,e,t,o,i)):(e.tag=0,e=Af(null,e,t,o,i));else{if(t!=null){var f=t.$$typeof;if(f===ct){e.tag=11,e=ip(null,e,t,o,i);break t}else if(f===F){e.tag=14,e=ap(null,e,t,o,i);break t}}throw e=Ct(t)||t,Error(u(306,e,""))}}return e;case 0:return Af(t,e,e.type,e.pendingProps,i);case 1:return o=e.type,f=Xs(o,e.pendingProps),cp(t,e,o,f,i);case 3:t:{if(Jt(e,e.stateNode.containerInfo),t===null)throw Error(u(387));o=e.pendingProps;var h=e.memoizedState;f=h.element,Wc(t,e),Po(e,o,null,i);var y=e.memoizedState;if(o=y.cache,Ga(e,ke,o),o!==h.cache&&Ic(e,[ke],i,!0),Ho(),o=y.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:y.cache},e.updateQueue.baseState=h,e.memoizedState=h,e.flags&256){e=fp(t,e,o,i);break t}else if(o!==f){f=r(Error(u(424)),e),Zs(f),e=fp(t,e,o,i);break t}else for(t=e.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,$t=Wn(t.firstChild),Wt=e,Yt=!0,Mi=null,Sn=!0,i=rm(e,null,o,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ea(),o===f){e=sa(t,e,i);break t}$e(t,e,o,i)}e=e.child}return e;case 26:return vu(t,e),t===null?(i=Ag(e.type,null,e.pendingProps,null))?e.memoizedState=i:Yt||(i=e.type,t=e.pendingProps,o=Bu(dt.current).createElement(i),o[Me]=e,o[Ve]=t,tn(o,i,t),Oe(o),e.stateNode=o):e.memoizedState=Ag(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return xe(e),t===null&&Yt&&(o=e.stateNode=Sg(e.type,e.pendingProps,dt.current),Wt=e,Sn=!0,f=$t,ns(e.type)?(hh=f,$t=Wn(o.firstChild)):$t=f),$e(t,e,e.pendingProps.children,i),vu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Yt&&((f=o=$t)&&(o=U_(o,e.type,e.pendingProps,Sn),o!==null?(e.stateNode=o,Wt=e,$t=Wn(o.firstChild),Sn=!1,f=!0):f=!1),f||Oi(e)),xe(e),f=e.type,h=e.pendingProps,y=t!==null?t.memoizedProps:null,o=h.children,oh(f,h)?o=null:y!==null&&oh(f,y)&&(e.flags|=32),e.memoizedState!==null&&(f=rf(t,e,$v,null,null,i),rl._currentValue=f),vu(t,e),$e(t,e,o,i),e.child;case 6:return t===null&&Yt&&((t=i=$t)&&(i=H_(i,e.pendingProps,Sn),i!==null?(e.stateNode=i,Wt=e,$t=null,t=!0):t=!1),t||Oi(e)),null;case 13:return hp(t,e,i);case 4:return Jt(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=Ks(e,null,o,i):$e(t,e,o,i),e.child;case 11:return ip(t,e,e.type,e.pendingProps,i);case 7:return $e(t,e,e.pendingProps,i),e.child;case 8:return $e(t,e,e.pendingProps.children,i),e.child;case 12:return $e(t,e,e.pendingProps.children,i),e.child;case 10:return o=e.pendingProps,Ga(e,e.type,o.value),$e(t,e,o.children,i),e.child;case 9:return f=e.type._context,o=e.pendingProps.children,Gs(e),f=We(f),o=o(f),e.flags|=1,$e(t,e,o,i),e.child;case 14:return ap(t,e,e.type,e.pendingProps,i);case 15:return sp(t,e,e.type,e.pendingProps,i);case 19:return mp(t,e,i);case 31:return o_(t,e,i);case 22:return rp(t,e,i,e.pendingProps);case 24:return Gs(e),o=We(ke),t===null?(f=Xc(),f===null&&(f=de,h=Kc(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=i),f=h),e.memoizedState={parent:o,cache:f},Jc(e),Ga(e,ke,f)):((t.lanes&i)!==0&&(Wc(t,e),Po(e,null,null,i),Ho()),f=t.memoizedState,h=e.memoizedState,f.parent!==o?(f={parent:o,cache:o},e.memoizedState=f,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=f),Ga(e,ke,o)):(o=h.cache,Ga(e,ke,o),o!==f.cache&&Ic(e,[ke],i,!0))),$e(t,e,e.pendingProps.children,i),e.child;case 29:throw e.pendingProps}throw Error(u(156,e.tag))}function ra(t){t.flags|=4}function Rf(t,e,i,o,f){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(qp())t.flags|=8192;else throw Is=iu,Fc}else t.flags&=-16777217}function gp(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Mg(e))if(qp())t.flags|=8192;else throw Is=iu,Fc}function bu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?El():536870912,t.lanes|=e,Hr|=e)}function Io(t,e){if(!Yt)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(e)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=i,e}function u_(t,e,i){var o=e.pendingProps;switch(Te(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(e),null;case 1:return ge(e),null;case 3:return i=e.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),e.memoizedState.cache!==o&&(e.flags|=2048),na(ke),Rt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ci(e)?ra(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,ko())),ge(e),null;case 26:var f=e.type,h=e.memoizedState;return t===null?(ra(e),h!==null?(ge(e),gp(e,h)):(ge(e),Rf(e,f,null,o,i))):h?h!==t.memoizedState?(ra(e),ge(e),gp(e,h)):(ge(e),e.flags&=-16777217):(t=t.memoizedProps,t!==o&&ra(e),ge(e),Rf(e,f,t,o,i)),null;case 27:if(fn(e),i=dt.current,f=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==o&&ra(e);else{if(!o){if(e.stateNode===null)throw Error(u(166));return ge(e),null}t=lt.current,ci(e)?Oo(e):(t=Sg(f,o,i),e.stateNode=t,ra(e))}return ge(e),null;case 5:if(fn(e),f=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==o&&ra(e);else{if(!o){if(e.stateNode===null)throw Error(u(166));return ge(e),null}if(h=lt.current,ci(e))Oo(e);else{var y=Bu(dt.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?y.createElement(f,{is:o.is}):y.createElement(f)}}h[Me]=e,h[Ve]=o;t:for(y=e.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break t;for(;y.sibling===null;){if(y.return===null||y.return===e)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}e.stateNode=h;t:switch(tn(h,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&ra(e)}}return ge(e),Rf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,i),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==o&&ra(e);else{if(typeof o!="string"&&e.stateNode===null)throw Error(u(166));if(t=dt.current,ci(e)){if(t=e.stateNode,i=e.memoizedProps,o=null,f=Wt,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[Me]=e,t=!!(t.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||hg(t.nodeValue,i)),t||Oi(e,!0)}else t=Bu(t).createTextNode(o),t[Me]=e,e.stateNode=t}return ge(e),null;case 31:if(i=e.memoizedState,t===null||t.memoizedState!==null){if(o=ci(e),i!==null){if(t===null){if(!o)throw Error(u(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(557));t[Me]=e}else ea(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ge(e),t=!1}else i=ko(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return e.flags&256?(Un(e),e):(Un(e),null);if((e.flags&128)!==0)throw Error(u(558))}return ge(e),null;case 13:if(o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=ci(e),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(u(318));if(f=e.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(u(317));f[Me]=e}else ea(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ge(e),f=!1}else f=ko(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return e.flags&256?(Un(e),e):(Un(e),null)}return Un(e),(e.flags&128)!==0?(e.lanes=i,e):(i=o!==null,t=t!==null&&t.memoizedState!==null,i&&(o=e.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==f&&(o.flags|=2048)),i!==t&&i&&(e.child.flags|=8192),bu(e,e.updateQueue),ge(e),null);case 4:return Rt(),t===null&&nh(e.stateNode.containerInfo),ge(e),null;case 10:return na(e.type),ge(e),null;case 19:if(H(Ce),o=e.memoizedState,o===null)return ge(e),null;if(f=(e.flags&128)!==0,h=o.rendering,h===null)if(f)Io(o,!1);else{if(ze!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(h=ou(t),h!==null){for(e.flags|=128,Io(o,!1),t=h.updateQueue,e.updateQueue=t,bu(e,t),e.subtreeFlags=0,t=i,i=e.child;i!==null;)Lo(i,t),i=i.sibling;return rt(Ce,Ce.current&1|2),Yt&&Et(e,o.treeForkCount),e.child}t=t.sibling}o.tail!==null&&Lt()>Tu&&(e.flags|=128,f=!0,Io(o,!1),e.lanes=4194304)}else{if(!f)if(t=ou(h),t!==null){if(e.flags|=128,f=!0,t=t.updateQueue,e.updateQueue=t,bu(e,t),Io(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!Yt)return ge(e),null}else 2*Lt()-o.renderingStartTime>Tu&&i!==536870912&&(e.flags|=128,f=!0,Io(o,!1),e.lanes=4194304);o.isBackwards?(h.sibling=e.child,e.child=h):(t=o.last,t!==null?t.sibling=h:e.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Lt(),t.sibling=null,i=Ce.current,rt(Ce,f?i&1|2:i&1),Yt&&Et(e,o.treeForkCount),t):(ge(e),null);case 22:case 23:return Un(e),nf(),o=e.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(e.flags|=8192):o&&(e.flags|=8192),o?(i&536870912)!==0&&(e.flags&128)===0&&(ge(e),e.subtreeFlags&6&&(e.flags|=8192)):ge(e),i=e.updateQueue,i!==null&&bu(e,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),o=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),o!==i&&(e.flags|=2048),t!==null&&H(Vs),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),na(ke),ge(e),null;case 25:return null;case 30:return null}throw Error(u(156,e.tag))}function c_(t,e){switch(Te(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return na(ke),Rt(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return fn(e),null;case 31:if(e.memoizedState!==null){if(Un(e),e.alternate===null)throw Error(u(340));ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Un(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(u(340));ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return H(Ce),null;case 4:return Rt(),null;case 10:return na(e.type),null;case 22:case 23:return Un(e),nf(),t!==null&&H(Vs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return na(ke),null;case 25:return null;default:return null}}function yp(t,e){switch(Te(e),e.tag){case 3:na(ke),Rt();break;case 26:case 27:case 5:fn(e);break;case 4:Rt();break;case 31:e.memoizedState!==null&&Un(e);break;case 13:Un(e);break;case 19:H(Ce);break;case 10:na(e.type);break;case 22:case 23:Un(e),nf(),t!==null&&H(Vs);break;case 24:na(ke)}}function Ko(t,e){try{var i=e.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var f=o.next;i=f;do{if((i.tag&t)===t){o=void 0;var h=i.create,y=i.inst;o=h(),y.destroy=o}i=i.next}while(i!==f)}}catch(E){re(e,e.return,E)}}function Xa(t,e,i){try{var o=e.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var h=f.next;o=h;do{if((o.tag&t)===t){var y=o.inst,E=y.destroy;if(E!==void 0){y.destroy=void 0,f=e;var k=i,G=E;try{G()}catch(J){re(f,k,J)}}}o=o.next}while(o!==h)}}catch(J){re(e,e.return,J)}}function vp(t){var e=t.updateQueue;if(e!==null){var i=t.stateNode;try{lm(e,i)}catch(o){re(t,t.return,o)}}}function _p(t,e,i){i.props=Xs(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(o){re(t,e,o)}}function Qo(t,e){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof i=="function"?t.refCleanup=i(o):i.current=o}}catch(f){re(t,e,f)}}function Ri(t,e){var i=t.ref,o=t.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(f){re(t,e,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){re(t,e,f)}else i.current=null}function bp(t){var e=t.type,i=t.memoizedProps,o=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break t;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(f){re(t,t.return,f)}}function Bf(t,e,i){try{var o=t.stateNode;O_(o,t.type,i,e),o[Ve]=e}catch(f){re(t,t.return,f)}}function xp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ns(t.type)||t.tag===4}function jf(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||xp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ns(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,e,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,e):(e=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,e.appendChild(t),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=_n));else if(o!==4&&(o===27&&ns(t.type)&&(i=t.stateNode,e=null),t=t.child,t!==null))for(Df(t,e,i),t=t.sibling;t!==null;)Df(t,e,i),t=t.sibling}function xu(t,e,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(o!==4&&(o===27&&ns(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(xu(t,e,i),t=t.sibling;t!==null;)xu(t,e,i),t=t.sibling}function wp(t){var e=t.stateNode,i=t.memoizedProps;try{for(var o=t.type,f=e.attributes;f.length;)e.removeAttributeNode(f[0]);tn(e,o,i),e[Me]=t,e[Ve]=i}catch(h){re(t,t.return,h)}}var oa=!1,je=!1,Uf=!1,Sp=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function f_(t,e){if(t=t.containerInfo,sh=qu,t=ks(t),Ai(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var f=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break t}var y=0,E=-1,k=-1,G=0,J=0,it=t,Y=null;e:for(;;){for(var Q;it!==i||f!==0&&it.nodeType!==3||(E=y+f),it!==h||o!==0&&it.nodeType!==3||(k=y+o),it.nodeType===3&&(y+=it.nodeValue.length),(Q=it.firstChild)!==null;)Y=it,it=Q;for(;;){if(it===t)break e;if(Y===i&&++G===f&&(E=y),Y===h&&++J===o&&(k=y),(Q=it.nextSibling)!==null)break;it=Y,Y=it.parentNode}it=Q}i=E===-1||k===-1?null:{start:E,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(rh={focusedElem:t,selectionRange:i},qu=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){switch(e=Ke,h=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)f=t[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,i=e,f=h.memoizedProps,h=h.memoizedState,o=i.stateNode;try{var xt=Xs(i.type,f);t=o.getSnapshotBeforeUpdate(xt,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(Mt){re(i,i.return,Mt)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,i=t.nodeType,i===9)uh(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":uh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(u(163))}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function Ep(t,e,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:ua(t,i),o&4&&Ko(5,i);break;case 1:if(ua(t,i),o&4)if(t=i.stateNode,e===null)try{t.componentDidMount()}catch(y){re(i,i.return,y)}else{var f=Xs(i.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(f,e,t.__reactInternalSnapshotBeforeUpdate)}catch(y){re(i,i.return,y)}}o&64&&vp(i),o&512&&Qo(i,i.return);break;case 3:if(ua(t,i),o&64&&(t=i.updateQueue,t!==null)){if(e=null,i.child!==null)switch(i.child.tag){case 27:case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}try{lm(t,e)}catch(y){re(i,i.return,y)}}break;case 27:e===null&&o&4&&wp(i);case 26:case 5:ua(t,i),e===null&&o&4&&bp(i),o&512&&Qo(i,i.return);break;case 12:ua(t,i);break;case 31:ua(t,i),o&4&&zp(t,i);break;case 13:ua(t,i),o&4&&Cp(t,i),o&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=b_.bind(null,i),P_(t,i))));break;case 22:if(o=i.memoizedState!==null||oa,!o){e=e!==null&&e.memoizedState!==null||je,f=oa;var h=je;oa=o,(je=e)&&!h?ca(t,i,(i.subtreeFlags&8772)!==0):ua(t,i),oa=f,je=h}break;case 30:break;default:ua(t,i)}}function Tp(t){var e=t.alternate;e!==null&&(t.alternate=null,Tp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&co(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _e=null,En=!1;function la(t,e,i){for(i=i.child;i!==null;)Ap(t,e,i),i=i.sibling}function Ap(t,e,i){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(sn,i)}catch{}switch(i.tag){case 26:je||Ri(i,e),la(t,e,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:je||Ri(i,e);var o=_e,f=En;ns(i.type)&&(_e=i.stateNode,En=!1),la(t,e,i),il(i.stateNode),_e=o,En=f;break;case 5:je||Ri(i,e);case 6:if(o=_e,f=En,_e=null,la(t,e,i),_e=o,En=f,_e!==null)if(En)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(i.stateNode)}catch(h){re(i,e,h)}else try{_e.removeChild(i.stateNode)}catch(h){re(i,e,h)}break;case 18:_e!==null&&(En?(t=_e,vg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Kr(t)):vg(_e,i.stateNode));break;case 4:o=_e,f=En,_e=i.stateNode.containerInfo,En=!0,la(t,e,i),_e=o,En=f;break;case 0:case 11:case 14:case 15:Xa(2,i,e),je||Xa(4,i,e),la(t,e,i);break;case 1:je||(Ri(i,e),o=i.stateNode,typeof o.componentWillUnmount=="function"&&_p(i,e,o)),la(t,e,i);break;case 21:la(t,e,i);break;case 22:je=(o=je)||i.memoizedState!==null,la(t,e,i),je=o;break;default:la(t,e,i)}}function zp(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Kr(t)}catch(i){re(e,e.return,i)}}}function Cp(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kr(t)}catch(i){re(e,e.return,i)}}function h_(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Sp),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Sp),e;default:throw Error(u(435,t.tag))}}function wu(t,e){var i=h_(t);e.forEach(function(o){if(!i.has(o)){i.add(o);var f=x_.bind(null,t,o);o.then(f,f)}})}function Tn(t,e){var i=e.deletions;if(i!==null)for(var o=0;o<i.length;o++){var f=i[o],h=t,y=e,E=y;t:for(;E!==null;){switch(E.tag){case 27:if(ns(E.type)){_e=E.stateNode,En=!1;break t}break;case 5:_e=E.stateNode,En=!1;break t;case 3:case 4:_e=E.stateNode.containerInfo,En=!0;break t}E=E.return}if(_e===null)throw Error(u(160));Ap(h,y,f),_e=null,En=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Lp(e,t),e=e.sibling}var hi=null;function Lp(t,e){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(e,t),An(t),o&4&&(Xa(3,t,t.return),Ko(3,t),Xa(5,t,t.return));break;case 1:Tn(e,t),An(t),o&512&&(je||i===null||Ri(i,i.return)),o&64&&oa&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var f=hi;if(Tn(e,t),An(t),o&512&&(je||i===null||Ri(i,i.return)),o&4){var h=i!==null?i.memoizedState:null;if(o=t.memoizedState,i===null)if(o===null)if(t.stateNode===null){t:{o=t.type,i=t.memoizedProps,f=f.ownerDocument||f;e:switch(o){case"title":h=f.getElementsByTagName("title")[0],(!h||h[ys]||h[Me]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(o),f.head.insertBefore(h,f.querySelector("head > title"))),tn(h,o,i),h[Me]=t,Oe(h),o=h;break t;case"link":var y=Lg("link","href",f).get(o+(i.href||""));if(y){for(var E=0;E<y.length;E++)if(h=y[E],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(E,1);break e}}h=f.createElement(o),tn(h,o,i),f.head.appendChild(h);break;case"meta":if(y=Lg("meta","content",f).get(o+(i.content||""))){for(E=0;E<y.length;E++)if(h=y[E],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(E,1);break e}}h=f.createElement(o),tn(h,o,i),f.head.appendChild(h);break;default:throw Error(u(468,o))}h[Me]=t,Oe(h),o=h}t.stateNode=o}else Ng(f,t.type,t.stateNode);else t.stateNode=Cg(f,o,t.memoizedProps);else h!==o?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,o===null?Ng(f,t.type,t.stateNode):Cg(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Bf(t,t.memoizedProps,i.memoizedProps)}break;case 27:Tn(e,t),An(t),o&512&&(je||i===null||Ri(i,i.return)),i!==null&&o&4&&Bf(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Tn(e,t),An(t),o&512&&(je||i===null||Ri(i,i.return)),t.flags&32){f=t.stateNode;try{Gn(f,"")}catch(xt){re(t,t.return,xt)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,Bf(t,f,i!==null?i.memoizedProps:f)),o&1024&&(Uf=!0);break;case 6:if(Tn(e,t),An(t),o&4){if(t.stateNode===null)throw Error(u(162));o=t.memoizedProps,i=t.stateNode;try{i.nodeValue=o}catch(xt){re(t,t.return,xt)}}break;case 3:if(Uu=null,f=hi,hi=ju(e.containerInfo),Tn(e,t),hi=f,An(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Kr(e.containerInfo)}catch(xt){re(t,t.return,xt)}Uf&&(Uf=!1,Np(t));break;case 4:o=hi,hi=ju(t.stateNode.containerInfo),Tn(e,t),An(t),hi=o;break;case 12:Tn(e,t),An(t);break;case 31:Tn(e,t),An(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,wu(t,o)));break;case 13:Tn(e,t),An(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Eu=Lt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,wu(t,o)));break;case 22:f=t.memoizedState!==null;var k=i!==null&&i.memoizedState!==null,G=oa,J=je;if(oa=G||f,je=J||k,Tn(e,t),je=J,oa=G,An(t),o&8192)t:for(e=t.stateNode,e._visibility=f?e._visibility&-2:e._visibility|1,f&&(i===null||k||oa||je||Fs(t)),i=null,e=t;;){if(e.tag===5||e.tag===26){if(i===null){k=i=e;try{if(h=k.stateNode,f)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=k.stateNode;var it=k.memoizedProps.style,Y=it!=null&&it.hasOwnProperty("display")?it.display:null;E.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(xt){re(k,k.return,xt)}}}else if(e.tag===6){if(i===null){k=e;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(xt){re(k,k.return,xt)}}}else if(e.tag===18){if(i===null){k=e;try{var Q=k.stateNode;f?_g(Q,!0):_g(k.stateNode,!1)}catch(xt){re(k,k.return,xt)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;i===e&&(i=null),e=e.return}i===e&&(i=null),e.sibling.return=e.return,e=e.sibling}o&4&&(o=t.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,wu(t,i))));break;case 19:Tn(e,t),An(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,wu(t,o)));break;case 30:break;case 21:break;default:Tn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{for(var i,o=t.return;o!==null;){if(xp(o)){i=o;break}o=o.return}if(i==null)throw Error(u(160));switch(i.tag){case 27:var f=i.stateNode,h=jf(t);xu(t,h,f);break;case 5:var y=i.stateNode;i.flags&32&&(Gn(y,""),i.flags&=-33);var E=jf(t);xu(t,E,y);break;case 3:case 4:var k=i.stateNode.containerInfo,G=jf(t);Df(t,G,k);break;default:throw Error(u(161))}}catch(J){re(t,t.return,J)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Np(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Np(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ua(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Ep(t,e.alternate,e),e=e.sibling}function Fs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Xa(4,e,e.return),Fs(e);break;case 1:Ri(e,e.return);var i=e.stateNode;typeof i.componentWillUnmount=="function"&&_p(e,e.return,i),Fs(e);break;case 27:il(e.stateNode);case 26:case 5:Ri(e,e.return),Fs(e);break;case 22:e.memoizedState===null&&Fs(e);break;case 30:Fs(e);break;default:Fs(e)}t=t.sibling}}function ca(t,e,i){for(i=i&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var o=e.alternate,f=t,h=e,y=h.flags;switch(h.tag){case 0:case 11:case 15:ca(f,h,i),Ko(4,h);break;case 1:if(ca(f,h,i),o=h,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){re(o,o.return,G)}if(o=h,f=o.updateQueue,f!==null){var E=o.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)om(k[f],E)}catch(G){re(o,o.return,G)}}i&&y&64&&vp(h),Qo(h,h.return);break;case 27:wp(h);case 26:case 5:ca(f,h,i),i&&o===null&&y&4&&bp(h),Qo(h,h.return);break;case 12:ca(f,h,i);break;case 31:ca(f,h,i),i&&y&4&&zp(f,h);break;case 13:ca(f,h,i),i&&y&4&&Cp(f,h);break;case 22:h.memoizedState===null&&ca(f,h,i),Qo(h,h.return);break;case 30:break;default:ca(f,h,i)}e=e.sibling}}function Hf(t,e){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Ro(i))}function Pf(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ro(t))}function di(t,e,i,o){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mp(t,e,i,o),e=e.sibling}function Mp(t,e,i,o){var f=e.flags;switch(e.tag){case 0:case 11:case 15:di(t,e,i,o),f&2048&&Ko(9,e);break;case 1:di(t,e,i,o);break;case 3:di(t,e,i,o),f&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ro(t)));break;case 12:if(f&2048){di(t,e,i,o),t=e.stateNode;try{var h=e.memoizedProps,y=h.id,E=h.onPostCommit;typeof E=="function"&&E(y,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){re(e,e.return,k)}}else di(t,e,i,o);break;case 31:di(t,e,i,o);break;case 13:di(t,e,i,o);break;case 23:break;case 22:h=e.stateNode,y=e.alternate,e.memoizedState!==null?h._visibility&2?di(t,e,i,o):Xo(t,e):h._visibility&2?di(t,e,i,o):(h._visibility|=2,jr(t,e,i,o,(e.subtreeFlags&10256)!==0||!1)),f&2048&&Hf(y,e);break;case 24:di(t,e,i,o),f&2048&&Pf(e.alternate,e);break;default:di(t,e,i,o)}}function jr(t,e,i,o,f){for(f=f&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var h=t,y=e,E=i,k=o,G=y.flags;switch(y.tag){case 0:case 11:case 15:jr(h,y,E,k,f),Ko(8,y);break;case 23:break;case 22:var J=y.stateNode;y.memoizedState!==null?J._visibility&2?jr(h,y,E,k,f):Xo(h,y):(J._visibility|=2,jr(h,y,E,k,f)),f&&G&2048&&Hf(y.alternate,y);break;case 24:jr(h,y,E,k,f),f&&G&2048&&Pf(y.alternate,y);break;default:jr(h,y,E,k,f)}e=e.sibling}}function Xo(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var i=t,o=e,f=o.flags;switch(o.tag){case 22:Xo(i,o),f&2048&&Hf(o.alternate,o);break;case 24:Xo(i,o),f&2048&&Pf(o.alternate,o);break;default:Xo(i,o)}e=e.sibling}}var Fo=8192;function Dr(t,e,i){if(t.subtreeFlags&Fo)for(t=t.child;t!==null;)Op(t,e,i),t=t.sibling}function Op(t,e,i){switch(t.tag){case 26:Dr(t,e,i),t.flags&Fo&&t.memoizedState!==null&&W_(i,hi,t.memoizedState,t.memoizedProps);break;case 5:Dr(t,e,i);break;case 3:case 4:var o=hi;hi=ju(t.stateNode.containerInfo),Dr(t,e,i),hi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Fo,Fo=16777216,Dr(t,e,i),Fo=o):Dr(t,e,i));break;default:Dr(t,e,i)}}function kp(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Jo(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var i=0;i<e.length;i++){var o=e[i];Ke=o,Bp(o,t)}kp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rp(t),t=t.sibling}function Rp(t){switch(t.tag){case 0:case 11:case 15:Jo(t),t.flags&2048&&Xa(9,t,t.return);break;case 3:Jo(t);break;case 12:Jo(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Su(t)):Jo(t);break;default:Jo(t)}}function Su(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var i=0;i<e.length;i++){var o=e[i];Ke=o,Bp(o,t)}kp(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Xa(8,e,e.return),Su(e);break;case 22:i=e.stateNode,i._visibility&2&&(i._visibility&=-3,Su(e));break;default:Su(e)}t=t.sibling}}function Bp(t,e){for(;Ke!==null;){var i=Ke;switch(i.tag){case 0:case 11:case 15:Xa(8,i,e);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ro(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Ke=o;else t:for(i=t;Ke!==null;){o=Ke;var f=o.sibling,h=o.return;if(Tp(o),o===i){Ke=null;break t}if(f!==null){f.return=h,Ke=f;break t}Ke=h}}}var d_={getCacheForType:function(t){var e=We(ke),i=e.data.get(t);return i===void 0&&(i=t(),e.data.set(t,i)),i},cacheSignal:function(){return We(ke).controller.signal}},m_=typeof WeakMap=="function"?WeakMap:Map,ie=0,de=null,It=null,Xt=0,se=0,Hn=null,Fa=!1,Ur=!1,Zf=!1,fa=0,ze=0,Ja=0,Js=0,qf=0,Pn=0,Hr=0,Wo=null,zn=null,Gf=!1,Eu=0,jp=0,Tu=1/0,Au=null,Wa=null,qe=0,$a=null,Pr=null,ha=0,Vf=0,Yf=null,Dp=null,$o=0,If=null;function Zn(){return(ie&2)!==0&&Xt!==0?Xt&-Xt:O.T!==null?Wf():lo()}function Up(){if(Pn===0)if((Xt&536870912)===0||Yt){var t=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),Pn=t}else Pn=536870912;return t=Dn.current,t!==null&&(t.flags|=32),Pn}function Cn(t,e,i){(t===de&&(se===2||se===9)||t.cancelPendingCommit!==null)&&(Zr(t,0),ts(t,Xt,Pn,!1)),Yi(t,i),((ie&2)===0||t!==de)&&(t===de&&((ie&2)===0&&(Js|=i),ze===4&&ts(t,Xt,Pn,!1)),Bi(t))}function Hp(t,e,i){if((ie&6)!==0)throw Error(u(327));var o=!i&&(e&127)===0&&(e&t.expiredLanes)===0||Vi(t,e),f=o?y_(t,e):Qf(t,e,!0),h=o;do{if(f===0){Ur&&!o&&ts(t,e,0,!1);break}else{if(i=t.current.alternate,h&&!p_(i)){f=Qf(t,e,!1),h=!1;continue}if(f===2){if(h=e,t.errorRecoveryDisabledLanes&h)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){e=y;t:{var E=t;f=Wo;var k=E.current.memoizedState.isDehydrated;if(k&&(Zr(E,y).flags|=256),y=Qf(E,y,!1),y!==2){if(Zf&&!k){E.errorRecoveryDisabledLanes|=h,Js|=h,f=4;break t}h=zn,zn=f,h!==null&&(zn===null?zn=h:zn.push.apply(zn,h))}f=y}if(h=!1,f!==2)continue}}if(f===1){Zr(t,0),ts(t,e,0,!0);break}t:{switch(o=t,h=f,h){case 0:case 1:throw Error(u(345));case 4:if((e&4194048)!==e)break;case 6:ts(o,e,Pn,!Fa);break t;case 2:zn=null;break;case 3:case 5:break;default:throw Error(u(329))}if((e&62914560)===e&&(f=Eu+300-Lt(),10<f)){if(ts(o,e,Pn,!Fa),_i(o,0,!0)!==0)break t;ha=e,o.timeoutHandle=gg(Pp.bind(null,o,i,zn,Au,Gf,e,Pn,Js,Hr,Fa,h,"Throttled",-0,0),f);break t}Pp(o,i,zn,Au,Gf,e,Pn,Js,Hr,Fa,h,null,-0,0)}}break}while(!0);Bi(t)}function Pp(t,e,i,o,f,h,y,E,k,G,J,it,Y,Q){if(t.timeoutHandle=-1,it=e.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_n},Op(e,h,it);var xt=(h&62914560)===h?Eu-Lt():(h&4194048)===h?jp-Lt():0;if(xt=$_(it,xt),xt!==null){ha=h,t.cancelPendingCommit=xt(Qp.bind(null,t,e,h,i,o,f,y,E,k,J,it,null,Y,Q)),ts(t,h,y,!G);return}}Qp(t,e,h,i,o,f,y,E,k)}function p_(t){for(var e=t;;){var i=e.tag;if((i===0||i===11||i===15)&&e.flags&16384&&(i=e.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var f=i[o],h=f.getSnapshot;f=f.value;try{if(!Ye(h(),f))return!1}catch{return!1}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e,i,o){e&=~qf,e&=~Js,t.suspendedLanes|=e,t.pingedLanes&=~e,o&&(t.warmLanes|=e),o=t.expirationTimes;for(var f=e;0<f;){var h=31-Fe(f),y=1<<h;o[h]=-1,f&=~y}i!==0&&Tl(t,i,e)}function zu(){return(ie&6)===0?(tl(0),!1):!0}function Kf(){if(It!==null){if(se===0)var t=It.return;else t=It,fi=ki=null,uf(t),Mr=null,jo=0,t=It;for(;t!==null;)yp(t.alternate,t),t=t.return;It=null}}function Zr(t,e){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,B_(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),ha=0,Kf(),de=t,It=i=Fn(t.current,null),Xt=e,se=0,Hn=null,Fa=!1,Ur=Vi(t,e),Zf=!1,Hr=Pn=qf=Js=Ja=ze=0,zn=Wo=null,Gf=!1,(e&8)!==0&&(e|=e&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=e;0<o;){var f=31-Fe(o),h=1<<f;e|=t[f],o&=~h}return fa=e,Us(),i}function Zp(t,e){Ut=null,O.H=Vo,e===Nr||e===nu?(e=im(),se=3):e===Fc?(e=im(),se=4):se=e===Tf?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Hn=e,It===null&&(ze=1,gu(t,r(e,t.current)))}function qp(){var t=Dn.current;return t===null?!0:(Xt&4194048)===Xt?Jn===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?t===Jn:!1}function Gp(){var t=O.H;return O.H=Vo,t===null?Vo:t}function Vp(){var t=O.A;return O.A=d_,t}function Cu(){ze=4,Fa||(Xt&4194048)!==Xt&&Dn.current!==null||(Ur=!0),(Ja&134217727)===0&&(Js&134217727)===0||de===null||ts(de,Xt,Pn,!1)}function Qf(t,e,i){var o=ie;ie|=2;var f=Gp(),h=Vp();(de!==t||Xt!==e)&&(Au=null,Zr(t,e)),e=!1;var y=ze;t:do try{if(se!==0&&It!==null){var E=It,k=Hn;switch(se){case 8:Kf(),y=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(e=!0);var G=se;if(se=0,Hn=null,qr(t,E,k,G),i&&Ur){y=0;break t}break;default:G=se,se=0,Hn=null,qr(t,E,k,G)}}g_(),y=ze;break}catch(J){Zp(t,J)}while(!0);return e&&t.shellSuspendCounter++,fi=ki=null,ie=o,O.H=f,O.A=h,It===null&&(de=null,Xt=0,Us()),y}function g_(){for(;It!==null;)Yp(It)}function y_(t,e){var i=ie;ie|=2;var o=Gp(),f=Vp();de!==t||Xt!==e?(Au=null,Tu=Lt()+500,Zr(t,e)):Ur=Vi(t,e);t:do try{if(se!==0&&It!==null){e=It;var h=Hn;e:switch(se){case 1:se=0,Hn=null,qr(t,e,h,1);break;case 2:case 9:if(em(h)){se=0,Hn=null,Ip(e);break}e=function(){se!==2&&se!==9||de!==t||(se=7),Bi(t)},h.then(e,e);break t;case 3:se=7;break t;case 4:se=5;break t;case 7:em(h)?(se=0,Hn=null,Ip(e)):(se=0,Hn=null,qr(t,e,h,7));break;case 5:var y=null;switch(It.tag){case 26:y=It.memoizedState;case 5:case 27:var E=It;if(y?Mg(y):E.stateNode.complete){se=0,Hn=null;var k=E.sibling;if(k!==null)It=k;else{var G=E.return;G!==null?(It=G,Lu(G)):It=null}break e}}se=0,Hn=null,qr(t,e,h,5);break;case 6:se=0,Hn=null,qr(t,e,h,6);break;case 8:Kf(),ze=6;break t;default:throw Error(u(462))}}v_();break}catch(J){Zp(t,J)}while(!0);return fi=ki=null,O.H=o,O.A=f,ie=i,It!==null?0:(de=null,Xt=0,Us(),ze)}function v_(){for(;It!==null&&!qt();)Yp(It)}function Yp(t){var e=pp(t.alternate,t,fa);t.memoizedProps=t.pendingProps,e===null?Lu(t):It=e}function Ip(t){var e=t,i=e.alternate;switch(e.tag){case 15:case 0:e=up(i,e,e.pendingProps,e.type,void 0,Xt);break;case 11:e=up(i,e,e.pendingProps,e.type.render,e.ref,Xt);break;case 5:uf(e);default:yp(i,e),e=It=Lo(e,fa),e=pp(i,e,fa)}t.memoizedProps=t.pendingProps,e===null?Lu(t):It=e}function qr(t,e,i,o){fi=ki=null,uf(e),Mr=null,jo=0;var f=e.return;try{if(r_(t,f,e,i,Xt)){ze=1,gu(t,r(i,t.current)),It=null;return}}catch(h){if(f!==null)throw It=f,h;ze=1,gu(t,r(i,t.current)),It=null;return}e.flags&32768?(Yt||o===1?t=!0:Ur||(Xt&536870912)!==0?t=!1:(Fa=t=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Kp(e,t)):Lu(e)}function Lu(t){var e=t;do{if((e.flags&32768)!==0){Kp(e,Fa);return}t=e.return;var i=u_(e.alternate,e,fa);if(i!==null){It=i;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);ze===0&&(ze=5)}function Kp(t,e){do{var i=c_(t.alternate,t);if(i!==null){i.flags&=32767,It=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!e&&(t=t.sibling,t!==null)){It=t;return}It=t=i}while(t!==null);ze=6,It=null}function Qp(t,e,i,o,f,h,y,E,k){t.cancelPendingCommit=null;do Nu();while(qe!==0);if((ie&6)!==0)throw Error(u(327));if(e!==null){if(e===t.current)throw Error(u(177));if(h=e.lanes|e.childLanes,h|=Sr,Lc(t,i,h,y,E,k),t===de&&(It=de=null,Xt=0),Pr=e,$a=t,ha=i,Vf=h,Yf=f,Dp=o,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,w_(Se,function(){return $p(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||o){o=O.T,O.T=null,f=I.p,I.p=2,y=ie,ie|=4;try{f_(t,e,i)}finally{ie=y,I.p=f,O.T=o}}qe=1,Xp(),Fp(),Jp()}}function Xp(){if(qe===1){qe=0;var t=$a,e=Pr,i=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||i){i=O.T,O.T=null;var o=I.p;I.p=2;var f=ie;ie|=4;try{Lp(e,t);var h=rh,y=ks(t.containerInfo),E=h.focusedElem,k=h.selectionRange;if(y!==E&&E&&E.ownerDocument&&_r(E.ownerDocument.documentElement,E)){if(k!==null&&Ai(E)){var G=k.start,J=k.end;if(J===void 0&&(J=G),"selectionStart"in E)E.selectionStart=G,E.selectionEnd=Math.min(J,E.value.length);else{var it=E.ownerDocument||document,Y=it&&it.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),xt=E.textContent.length,Mt=Math.min(k.start,xt),ce=k.end===void 0?Mt:Math.min(k.end,xt);!Q.extend&&Mt>ce&&(y=ce,ce=Mt,Mt=y);var D=Os(E,Mt),R=Os(E,ce);if(D&&R&&(Q.rangeCount!==1||Q.anchorNode!==D.node||Q.anchorOffset!==D.offset||Q.focusNode!==R.node||Q.focusOffset!==R.offset)){var q=it.createRange();q.setStart(D.node,D.offset),Q.removeAllRanges(),Mt>ce?(Q.addRange(q),Q.extend(R.node,R.offset)):(q.setEnd(R.node,R.offset),Q.addRange(q))}}}}for(it=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&it.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<it.length;E++){var W=it[E];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}qu=!!sh,rh=sh=null}finally{ie=f,I.p=o,O.T=i}}t.current=e,qe=2}}function Fp(){if(qe===2){qe=0;var t=$a,e=Pr,i=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||i){i=O.T,O.T=null;var o=I.p;I.p=2;var f=ie;ie|=4;try{Ep(t,e.alternate,e)}finally{ie=f,I.p=o,O.T=i}}qe=3}}function Jp(){if(qe===4||qe===3){qe=0,_t();var t=$a,e=Pr,i=ha,o=Dp;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?qe=5:(qe=0,Pr=$a=null,Wp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Wa=null),St(i),e=e.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(sn,e,void 0,(e.current.flags&128)===128)}catch{}if(o!==null){e=O.T,f=I.p,I.p=2,O.T=null;try{for(var h=t.onRecoverableError,y=0;y<o.length;y++){var E=o[y];h(E.value,{componentStack:E.stack})}}finally{O.T=e,I.p=f}}(ha&3)!==0&&Nu(),Bi(t),f=t.pendingLanes,(i&261930)!==0&&(f&42)!==0?t===If?$o++:($o=0,If=t):$o=0,tl(0)}}function Wp(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ro(e)))}function Nu(){return Xp(),Fp(),Jp(),$p()}function $p(){if(qe!==5)return!1;var t=$a,e=Vf;Vf=0;var i=St(ha),o=O.T,f=I.p;try{I.p=32>i?32:i,O.T=null,i=Yf,Yf=null;var h=$a,y=ha;if(qe=0,Pr=$a=null,ha=0,(ie&6)!==0)throw Error(u(331));var E=ie;if(ie|=4,Rp(h.current),Mp(h,h.current,y,i),ie=E,tl(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(sn,h)}catch{}return!0}finally{I.p=f,O.T=o,Wp(t,e)}}function tg(t,e,i){e=r(i,e),e=Ef(t.stateNode,e,2),t=Ia(t,e,2),t!==null&&(Yi(t,2),Bi(t))}function re(t,e,i){if(t.tag===3)tg(t,t,i);else for(;e!==null;){if(e.tag===3){tg(e,t,i);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Wa===null||!Wa.has(o))){t=r(i,t),i=ep(2),o=Ia(e,i,2),o!==null&&(np(i,o,e,t),Yi(o,2),Bi(o));break}}e=e.return}}function Xf(t,e,i){var o=t.pingCache;if(o===null){o=t.pingCache=new m_;var f=new Set;o.set(e,f)}else f=o.get(e),f===void 0&&(f=new Set,o.set(e,f));f.has(i)||(Zf=!0,f.add(i),t=__.bind(null,t,e,i),e.then(t,t))}function __(t,e,i){var o=t.pingCache;o!==null&&o.delete(e),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,de===t&&(Xt&i)===i&&(ze===4||ze===3&&(Xt&62914560)===Xt&&300>Lt()-Eu?(ie&2)===0&&Zr(t,0):qf|=i,Hr===Xt&&(Hr=0)),Bi(t)}function eg(t,e){e===0&&(e=El()),t=Xn(t,e),t!==null&&(Yi(t,e),Bi(t))}function b_(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),eg(t,i)}function x_(t,e){var i=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(u(314))}o!==null&&o.delete(e),eg(t,i)}function w_(t,e){return Nt(t,e)}var Mu=null,Gr=null,Ff=!1,Ou=!1,Jf=!1,es=0;function Bi(t){t!==Gr&&t.next===null&&(Gr===null?Mu=Gr=t:Gr=Gr.next=t),Ou=!0,Ff||(Ff=!0,E_())}function tl(t,e){if(!Jf&&Ou){Jf=!0;do for(var i=!1,o=Mu;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var h=0;else{var y=o.suspendedLanes,E=o.pingedLanes;h=(1<<31-Fe(42|t)+1)-1,h&=f&~(y&~E),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,sg(o,h))}else h=Xt,h=_i(o,o===de?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Vi(o,h)||(i=!0,sg(o,h));o=o.next}while(i);Jf=!1}}function S_(){ng()}function ng(){Ou=Ff=!1;var t=0;es!==0&&R_()&&(t=es);for(var e=Lt(),i=null,o=Mu;o!==null;){var f=o.next,h=ig(o,e);h===0?(o.next=null,i===null?Mu=f:i.next=f,f===null&&(Gr=i)):(i=o,(t!==0||(h&3)!==0)&&(Ou=!0)),o=f}qe!==0&&qe!==5||tl(t),es!==0&&(es=0)}function ig(t,e){for(var i=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var y=31-Fe(h),E=1<<y,k=f[y];k===-1?((E&i)===0||(E&o)!==0)&&(f[y]=Cc(E,e)):k<=e&&(t.expiredLanes|=E),h&=~E}if(e=de,i=Xt,i=_i(t,t===e?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,i===0||t===e&&(se===2||se===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Ht(o),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Vi(t,i)){if(e=i&-i,e===t.callbackPriority)return e;switch(o!==null&&Ht(o),St(i)){case 2:case 8:i=Gt;break;case 32:i=Se;break;case 268435456:i=Ge;break;default:i=Se}return o=ag.bind(null,t),i=Nt(i,o),t.callbackPriority=e,t.callbackNode=i,e}return o!==null&&o!==null&&Ht(o),t.callbackPriority=2,t.callbackNode=null,2}function ag(t,e){if(qe!==0&&qe!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Nu()&&t.callbackNode!==i)return null;var o=Xt;return o=_i(t,t===de?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Hp(t,o,e),ig(t,Lt()),t.callbackNode!=null&&t.callbackNode===i?ag.bind(null,t):null)}function sg(t,e){if(Nu())return null;Hp(t,e,!0)}function E_(){j_(function(){(ie&6)!==0?Nt(Bt,S_):ng()})}function Wf(){if(es===0){var t=Cr;t===0&&(t=qi,qi<<=1,(qi&261888)===0&&(qi=256)),es=t}return es}function rg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Na(""+t)}function og(t,e){var i=e.ownerDocument.createElement("input");return i.name=e.name,i.value=e.value,t.id&&i.setAttribute("form",t.id),e.parentNode.insertBefore(i,e),t=new FormData(t),i.parentNode.removeChild(i),t}function T_(t,e,i,o,f){if(e==="submit"&&i&&i.stateNode===f){var h=rg((f[Ve]||null).action),y=o.submitter;y&&(e=(e=y[Ve]||null)?rg(e.formAction):y.getAttribute("formAction"),e!==null&&(h=e,y=null));var E=new hr("action","action",null,o,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(es!==0){var k=y?og(f,y):new FormData(f);vf(i,{pending:!0,data:k,method:f.method,action:h},null,k)}}else typeof h=="function"&&(E.preventDefault(),k=y?og(f,y):new FormData(f),vf(i,{pending:!0,data:k,method:f.method,action:h},h,k))},currentTarget:f}]})}}for(var $f=0;$f<Li.length;$f++){var th=Li[$f],A_=th.toLowerCase(),z_=th[0].toUpperCase()+th.slice(1);xn(A_,"on"+z_)}xn(Bs,"onAnimationEnd"),xn(Fl,"onAnimationIteration"),xn(js,"onAnimationStart"),xn("dblclick","onDoubleClick"),xn("focusin","onFocus"),xn("focusout","onBlur"),xn(qc,"onTransitionRun"),xn(Jl,"onTransitionStart"),xn(Gc,"onTransitionCancel"),xn(Za,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(el));function lg(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],f=o.event;o=o.listeners;t:{var h=void 0;if(e)for(var y=o.length-1;0<=y;y--){var E=o[y],k=E.instance,G=E.currentTarget;if(E=E.listener,k!==h&&f.isPropagationStopped())break t;h=E,f.currentTarget=G;try{h(f)}catch(J){Ds(J)}f.currentTarget=null,h=k}else for(y=0;y<o.length;y++){if(E=o[y],k=E.instance,G=E.currentTarget,E=E.listener,k!==h&&f.isPropagationStopped())break t;h=E,f.currentTarget=G;try{h(f)}catch(J){Ds(J)}f.currentTarget=null,h=k}}}}function Kt(t,e){var i=e[bi];i===void 0&&(i=e[bi]=new Set);var o=t+"__bubble";i.has(o)||(ug(e,t,2,!1),i.add(o))}function eh(t,e,i){var o=0;e&&(o|=4),ug(i,t,o,e)}var ku="_reactListening"+Math.random().toString(36).slice(2);function nh(t){if(!t[ku]){t[ku]=!0,Nl.forEach(function(i){i!=="selectionchange"&&(C_.has(i)||eh(i,!1,t),eh(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ku]||(e[ku]=!0,eh("selectionchange",!1,e))}}function ug(t,e,i,o){switch(Ug(e)){case 2:var f=nb;break;case 8:f=ib;break;default:f=yh}i=f.bind(null,e,i,t),f=void 0,!Ss||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(e,i,{capture:!0,passive:f}):t.addEventListener(e,i,!0):f!==void 0?t.addEventListener(e,i,{passive:f}):t.addEventListener(e,i,!1)}function ih(t,e,i,o,f){var h=o;if((e&1)===0&&(e&2)===0&&o!==null)t:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var E=o.stateNode.containerInfo;if(E===f)break;if(y===4)for(y=o.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;E!==null;){if(y=Ki(E),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){o=h=y;continue t}E=E.parentNode}}o=o.return}vo(function(){var G=h,J=ws(i),it=[];t:{var Y=Wl.get(t);if(Y!==void 0){var Q=hr,xt=t;switch(t){case"keypress":if(Es(i)===0)break t;case"keydown":case"keyup":Q=Ul;break;case"focusin":xt="focus",Q=xo;break;case"focusout":xt="blur",Q=xo;break;case"beforeblur":case"afterblur":Q=xo;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=jc;break;case Bs:case Fl:case js:Q=wo;break;case Za:Q=Zl;break;case"scroll":case"scrollend":Q=Qt;break;case"wheel":Q=Wi;break;case"copy":case"cut":case"paste":Q=Yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Hl;break;case"toggle":case"beforetoggle":Q=zs}var Mt=(e&4)!==0,ce=!Mt&&(t==="scroll"||t==="scrollend"),D=Mt?Y!==null?Y+"Capture":null:Y;Mt=[];for(var R=G,q;R!==null;){var W=R;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||D===null||(W=Fi(R,D),W!=null&&Mt.push(nl(R,W,q))),ce)break;R=R.return}0<Mt.length&&(Y=new Q(Y,xt,null,i,J),it.push({event:Y,listeners:Mt}))}}if((e&7)===0){t:{if(Y=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",Y&&i!==fr&&(xt=i.relatedTarget||i.fromElement)&&(Ki(xt)||xt[Ii]))break t;if((Q||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(xt=i.relatedTarget||i.toElement,Q=G,xt=xt?Ki(xt):null,xt!==null&&(ce=p(xt),Mt=xt.tag,xt!==ce||Mt!==5&&Mt!==27&&Mt!==6)&&(xt=null)):(Q=null,xt=G),Q!==xt)){if(Mt=kl,W="onMouseLeave",D="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(Mt=Hl,W="onPointerLeave",D="onPointerEnter",R="pointer"),ce=Q==null?Y:xi(Q),q=xt==null?Y:xi(xt),Y=new Mt(W,R+"leave",Q,i,J),Y.target=ce,Y.relatedTarget=q,W=null,Ki(J)===G&&(Mt=new Mt(D,R+"enter",xt,i,J),Mt.target=q,Mt.relatedTarget=ce,W=Mt),ce=W,Q&&xt)e:{for(Mt=L_,D=Q,R=xt,q=0,W=D;W;W=Mt(W))q++;W=0;for(var zt=R;zt;zt=Mt(zt))W++;for(;0<q-W;)D=Mt(D),q--;for(;0<W-q;)R=Mt(R),W--;for(;q--;){if(D===R||R!==null&&D===R.alternate){Mt=D;break e}D=Mt(D),R=Mt(R)}Mt=null}else Mt=null;Q!==null&&cg(it,Y,Q,Mt,!1),xt!==null&&ce!==null&&cg(it,ce,xt,Mt,!0)}}t:{if(Y=G?xi(G):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var te=Ms;else if(In(Y))if(Yl)te=Zc;else{te=Pc;var wt=li}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&xs(G.elementType)&&(te=Ms):te=Da;if(te&&(te=te(t,G))){Vl(it,te,i,J);break t}wt&&wt(t,Y,G),t==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&si(Y,"number",Y.value)}switch(wt=G?xi(G):window,t){case"focusin":(In(wt)||wt.contentEditable==="true")&&(zi=wt,xr=G,Rs=null);break;case"focusout":Rs=xr=zi=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,Ql(it,i,J);break;case"selectionchange":if(br)break;case"keydown":case"keyup":Ql(it,i,J)}var Zt;if(mr)t:{switch(t){case"compositionstart":var Ft="onCompositionStart";break t;case"compositionend":Ft="onCompositionEnd";break t;case"compositionupdate":Ft="onCompositionUpdate";break t}Ft=void 0}else Ra?Gl(t,i)&&(Ft="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Ft="onCompositionStart");Ft&&(pr&&i.locale!=="ko"&&(Ra||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&Ra&&(Zt=Ei()):(Vn=J,Ji="value"in Vn?Vn.value:Vn.textContent,Ra=!0)),wt=Ru(G,Ft),0<wt.length&&(Ft=new So(Ft,t,null,i,J),it.push({event:Ft,listeners:wt}),Zt?Ft.data=Zt:(Zt=zo(i),Zt!==null&&(Ft.data=Zt)))),(Zt=Uc?jn(t,i):Ba(t,i))&&(Ft=Ru(G,"onBeforeInput"),0<Ft.length&&(wt=new So("onBeforeInput","beforeinput",null,i,J),it.push({event:wt,listeners:Ft}),wt.data=Zt)),T_(it,t,G,i,J)}lg(it,e)})}function nl(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Ru(t,e){for(var i=e+"Capture",o=[];t!==null;){var f=t,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Fi(t,i),f!=null&&o.unshift(nl(t,f,h)),f=Fi(t,e),f!=null&&o.push(nl(t,f,h))),t.tag===3)return o;t=t.return}return[]}function L_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function cg(t,e,i,o,f){for(var h=e._reactName,y=[];i!==null&&i!==o;){var E=i,k=E.alternate,G=E.stateNode;if(E=E.tag,k!==null&&k===o)break;E!==5&&E!==26&&E!==27||G===null||(k=G,f?(G=Fi(i,h),G!=null&&y.unshift(nl(i,G,k))):f||(G=Fi(i,h),G!=null&&y.push(nl(i,G,k)))),i=i.return}y.length!==0&&t.push({event:e,listeners:y})}var N_=/\r\n?/g,M_=/\u0000|\uFFFD/g;function fg(t){return(typeof t=="string"?t:""+t).replace(N_,`
`).replace(M_,"")}function hg(t,e){return e=fg(e),fg(t)===e}function ue(t,e,i,o,f,h){switch(i){case"children":typeof o=="string"?e==="body"||e==="textarea"&&o===""||Gn(t,o):(typeof o=="number"||typeof o=="bigint")&&e!=="body"&&Gn(t,""+o);break;case"className":oe(t,"class",o);break;case"tabIndex":oe(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":oe(t,i,o);break;case"style":ur(t,o,h);break;case"data":if(e!=="object"){oe(t,"data",o);break}case"src":case"href":if(o===""&&(e!=="a"||i!=="href")){t.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=Na(""+o),t.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(e!=="input"&&ue(t,e,"name",f.name,f,null),ue(t,e,"formEncType",f.formEncType,f,null),ue(t,e,"formMethod",f.formMethod,f,null),ue(t,e,"formTarget",f.formTarget,f,null)):(ue(t,e,"encType",f.encType,f,null),ue(t,e,"method",f.method,f,null),ue(t,e,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=Na(""+o),t.setAttribute(i,o);break;case"onClick":o!=null&&(t.onclick=_n);break;case"onScroll":o!=null&&Kt("scroll",t);break;case"onScrollEnd":o!=null&&Kt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(u(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(u(60));t.innerHTML=i}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}i=Na(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""+o):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":o===!0?t.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,o):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(i,o):t.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(i):t.setAttribute(i,o);break;case"popover":Kt("beforetoggle",t),Kt("toggle",t),Vt(t,"popover",o);break;case"xlinkActuate":vn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":vn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":vn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":vn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":vn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":vn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":vn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":vn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":vn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Vt(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=cr.get(i)||i,Vt(t,i,o))}}function ah(t,e,i,o,f,h){switch(i){case"style":ur(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(u(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(u(60));t.innerHTML=i}}break;case"children":typeof o=="string"?Gn(t,o):(typeof o=="number"||typeof o=="bigint")&&Gn(t,""+o);break;case"onScroll":o!=null&&Kt("scroll",t);break;case"onScrollEnd":o!=null&&Kt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=_n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ml.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),e=i.slice(2,f?i.length-7:void 0),h=t[Ve]||null,h=h!=null?h[i]:null,typeof h=="function"&&t.removeEventListener(e,h,f),typeof o=="function")){typeof h!="function"&&h!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(e,o,f);break t}i in t?t[i]=o:o===!0?t.setAttribute(i,""):Vt(t,i,o)}}}function tn(t,e,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",t),Kt("load",t);var o=!1,f=!1,h;for(h in i)if(i.hasOwnProperty(h)){var y=i[h];if(y!=null)switch(h){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,e));default:ue(t,e,h,y,i,null)}}f&&ue(t,e,"srcSet",i.srcSet,i,null),o&&ue(t,e,"src",i.src,i,null);return;case"input":Kt("invalid",t);var E=h=y=f=null,k=null,G=null;for(o in i)if(i.hasOwnProperty(o)){var J=i[o];if(J!=null)switch(o){case"name":f=J;break;case"type":y=J;break;case"checked":k=J;break;case"defaultChecked":G=J;break;case"value":h=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(u(137,e));break;default:ue(t,e,o,J,i,null)}}bs(t,h,E,k,G,y,f,!1);return;case"select":Kt("invalid",t),o=y=h=null;for(f in i)if(i.hasOwnProperty(f)&&(E=i[f],E!=null))switch(f){case"value":h=E;break;case"defaultValue":y=E;break;case"multiple":o=E;default:ue(t,e,f,E,i,null)}e=h,i=y,t.multiple=!!o,e!=null?he(t,!!o,e,!1):i!=null&&he(t,!!o,i,!0);return;case"textarea":Kt("invalid",t),h=f=o=null;for(y in i)if(i.hasOwnProperty(y)&&(E=i[y],E!=null))switch(y){case"value":o=E;break;case"defaultValue":f=E;break;case"children":h=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(u(91));break;default:ue(t,e,y,E,i,null)}Ca(t,o,f,h);return;case"option":for(k in i)i.hasOwnProperty(k)&&(o=i[k],o!=null)&&(k==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":ue(t,e,k,o,i,null));return;case"dialog":Kt("beforetoggle",t),Kt("toggle",t),Kt("cancel",t),Kt("close",t);break;case"iframe":case"object":Kt("load",t);break;case"video":case"audio":for(o=0;o<el.length;o++)Kt(el[o],t);break;case"image":Kt("error",t),Kt("load",t);break;case"details":Kt("toggle",t);break;case"embed":case"source":case"link":Kt("error",t),Kt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in i)if(i.hasOwnProperty(G)&&(o=i[G],o!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,e));default:ue(t,e,G,o,i,null)}return;default:if(xs(e)){for(J in i)i.hasOwnProperty(J)&&(o=i[J],o!==void 0&&ah(t,e,J,o,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(o=i[E],o!=null&&ue(t,e,E,o,i,null))}function O_(t,e,i,o){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,y=null,E=null,k=null,G=null,J=null;for(Q in i){var it=i[Q];if(i.hasOwnProperty(Q)&&it!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":k=it;default:o.hasOwnProperty(Q)||ue(t,e,Q,null,o,it)}}for(var Y in o){var Q=o[Y];if(it=i[Y],o.hasOwnProperty(Y)&&(Q!=null||it!=null))switch(Y){case"type":h=Q;break;case"name":f=Q;break;case"checked":G=Q;break;case"defaultChecked":J=Q;break;case"value":y=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(u(137,e));break;default:Q!==it&&ue(t,e,Y,Q,o,it)}}po(t,y,E,k,G,J,h,f);return;case"select":Q=y=E=Y=null;for(h in i)if(k=i[h],i.hasOwnProperty(h)&&k!=null)switch(h){case"value":break;case"multiple":Q=k;default:o.hasOwnProperty(h)||ue(t,e,h,null,o,k)}for(f in o)if(h=o[f],k=i[f],o.hasOwnProperty(f)&&(h!=null||k!=null))switch(f){case"value":Y=h;break;case"defaultValue":E=h;break;case"multiple":y=h;default:h!==k&&ue(t,e,f,h,o,k)}e=E,i=y,o=Q,Y!=null?he(t,!!i,Y,!1):!!o!=!!i&&(e!=null?he(t,!!i,e,!0):he(t,!!i,i?[]:"",!1));return;case"textarea":Q=Y=null;for(E in i)if(f=i[E],i.hasOwnProperty(E)&&f!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ue(t,e,E,null,o,f)}for(y in o)if(f=o[y],h=i[y],o.hasOwnProperty(y)&&(f!=null||h!=null))switch(y){case"value":Y=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(u(91));break;default:f!==h&&ue(t,e,y,f,o,h)}Si(t,Y,Q);return;case"option":for(var xt in i)Y=i[xt],i.hasOwnProperty(xt)&&Y!=null&&!o.hasOwnProperty(xt)&&(xt==="selected"?t.selected=!1:ue(t,e,xt,null,o,Y));for(k in o)Y=o[k],Q=i[k],o.hasOwnProperty(k)&&Y!==Q&&(Y!=null||Q!=null)&&(k==="selected"?t.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":ue(t,e,k,Y,o,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in i)Y=i[Mt],i.hasOwnProperty(Mt)&&Y!=null&&!o.hasOwnProperty(Mt)&&ue(t,e,Mt,null,o,Y);for(G in o)if(Y=o[G],Q=i[G],o.hasOwnProperty(G)&&Y!==Q&&(Y!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(u(137,e));break;default:ue(t,e,G,Y,o,Q)}return;default:if(xs(e)){for(var ce in i)Y=i[ce],i.hasOwnProperty(ce)&&Y!==void 0&&!o.hasOwnProperty(ce)&&ah(t,e,ce,void 0,o,Y);for(J in o)Y=o[J],Q=i[J],!o.hasOwnProperty(J)||Y===Q||Y===void 0&&Q===void 0||ah(t,e,J,Y,o,Q);return}}for(var D in i)Y=i[D],i.hasOwnProperty(D)&&Y!=null&&!o.hasOwnProperty(D)&&ue(t,e,D,null,o,Y);for(it in o)Y=o[it],Q=i[it],!o.hasOwnProperty(it)||Y===Q||Y==null&&Q==null||ue(t,e,it,Y,o,Q)}function dg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var f=i[o],h=f.transferSize,y=f.initiatorType,E=f.duration;if(h&&E&&dg(y)){for(y=0,E=f.responseEnd,o+=1;o<i.length;o++){var k=i[o],G=k.startTime;if(G>E)break;var J=k.transferSize,it=k.initiatorType;J&&dg(it)&&(k=k.responseEnd,y+=J*(k<E?1:(E-G)/(k-G)))}if(--o,e+=8*(h+y)/(f.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var sh=null,rh=null;function Bu(t){return t.nodeType===9?t:t.ownerDocument}function mg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pg(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function oh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lh=null;function R_(){var t=window.event;return t&&t.type==="popstate"?t===lh?!1:(lh=t,!0):(lh=null,!1)}var gg=typeof setTimeout=="function"?setTimeout:void 0,B_=typeof clearTimeout=="function"?clearTimeout:void 0,yg=typeof Promise=="function"?Promise:void 0,j_=typeof queueMicrotask=="function"?queueMicrotask:typeof yg<"u"?function(t){return yg.resolve(null).then(t).catch(D_)}:gg;function D_(t){setTimeout(function(){throw t})}function ns(t){return t==="head"}function vg(t,e){var i=e,o=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(o===0){t.removeChild(f),Kr(e);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")il(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,il(i);for(var h=i.firstChild;h;){var y=h.nextSibling,E=h.nodeName;h[ys]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&h.rel.toLowerCase()==="stylesheet"||i.removeChild(h),h=y}}else i==="body"&&il(t.ownerDocument.body);i=f}while(i);Kr(e)}function _g(t,e){var i=t;t=0;do{var o=i.nextSibling;if(i.nodeType===1?e?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(e?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=o}while(i)}function uh(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var i=e;switch(e=e.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":uh(i),co(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function U_(t,e,i,o){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ys])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function H_(t,e,i){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Wn(t.nextSibling),t===null))return null;return t}function bg(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Wn(t.nextSibling),t===null))return null;return t}function ch(t){return t.data==="$?"||t.data==="$~"}function fh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function P_(t,e){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||i.readyState!=="loading")e();else{var o=function(){e(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var hh=null;function xg(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(e===0)return Wn(t.nextSibling);e--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||e++}t=t.nextSibling}return null}function wg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(e===0)return t;e--}else i!=="/$"&&i!=="/&"||e++}t=t.previousSibling}return null}function Sg(t,e,i){switch(e=Bu(i),t){case"html":if(t=e.documentElement,!t)throw Error(u(452));return t;case"head":if(t=e.head,!t)throw Error(u(453));return t;case"body":if(t=e.body,!t)throw Error(u(454));return t;default:throw Error(u(451))}}function il(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);co(t)}var $n=new Map,Eg=new Set;function ju(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var da=I.d;I.d={f:Z_,r:q_,D:G_,C:V_,L:Y_,m:I_,X:Q_,S:K_,M:X_};function Z_(){var t=da.f(),e=zu();return t||e}function q_(t){var e=Ta(t);e!==null&&e.tag===5&&e.type==="form"?Zm(e):da.r(t)}var Vr=typeof document>"u"?null:document;function Tg(t,e,i){var o=Vr;if(o&&typeof e=="string"&&e){var f=pe(e);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),Eg.has(f)||(Eg.add(f),t={rel:t,crossOrigin:i,href:e},o.querySelector(f)===null&&(e=o.createElement("link"),tn(e,"link",t),Oe(e),o.head.appendChild(e)))}}function G_(t){da.D(t),Tg("dns-prefetch",t,null)}function V_(t,e){da.C(t,e),Tg("preconnect",t,e)}function Y_(t,e,i){da.L(t,e,i);var o=Vr;if(o&&t&&e){var f='link[rel="preload"][as="'+pe(e)+'"]';e==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+pe(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+pe(i.imageSizes)+'"]')):f+='[href="'+pe(t)+'"]';var h=f;switch(e){case"style":h=Yr(t);break;case"script":h=Ir(t)}$n.has(h)||(t=T({rel:"preload",href:e==="image"&&i&&i.imageSrcSet?void 0:t,as:e},i),$n.set(h,t),o.querySelector(f)!==null||e==="style"&&o.querySelector(al(h))||e==="script"&&o.querySelector(sl(h))||(e=o.createElement("link"),tn(e,"link",t),Oe(e),o.head.appendChild(e)))}}function I_(t,e){da.m(t,e);var i=Vr;if(i&&t){var o=e&&typeof e.as=="string"?e.as:"script",f='link[rel="modulepreload"][as="'+pe(o)+'"][href="'+pe(t)+'"]',h=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ir(t)}if(!$n.has(h)&&(t=T({rel:"modulepreload",href:t},e),$n.set(h,t),i.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(sl(h)))return}o=i.createElement("link"),tn(o,"link",t),Oe(o),i.head.appendChild(o)}}}function K_(t,e,i){da.S(t,e,i);var o=Vr;if(o&&t){var f=Aa(o).hoistableStyles,h=Yr(t);e=e||"default";var y=f.get(h);if(!y){var E={loading:0,preload:null};if(y=o.querySelector(al(h)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":e},i),(i=$n.get(h))&&dh(t,i);var k=y=o.createElement("link");Oe(k),tn(k,"link",t),k._p=new Promise(function(G,J){k.onload=G,k.onerror=J}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Du(y,e,o)}y={type:"stylesheet",instance:y,count:1,state:E},f.set(h,y)}}}function Q_(t,e){da.X(t,e);var i=Vr;if(i&&t){var o=Aa(i).hoistableScripts,f=Ir(t),h=o.get(f);h||(h=i.querySelector(sl(f)),h||(t=T({src:t,async:!0},e),(e=$n.get(f))&&mh(t,e),h=i.createElement("script"),Oe(h),tn(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function X_(t,e){da.M(t,e);var i=Vr;if(i&&t){var o=Aa(i).hoistableScripts,f=Ir(t),h=o.get(f);h||(h=i.querySelector(sl(f)),h||(t=T({src:t,async:!0,type:"module"},e),(e=$n.get(f))&&mh(t,e),h=i.createElement("script"),Oe(h),tn(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function Ag(t,e,i,o){var f=(f=dt.current)?ju(f):null;if(!f)throw Error(u(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(e=Yr(i.href),i=Aa(f).hoistableStyles,o=i.get(e),o||(o={type:"style",instance:null,count:0,state:null},i.set(e,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Yr(i.href);var h=Aa(f).hoistableStyles,y=h.get(t);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,y),(h=f.querySelector(al(t)))&&!h._p&&(y.instance=h,y.state.loading=5),$n.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},$n.set(t,i),h||F_(f,t,i,y.state))),e&&o===null)throw Error(u(528,""));return y}if(e&&o!==null)throw Error(u(529,""));return null;case"script":return e=i.async,i=i.src,typeof i=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ir(i),i=Aa(f).hoistableScripts,o=i.get(e),o||(o={type:"script",instance:null,count:0,state:null},i.set(e,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,t))}}function Yr(t){return'href="'+pe(t)+'"'}function al(t){return'link[rel="stylesheet"]['+t+"]"}function zg(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function F_(t,e,i,o){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?o.loading=1:(e=t.createElement("link"),o.preload=e,e.addEventListener("load",function(){return o.loading|=1}),e.addEventListener("error",function(){return o.loading|=2}),tn(e,"link",i),Oe(e),t.head.appendChild(e))}function Ir(t){return'[src="'+pe(t)+'"]'}function sl(t){return"script[async]"+t}function Cg(t,e,i){if(e.count++,e.instance===null)switch(e.type){case"style":var o=t.querySelector('style[data-href~="'+pe(i.href)+'"]');if(o)return e.instance=o,Oe(o),o;var f=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Oe(o),tn(o,"style",f),Du(o,i.precedence,t),e.instance=o;case"stylesheet":f=Yr(i.href);var h=t.querySelector(al(f));if(h)return e.state.loading|=4,e.instance=h,Oe(h),h;o=zg(i),(f=$n.get(f))&&dh(o,f),h=(t.ownerDocument||t).createElement("link"),Oe(h);var y=h;return y._p=new Promise(function(E,k){y.onload=E,y.onerror=k}),tn(h,"link",o),e.state.loading|=4,Du(h,i.precedence,t),e.instance=h;case"script":return h=Ir(i.src),(f=t.querySelector(sl(h)))?(e.instance=f,Oe(f),f):(o=i,(f=$n.get(h))&&(o=T({},i),mh(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Oe(f),tn(f,"link",o),t.head.appendChild(f),e.instance=f);case"void":return null;default:throw Error(u(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(o=e.instance,e.state.loading|=4,Du(o,i.precedence,t));return e.instance}function Du(t,e,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,h=f,y=0;y<o.length;y++){var E=o[y];if(E.dataset.precedence===e)h=E;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(e=i.nodeType===9?i.head:i,e.insertBefore(t,e.firstChild))}function dh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function mh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Uu=null;function Lg(t,e,i){if(Uu===null){var o=new Map,f=Uu=new Map;f.set(i,o)}else f=Uu,o=f.get(i),o||(o=new Map,f.set(i,o));if(o.has(t))return o;for(o.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var h=i[f];if(!(h[ys]||h[Me]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(e)||"";y=t+y;var E=o.get(y);E?E.push(h):o.set(y,[h])}}return o}function Ng(t,e,i){t=t.ownerDocument||t,t.head.insertBefore(i,e==="title"?t.querySelector("head > title"):null)}function J_(t,e,i){if(i===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;return e.rel==="stylesheet"?(t=e.disabled,typeof e.precedence=="string"&&t==null):!0;case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Mg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function W_(t,e,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Yr(o.href),h=e.querySelector(al(f));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Hu.bind(t),e.then(t,t)),i.state.loading|=4,i.instance=h,Oe(h);return}h=e.ownerDocument||e,o=zg(o),(f=$n.get(f))&&dh(o,f),h=h.createElement("link"),Oe(h);var y=h;y._p=new Promise(function(E,k){y.onload=E,y.onerror=k}),tn(h,"link",o),i.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Hu.bind(t),e.addEventListener("load",i),e.addEventListener("error",i))}}var ph=0;function $_(t,e){return t.stylesheets&&t.count===0&&Zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var o=setTimeout(function(){if(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+e);0<t.imgBytes&&ph===0&&(ph=62500*k_());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>ph?50:800)+e);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Hu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Pu=null;function Zu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Pu=new Map,e.forEach(tb,t),Pu=null,Hu.call(t))}function tb(t,e){if(!(e.state.loading&4)){var i=Pu.get(t);if(i)var o=i.get(null);else{i=new Map,Pu.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var y=f[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),o=y)}o&&i.set(null,o)}f=e.instance,y=f.getAttribute("data-precedence"),h=i.get(y)||o,h===o&&i.set(null,f),i.set(y,f),this.count++,o=Hu.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),e.state.loading|=4}}var rl={$$typeof:at,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function eb(t,e,i,o,f,h,y,E,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.hiddenUpdates=oo(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Og(t,e,i,o,f,h,y,E,k,G,J,it){return t=new eb(t,e,i,y,k,G,J,it,E),e=1,h===!0&&(e|=24),h=on(3,null,null,e),t.current=h,h.stateNode=t,e=Kc(),e.refCount++,t.pooledCache=e,e.refCount++,h.memoizedState={element:o,isDehydrated:i,cache:e},Jc(h),t}function kg(t){return t?(t=$i,t):$i}function Rg(t,e,i,o,f,h){f=kg(f),o.context===null?o.context=f:o.pendingContext=f,o=Ya(e),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Ia(t,o,e),i!==null&&(Cn(i,t,e),Uo(i,t,e))}function Bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function gh(t,e){Bg(t,e),(t=t.alternate)&&Bg(t,e)}function jg(t){if(t.tag===13||t.tag===31){var e=Xn(t,67108864);e!==null&&Cn(e,t,67108864),gh(t,67108864)}}function Dg(t){if(t.tag===13||t.tag===31){var e=Zn();e=yn(e);var i=Xn(t,e);i!==null&&Cn(i,t,e),gh(t,e)}}var qu=!0;function nb(t,e,i,o){var f=O.T;O.T=null;var h=I.p;try{I.p=2,yh(t,e,i,o)}finally{I.p=h,O.T=f}}function ib(t,e,i,o){var f=O.T;O.T=null;var h=I.p;try{I.p=8,yh(t,e,i,o)}finally{I.p=h,O.T=f}}function yh(t,e,i,o){if(qu){var f=vh(o);if(f===null)ih(t,e,o,Gu,i),Hg(t,o);else if(sb(f,t,e,i,o))o.stopPropagation();else if(Hg(t,o),e&4&&-1<ab.indexOf(t)){for(;f!==null;){var h=Ta(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=ii(h.pendingLanes);if(y!==0){var E=h;for(E.pendingLanes|=2,E.entangledLanes|=2;y;){var k=1<<31-Fe(y);E.entanglements[1]|=k,y&=~k}Bi(h),(ie&6)===0&&(Tu=Lt()+500,tl(0))}}break;case 31:case 13:E=Xn(h,2),E!==null&&Cn(E,h,2),zu(),gh(h,2)}if(h=vh(o),h===null&&ih(t,e,o,Gu,i),h===f)break;f=h}f!==null&&o.stopPropagation()}else ih(t,e,o,null,i)}}function vh(t){return t=ws(t),_h(t)}var Gu=null;function _h(t){if(Gu=null,t=Ki(t),t!==null){var e=p(t);if(e===null)t=null;else{var i=e.tag;if(i===13){if(t=_(e),t!==null)return t;t=null}else if(i===31){if(t=b(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Gu=t,null}function Ug(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(At()){case Bt:return 2;case Gt:return 8;case Se:case nn:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var bh=!1,is=null,as=null,ss=null,ol=new Map,ll=new Map,rs=[],ab="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hg(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":ol.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ll.delete(e.pointerId)}}function ul(t,e,i,o,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:e,domEventName:i,eventSystemFlags:o,nativeEvent:h,targetContainers:[f]},e!==null&&(e=Ta(e),e!==null&&jg(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,f!==null&&e.indexOf(f)===-1&&e.push(f),t)}function sb(t,e,i,o,f){switch(e){case"focusin":return is=ul(is,t,e,i,o,f),!0;case"dragenter":return as=ul(as,t,e,i,o,f),!0;case"mouseover":return ss=ul(ss,t,e,i,o,f),!0;case"pointerover":var h=f.pointerId;return ol.set(h,ul(ol.get(h)||null,t,e,i,o,f)),!0;case"gotpointercapture":return h=f.pointerId,ll.set(h,ul(ll.get(h)||null,t,e,i,o,f)),!0}return!1}function Pg(t){var e=Ki(t.target);if(e!==null){var i=p(e);if(i!==null){if(e=i.tag,e===13){if(e=_(i),e!==null){t.blockedOn=e,uo(t.priority,function(){Dg(i)});return}}else if(e===31){if(e=b(i),e!==null){t.blockedOn=e,uo(t.priority,function(){Dg(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=vh(t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);fr=o,i.target.dispatchEvent(o),fr=null}else return e=Ta(i),e!==null&&jg(e),t.blockedOn=i,!1;e.shift()}return!0}function Zg(t,e,i){Vu(t)&&i.delete(e)}function rb(){bh=!1,is!==null&&Vu(is)&&(is=null),as!==null&&Vu(as)&&(as=null),ss!==null&&Vu(ss)&&(ss=null),ol.forEach(Zg),ll.forEach(Zg)}function Yu(t,e){t.blockedOn===e&&(t.blockedOn=null,bh||(bh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,rb)))}var Iu=null;function qg(t){Iu!==t&&(Iu=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Iu===t&&(Iu=null);for(var e=0;e<t.length;e+=3){var i=t[e],o=t[e+1],f=t[e+2];if(typeof o!="function"){if(_h(o||i)===null)continue;break}var h=Ta(i);h!==null&&(t.splice(e,3),e-=3,vf(h,{pending:!0,data:f,method:i.method,action:o},o,f))}}))}function Kr(t){function e(k){return Yu(k,t)}is!==null&&Yu(is,t),as!==null&&Yu(as,t),ss!==null&&Yu(ss,t),ol.forEach(e),ll.forEach(e);for(var i=0;i<rs.length;i++){var o=rs[i];o.blockedOn===t&&(o.blockedOn=null)}for(;0<rs.length&&(i=rs[0],i.blockedOn===null);)Pg(i),i.blockedOn===null&&rs.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var f=i[o],h=i[o+1],y=f[Ve]||null;if(typeof h=="function")y||qg(i);else if(y){var E=null;if(h&&h.hasAttribute("formAction")){if(f=h,y=h[Ve]||null)E=y.formAction;else if(_h(f)!==null)continue}else E=y.action;typeof E=="function"?i[o+1]=E:(i.splice(o,3),o-=3),qg(i)}}}function Gg(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function e(){f!==null&&(f(),f=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),f!==null&&(f(),f=null)}}}function xh(t){this._internalRoot=t}Ku.prototype.render=xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(u(409));var i=e.current,o=Zn();Rg(i,o,t,e,null,null)},Ku.prototype.unmount=xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rg(t.current,2,null,t,null,null),zu(),e[Ii]=null}};function Ku(t){this._internalRoot=t}Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=lo();t={blockedOn:null,target:t,priority:e};for(var i=0;i<rs.length&&e!==0&&e<rs[i].priority;i++);rs.splice(i,0,t),i===0&&Pg(t)}};var Vg=s.version;if(Vg!=="19.2.3")throw Error(u(527,Vg,"19.2.3"));I.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=w(e),t=t!==null?A(t):null,t=t===null?null:t.stateNode,t};var ob={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{sn=Qu.inject(ob),me=Qu}catch{}}return fl.createRoot=function(t,e){if(!d(t))throw Error(u(299));var i=!1,o="",f=Jm,h=Wm,y=$m;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onUncaughtError!==void 0&&(f=e.onUncaughtError),e.onCaughtError!==void 0&&(h=e.onCaughtError),e.onRecoverableError!==void 0&&(y=e.onRecoverableError)),e=Og(t,1,!1,null,null,i,o,null,f,h,y,Gg),t[Ii]=e.current,nh(t),new xh(e)},fl.hydrateRoot=function(t,e,i){if(!d(t))throw Error(u(299));var o=!1,f="",h=Jm,y=Wm,E=$m,k=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(k=i.formState)),e=Og(t,1,!0,e,i??null,o,f,k,h,y,E,Gg),e.context=kg(null),i=e.current,o=Zn(),o=yn(o),f=Ya(o),f.callback=null,Ia(i,f,o),i=o,e.current.lanes=i,Yi(e,i),Bi(e),t[Ii]=e.current,nh(t),new Ku(e)},fl.version="19.2.3",fl}var t0;function gb(){if(t0)return Eh.exports;t0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Eh.exports=pb(),Eh.exports}var yb=gb();const vb=od(yb),_b="modulepreload",bb=function(a){return"/parlens-pwa/"+a},e0={},xb=function(s,l,u){let d=Promise.resolve();if(l&&l.length>0){let w=function(A){return Promise.all(A.map(T=>Promise.resolve(T).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};var _=w;document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),v=b?.nonce||b?.getAttribute("nonce");d=w(l.map(A=>{if(A=bb(A),A in e0)return;e0[A]=!0;const T=A.endsWith(".css"),N=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${N}`))return;const j=document.createElement("link");if(j.rel=T?"stylesheet":_b,T||(j.as="script"),j.crossOrigin="",j.href=A,v&&j.setAttribute("nonce",v),document.head.appendChild(j),T)return new Promise((B,z)=>{j.addEventListener("load",B),j.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${A}`)))})}))}function p(b){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=b,window.dispatchEvent(v),!v.defaultPrevented)throw b}return d.then(b=>{for(const v of b||[])v.status==="rejected"&&p(v.reason);return s().catch(p)})};function n0(a){if(!Number.isSafeInteger(a)||a<0)throw new Error(`Wrong positive integer: ${a}`)}function H0(a,...s){if(!(a instanceof Uint8Array))throw new Error("Expected Uint8Array");if(s.length>0&&!s.includes(a.length))throw new Error(`Expected Uint8Array of length ${s}, not of length=${a.length}`)}function wb(a){if(typeof a!="function"||typeof a.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");n0(a.outputLen),n0(a.blockLen)}function ec(a,s=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(s&&a.finished)throw new Error("Hash#digest() has already been called")}function Sb(a,s){H0(a);const l=s.outputLen;if(a.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}const Ch=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const P0=a=>a instanceof Uint8Array,Lh=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),ji=(a,s)=>a<<32-s|a>>>s,Eb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Eb)throw new Error("Non little-endian hardware is not supported");function Tb(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function ud(a){if(typeof a=="string"&&(a=Tb(a)),!P0(a))throw new Error(`expected Uint8Array, got ${typeof a}`);return a}function Ab(...a){const s=new Uint8Array(a.reduce((u,d)=>u+d.length,0));let l=0;return a.forEach(u=>{if(!P0(u))throw new Error("Uint8Array expected");s.set(u,l),l+=u.length}),s}let Z0=class{clone(){return this._cloneInto()}};function zb(a){const s=u=>a().update(ud(u)).digest(),l=a();return s.outputLen=l.outputLen,s.blockLen=l.blockLen,s.create=()=>a(),s}function q0(a=32){if(Ch&&typeof Ch.getRandomValues=="function")return Ch.getRandomValues(new Uint8Array(a));throw new Error("crypto.getRandomValues must be defined")}function Cb(a,s,l,u){if(typeof a.setBigUint64=="function")return a.setBigUint64(s,l,u);const d=BigInt(32),p=BigInt(4294967295),_=Number(l>>d&p),b=Number(l&p),v=u?4:0,w=u?0:4;a.setUint32(s+v,_,u),a.setUint32(s+w,b,u)}let Lb=class extends Z0{constructor(s,l,u,d){super(),this.blockLen=s,this.outputLen=l,this.padOffset=u,this.isLE=d,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=Lh(this.buffer)}update(s){ec(this);const{view:l,buffer:u,blockLen:d}=this;s=ud(s);const p=s.length;for(let _=0;_<p;){const b=Math.min(d-this.pos,p-_);if(b===d){const v=Lh(s);for(;d<=p-_;_+=d)this.process(v,_);continue}u.set(s.subarray(_,_+b),this.pos),this.pos+=b,_+=b,this.pos===d&&(this.process(l,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){ec(this),Sb(s,this),this.finished=!0;const{buffer:l,view:u,blockLen:d,isLE:p}=this;let{pos:_}=this;l[_++]=128,this.buffer.subarray(_).fill(0),this.padOffset>d-_&&(this.process(u,0),_=0);for(let T=_;T<d;T++)l[T]=0;Cb(u,d-8,BigInt(this.length*8),p),this.process(u,0);const b=Lh(s),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=v/4,A=this.get();if(w>A.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<w;T++)b.setUint32(4*T,A[T],p)}digest(){const{buffer:s,outputLen:l}=this;this.digestInto(s);const u=s.slice(0,l);return this.destroy(),u}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:l,buffer:u,length:d,finished:p,destroyed:_,pos:b}=this;return s.length=d,s.pos=b,s.finished=p,s.destroyed=_,d%l&&s.buffer.set(u),s}};const Nb=(a,s,l)=>a&s^~a&l,Mb=(a,s,l)=>a&s^a&l^s&l,Ob=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ls=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),us=new Uint32Array(64);let kb=class extends Lb{constructor(){super(64,32,8,!1),this.A=ls[0]|0,this.B=ls[1]|0,this.C=ls[2]|0,this.D=ls[3]|0,this.E=ls[4]|0,this.F=ls[5]|0,this.G=ls[6]|0,this.H=ls[7]|0}get(){const{A:s,B:l,C:u,D:d,E:p,F:_,G:b,H:v}=this;return[s,l,u,d,p,_,b,v]}set(s,l,u,d,p,_,b,v){this.A=s|0,this.B=l|0,this.C=u|0,this.D=d|0,this.E=p|0,this.F=_|0,this.G=b|0,this.H=v|0}process(s,l){for(let T=0;T<16;T++,l+=4)us[T]=s.getUint32(l,!1);for(let T=16;T<64;T++){const N=us[T-15],j=us[T-2],B=ji(N,7)^ji(N,18)^N>>>3,z=ji(j,17)^ji(j,19)^j>>>10;us[T]=z+us[T-7]+B+us[T-16]|0}let{A:u,B:d,C:p,D:_,E:b,F:v,G:w,H:A}=this;for(let T=0;T<64;T++){const N=ji(b,6)^ji(b,11)^ji(b,25),j=A+N+Nb(b,v,w)+Ob[T]+us[T]|0,z=(ji(u,2)^ji(u,13)^ji(u,22))+Mb(u,d,p)|0;A=w,w=v,v=b,b=_+j|0,_=p,p=d,d=u,u=j+z|0}u=u+this.A|0,d=d+this.B|0,p=p+this.C|0,_=_+this.D|0,b=b+this.E|0,v=v+this.F|0,w=w+this.G|0,A=A+this.H|0,this.set(u,d,p,_,b,v,w,A)}roundClean(){us.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const qh=zb(()=>new kb);const G0=BigInt(0),fc=BigInt(1),Rb=BigInt(2),hc=a=>a instanceof Uint8Array,Bb=Array.from({length:256},(a,s)=>s.toString(16).padStart(2,"0"));function Wr(a){if(!hc(a))throw new Error("Uint8Array expected");let s="";for(let l=0;l<a.length;l++)s+=Bb[a[l]];return s}function V0(a){const s=a.toString(16);return s.length&1?`0${s}`:s}function cd(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);return BigInt(a===""?"0":`0x${a}`)}function $r(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);const s=a.length;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const l=new Uint8Array(s/2);for(let u=0;u<l.length;u++){const d=u*2,p=a.slice(d,d+2),_=Number.parseInt(p,16);if(Number.isNaN(_)||_<0)throw new Error("Invalid byte sequence");l[u]=_}return l}function Nn(a){return cd(Wr(a))}function fd(a){if(!hc(a))throw new Error("Uint8Array expected");return cd(Wr(Uint8Array.from(a).reverse()))}function ms(a,s){return $r(a.toString(16).padStart(s*2,"0"))}function hd(a,s){return ms(a,s).reverse()}function jb(a){return $r(V0(a))}function un(a,s,l){let u;if(typeof s=="string")try{u=$r(s)}catch(p){throw new Error(`${a} must be valid hex string, got "${s}". Cause: ${p}`)}else if(hc(s))u=Uint8Array.from(s);else throw new Error(`${a} must be hex string or Uint8Array`);const d=u.length;if(typeof l=="number"&&d!==l)throw new Error(`${a} expected ${l} bytes, got ${d}`);return u}function sr(...a){const s=new Uint8Array(a.reduce((u,d)=>u+d.length,0));let l=0;return a.forEach(u=>{if(!hc(u))throw new Error("Uint8Array expected");s.set(u,l),l+=u.length}),s}function Db(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;l++)if(a[l]!==s[l])return!1;return!0}function Ub(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function Hb(a){let s;for(s=0;a>G0;a>>=fc,s+=1);return s}function Pb(a,s){return a>>BigInt(s)&fc}const Zb=(a,s,l)=>a|(l?fc:G0)<<BigInt(s),dd=a=>(Rb<<BigInt(a-1))-fc,Nh=a=>new Uint8Array(a),i0=a=>Uint8Array.from(a);function Y0(a,s,l){if(typeof a!="number"||a<2)throw new Error("hashLen must be a number");if(typeof s!="number"||s<2)throw new Error("qByteLen must be a number");if(typeof l!="function")throw new Error("hmacFn must be a function");let u=Nh(a),d=Nh(a),p=0;const _=()=>{u.fill(1),d.fill(0),p=0},b=(...T)=>l(d,u,...T),v=(T=Nh())=>{d=b(i0([0]),T),u=b(),T.length!==0&&(d=b(i0([1]),T),u=b())},w=()=>{if(p++>=1e3)throw new Error("drbg: tried 1000 values");let T=0;const N=[];for(;T<s;){u=b();const j=u.slice();N.push(j),T+=u.length}return sr(...N)};return(T,N)=>{_(),v(T);let j;for(;!(j=N(w()));)v();return _(),j}}const qb={bigint:a=>typeof a=="bigint",function:a=>typeof a=="function",boolean:a=>typeof a=="boolean",string:a=>typeof a=="string",stringOrUint8Array:a=>typeof a=="string"||a instanceof Uint8Array,isSafeInteger:a=>Number.isSafeInteger(a),array:a=>Array.isArray(a),field:(a,s)=>s.Fp.isValid(a),hash:a=>typeof a=="function"&&Number.isSafeInteger(a.outputLen)};function wl(a,s,l={}){const u=(d,p,_)=>{const b=qb[p];if(typeof b!="function")throw new Error(`Invalid validator "${p}", expected function`);const v=a[d];if(!(_&&v===void 0)&&!b(v,a))throw new Error(`Invalid param ${String(d)}=${v} (${typeof v}), expected ${p}`)};for(const[d,p]of Object.entries(s))u(d,p,!1);for(const[d,p]of Object.entries(l))u(d,p,!0);return a}const Gb=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Pb,bitLen:Hb,bitMask:dd,bitSet:Zb,bytesToHex:Wr,bytesToNumberBE:Nn,bytesToNumberLE:fd,concatBytes:sr,createHmacDrbg:Y0,ensureBytes:un,equalBytes:Db,hexToBytes:$r,hexToNumber:cd,numberToBytesBE:ms,numberToBytesLE:hd,numberToHexUnpadded:V0,numberToVarBytesBE:jb,utf8ToBytes:Ub,validateObject:wl},Symbol.toStringTag,{value:"Module"}));const Qe=BigInt(0),Ne=BigInt(1),er=BigInt(2),Vb=BigInt(3),Gh=BigInt(4),a0=BigInt(5),s0=BigInt(8);BigInt(9);BigInt(16);function en(a,s){const l=a%s;return l>=Qe?l:s+l}function Yb(a,s,l){if(l<=Qe||s<Qe)throw new Error("Expected power/modulo > 0");if(l===Ne)return Qe;let u=Ne;for(;s>Qe;)s&Ne&&(u=u*a%l),a=a*a%l,s>>=Ne;return u}function ti(a,s,l){let u=a;for(;s-- >Qe;)u*=u,u%=l;return u}function Vh(a,s){if(a===Qe||s<=Qe)throw new Error(`invert: expected positive integers, got n=${a} mod=${s}`);let l=en(a,s),u=s,d=Qe,p=Ne;for(;l!==Qe;){const b=u/l,v=u%l,w=d-p*b;u=l,l=v,d=p,p=w}if(u!==Ne)throw new Error("invert: does not exist");return en(d,s)}function Ib(a){const s=(a-Ne)/er;let l,u,d;for(l=a-Ne,u=0;l%er===Qe;l/=er,u++);for(d=er;d<a&&Yb(d,s,a)!==a-Ne;d++);if(u===1){const _=(a+Ne)/Gh;return function(v,w){const A=v.pow(w,_);if(!v.eql(v.sqr(A),w))throw new Error("Cannot find square root");return A}}const p=(l+Ne)/er;return function(b,v){if(b.pow(v,s)===b.neg(b.ONE))throw new Error("Cannot find square root");let w=u,A=b.pow(b.mul(b.ONE,d),l),T=b.pow(v,p),N=b.pow(v,l);for(;!b.eql(N,b.ONE);){if(b.eql(N,b.ZERO))return b.ZERO;let j=1;for(let z=b.sqr(N);j<w&&!b.eql(z,b.ONE);j++)z=b.sqr(z);const B=b.pow(A,Ne<<BigInt(w-j-1));A=b.sqr(B),T=b.mul(T,B),N=b.mul(N,A),w=j}return T}}function Kb(a){if(a%Gh===Vb){const s=(a+Ne)/Gh;return function(u,d){const p=u.pow(d,s);if(!u.eql(u.sqr(p),d))throw new Error("Cannot find square root");return p}}if(a%s0===a0){const s=(a-a0)/s0;return function(u,d){const p=u.mul(d,er),_=u.pow(p,s),b=u.mul(d,_),v=u.mul(u.mul(b,er),_),w=u.mul(b,u.sub(v,u.ONE));if(!u.eql(u.sqr(w),d))throw new Error("Cannot find square root");return w}}return Ib(a)}const Qb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Xb(a){const s={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},l=Qb.reduce((u,d)=>(u[d]="function",u),s);return wl(a,l)}function Fb(a,s,l){if(l<Qe)throw new Error("Expected power > 0");if(l===Qe)return a.ONE;if(l===Ne)return s;let u=a.ONE,d=s;for(;l>Qe;)l&Ne&&(u=a.mul(u,d)),d=a.sqr(d),l>>=Ne;return u}function Jb(a,s){const l=new Array(s.length),u=s.reduce((p,_,b)=>a.is0(_)?p:(l[b]=p,a.mul(p,_)),a.ONE),d=a.inv(u);return s.reduceRight((p,_,b)=>a.is0(_)?p:(l[b]=a.mul(p,l[b]),a.mul(p,_)),d),l}function I0(a,s){const l=s!==void 0?s:a.toString(2).length,u=Math.ceil(l/8);return{nBitLength:l,nByteLength:u}}function Wb(a,s,l=!1,u={}){if(a<=Qe)throw new Error(`Expected Field ORDER > 0, got ${a}`);const{nBitLength:d,nByteLength:p}=I0(a,s);if(p>2048)throw new Error("Field lengths over 2048 bytes are not supported");const _=Kb(a),b=Object.freeze({ORDER:a,BITS:d,BYTES:p,MASK:dd(d),ZERO:Qe,ONE:Ne,create:v=>en(v,a),isValid:v=>{if(typeof v!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof v}`);return Qe<=v&&v<a},is0:v=>v===Qe,isOdd:v=>(v&Ne)===Ne,neg:v=>en(-v,a),eql:(v,w)=>v===w,sqr:v=>en(v*v,a),add:(v,w)=>en(v+w,a),sub:(v,w)=>en(v-w,a),mul:(v,w)=>en(v*w,a),pow:(v,w)=>Fb(b,v,w),div:(v,w)=>en(v*Vh(w,a),a),sqrN:v=>v*v,addN:(v,w)=>v+w,subN:(v,w)=>v-w,mulN:(v,w)=>v*w,inv:v=>Vh(v,a),sqrt:u.sqrt||(v=>_(b,v)),invertBatch:v=>Jb(b,v),cmov:(v,w,A)=>A?w:v,toBytes:v=>l?hd(v,p):ms(v,p),fromBytes:v=>{if(v.length!==p)throw new Error(`Fp.fromBytes: expected ${p}, got ${v.length}`);return l?fd(v):Nn(v)}});return Object.freeze(b)}function K0(a){if(typeof a!="bigint")throw new Error("field order must be bigint");const s=a.toString(2).length;return Math.ceil(s/8)}function Q0(a){const s=K0(a);return s+Math.ceil(s/2)}function $b(a,s,l=!1){const u=a.length,d=K0(s),p=Q0(s);if(u<16||u<p||u>1024)throw new Error(`expected ${p}-1024 bytes of input, got ${u}`);const _=l?Nn(a):fd(a),b=en(_,s-Ne)+Ne;return l?hd(b,d):ms(b,d)}const tx=BigInt(0),Mh=BigInt(1);function ex(a,s){const l=(d,p)=>{const _=p.negate();return d?_:p},u=d=>{const p=Math.ceil(s/d)+1,_=2**(d-1);return{windows:p,windowSize:_}};return{constTimeNegate:l,unsafeLadder(d,p){let _=a.ZERO,b=d;for(;p>tx;)p&Mh&&(_=_.add(b)),b=b.double(),p>>=Mh;return _},precomputeWindow(d,p){const{windows:_,windowSize:b}=u(p),v=[];let w=d,A=w;for(let T=0;T<_;T++){A=w,v.push(A);for(let N=1;N<b;N++)A=A.add(w),v.push(A);w=A.double()}return v},wNAF(d,p,_){const{windows:b,windowSize:v}=u(d);let w=a.ZERO,A=a.BASE;const T=BigInt(2**d-1),N=2**d,j=BigInt(d);for(let B=0;B<b;B++){const z=B*v;let P=Number(_&T);_>>=j,P>v&&(P-=N,_+=Mh);const Z=z,et=z+Math.abs(P)-1,at=B%2!==0,ct=P<0;P===0?A=A.add(l(at,p[Z])):w=w.add(l(ct,p[et]))}return{p:w,f:A}},wNAFCached(d,p,_,b){const v=d._WINDOW_SIZE||1;let w=p.get(d);return w||(w=this.precomputeWindow(d,v),v!==1&&p.set(d,b(w))),this.wNAF(v,w,_)}}}function X0(a){return Xb(a.Fp),wl(a,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...I0(a.n,a.nBitLength),...a,p:a.Fp.ORDER})}function nx(a){const s=X0(a);wl(s,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:l,Fp:u,a:d}=s;if(l){if(!u.eql(d,u.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof l!="object"||typeof l.beta!="bigint"||typeof l.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...s})}const{bytesToNumberBE:ix,hexToBytes:ax}=Gb,ir={Err:class extends Error{constructor(s=""){super(s)}},_parseInt(a){const{Err:s}=ir;if(a.length<2||a[0]!==2)throw new s("Invalid signature integer tag");const l=a[1],u=a.subarray(2,l+2);if(!l||u.length!==l)throw new s("Invalid signature integer: wrong length");if(u[0]&128)throw new s("Invalid signature integer: negative");if(u[0]===0&&!(u[1]&128))throw new s("Invalid signature integer: unnecessary leading zero");return{d:ix(u),l:a.subarray(l+2)}},toSig(a){const{Err:s}=ir,l=typeof a=="string"?ax(a):a;if(!(l instanceof Uint8Array))throw new Error("ui8a expected");let u=l.length;if(u<2||l[0]!=48)throw new s("Invalid signature tag");if(l[1]!==u-2)throw new s("Invalid signature: incorrect length");const{d,l:p}=ir._parseInt(l.subarray(2)),{d:_,l:b}=ir._parseInt(p);if(b.length)throw new s("Invalid signature: left bytes after parsing");return{r:d,s:_}},hexFromSig(a){const s=w=>Number.parseInt(w[0],16)&8?"00"+w:w,l=w=>{const A=w.toString(16);return A.length&1?`0${A}`:A},u=s(l(a.s)),d=s(l(a.r)),p=u.length/2,_=d.length/2,b=l(p),v=l(_);return`30${l(_+p+4)}02${v}${d}02${b}${u}`}},ga=BigInt(0),ei=BigInt(1);BigInt(2);const r0=BigInt(3);BigInt(4);function sx(a){const s=nx(a),{Fp:l}=s,u=s.toBytes||((B,z,P)=>{const Z=z.toAffine();return sr(Uint8Array.from([4]),l.toBytes(Z.x),l.toBytes(Z.y))}),d=s.fromBytes||(B=>{const z=B.subarray(1),P=l.fromBytes(z.subarray(0,l.BYTES)),Z=l.fromBytes(z.subarray(l.BYTES,2*l.BYTES));return{x:P,y:Z}});function p(B){const{a:z,b:P}=s,Z=l.sqr(B),et=l.mul(Z,B);return l.add(l.add(et,l.mul(B,z)),P)}if(!l.eql(l.sqr(s.Gy),p(s.Gx)))throw new Error("bad generator point: equation left != right");function _(B){return typeof B=="bigint"&&ga<B&&B<s.n}function b(B){if(!_(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function v(B){const{allowedPrivateKeyLengths:z,nByteLength:P,wrapPrivateKey:Z,n:et}=s;if(z&&typeof B!="bigint"){if(B instanceof Uint8Array&&(B=Wr(B)),typeof B!="string"||!z.includes(B.length))throw new Error("Invalid key");B=B.padStart(P*2,"0")}let at;try{at=typeof B=="bigint"?B:Nn(un("private key",B,P))}catch{throw new Error(`private key must be ${P} bytes, hex or bigint, not ${typeof B}`)}return Z&&(at=en(at,et)),b(at),at}const w=new Map;function A(B){if(!(B instanceof T))throw new Error("ProjectivePoint expected")}class T{constructor(z,P,Z){if(this.px=z,this.py=P,this.pz=Z,z==null||!l.isValid(z))throw new Error("x required");if(P==null||!l.isValid(P))throw new Error("y required");if(Z==null||!l.isValid(Z))throw new Error("z required")}static fromAffine(z){const{x:P,y:Z}=z||{};if(!z||!l.isValid(P)||!l.isValid(Z))throw new Error("invalid affine point");if(z instanceof T)throw new Error("projective point not allowed");const et=at=>l.eql(at,l.ZERO);return et(P)&&et(Z)?T.ZERO:new T(P,Z,l.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(z){const P=l.invertBatch(z.map(Z=>Z.pz));return z.map((Z,et)=>Z.toAffine(P[et])).map(T.fromAffine)}static fromHex(z){const P=T.fromAffine(d(un("pointHex",z)));return P.assertValidity(),P}static fromPrivateKey(z){return T.BASE.multiply(v(z))}_setWindowSize(z){this._WINDOW_SIZE=z,w.delete(this)}assertValidity(){if(this.is0()){if(s.allowInfinityPoint&&!l.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:z,y:P}=this.toAffine();if(!l.isValid(z)||!l.isValid(P))throw new Error("bad point: x or y not FE");const Z=l.sqr(P),et=p(z);if(!l.eql(Z,et))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:z}=this.toAffine();if(l.isOdd)return!l.isOdd(z);throw new Error("Field doesn't support isOdd")}equals(z){A(z);const{px:P,py:Z,pz:et}=this,{px:at,py:ct,pz:ut}=z,ot=l.eql(l.mul(P,ut),l.mul(at,et)),F=l.eql(l.mul(Z,ut),l.mul(ct,et));return ot&&F}negate(){return new T(this.px,l.neg(this.py),this.pz)}double(){const{a:z,b:P}=s,Z=l.mul(P,r0),{px:et,py:at,pz:ct}=this;let ut=l.ZERO,ot=l.ZERO,F=l.ZERO,$=l.mul(et,et),gt=l.mul(at,at),yt=l.mul(ct,ct),ht=l.mul(et,at);return ht=l.add(ht,ht),F=l.mul(et,ct),F=l.add(F,F),ut=l.mul(z,F),ot=l.mul(Z,yt),ot=l.add(ut,ot),ut=l.sub(gt,ot),ot=l.add(gt,ot),ot=l.mul(ut,ot),ut=l.mul(ht,ut),F=l.mul(Z,F),yt=l.mul(z,yt),ht=l.sub($,yt),ht=l.mul(z,ht),ht=l.add(ht,F),F=l.add($,$),$=l.add(F,$),$=l.add($,yt),$=l.mul($,ht),ot=l.add(ot,$),yt=l.mul(at,ct),yt=l.add(yt,yt),$=l.mul(yt,ht),ut=l.sub(ut,$),F=l.mul(yt,gt),F=l.add(F,F),F=l.add(F,F),new T(ut,ot,F)}add(z){A(z);const{px:P,py:Z,pz:et}=this,{px:at,py:ct,pz:ut}=z;let ot=l.ZERO,F=l.ZERO,$=l.ZERO;const gt=s.a,yt=l.mul(s.b,r0);let ht=l.mul(P,at),vt=l.mul(Z,ct),kt=l.mul(et,ut),Ct=l.add(P,Z),st=l.add(at,ct);Ct=l.mul(Ct,st),st=l.add(ht,vt),Ct=l.sub(Ct,st),st=l.add(P,et);let O=l.add(at,ut);return st=l.mul(st,O),O=l.add(ht,kt),st=l.sub(st,O),O=l.add(Z,et),ot=l.add(ct,ut),O=l.mul(O,ot),ot=l.add(vt,kt),O=l.sub(O,ot),$=l.mul(gt,st),ot=l.mul(yt,kt),$=l.add(ot,$),ot=l.sub(vt,$),$=l.add(vt,$),F=l.mul(ot,$),vt=l.add(ht,ht),vt=l.add(vt,ht),kt=l.mul(gt,kt),st=l.mul(yt,st),vt=l.add(vt,kt),kt=l.sub(ht,kt),kt=l.mul(gt,kt),st=l.add(st,kt),ht=l.mul(vt,st),F=l.add(F,ht),ht=l.mul(O,st),ot=l.mul(Ct,ot),ot=l.sub(ot,ht),ht=l.mul(Ct,vt),$=l.mul(O,$),$=l.add($,ht),new T(ot,F,$)}subtract(z){return this.add(z.negate())}is0(){return this.equals(T.ZERO)}wNAF(z){return j.wNAFCached(this,w,z,P=>{const Z=l.invertBatch(P.map(et=>et.pz));return P.map((et,at)=>et.toAffine(Z[at])).map(T.fromAffine)})}multiplyUnsafe(z){const P=T.ZERO;if(z===ga)return P;if(b(z),z===ei)return this;const{endo:Z}=s;if(!Z)return j.unsafeLadder(this,z);let{k1neg:et,k1:at,k2neg:ct,k2:ut}=Z.splitScalar(z),ot=P,F=P,$=this;for(;at>ga||ut>ga;)at&ei&&(ot=ot.add($)),ut&ei&&(F=F.add($)),$=$.double(),at>>=ei,ut>>=ei;return et&&(ot=ot.negate()),ct&&(F=F.negate()),F=new T(l.mul(F.px,Z.beta),F.py,F.pz),ot.add(F)}multiply(z){b(z);let P=z,Z,et;const{endo:at}=s;if(at){const{k1neg:ct,k1:ut,k2neg:ot,k2:F}=at.splitScalar(P);let{p:$,f:gt}=this.wNAF(ut),{p:yt,f:ht}=this.wNAF(F);$=j.constTimeNegate(ct,$),yt=j.constTimeNegate(ot,yt),yt=new T(l.mul(yt.px,at.beta),yt.py,yt.pz),Z=$.add(yt),et=gt.add(ht)}else{const{p:ct,f:ut}=this.wNAF(P);Z=ct,et=ut}return T.normalizeZ([Z,et])[0]}multiplyAndAddUnsafe(z,P,Z){const et=T.BASE,at=(ut,ot)=>ot===ga||ot===ei||!ut.equals(et)?ut.multiplyUnsafe(ot):ut.multiply(ot),ct=at(this,P).add(at(z,Z));return ct.is0()?void 0:ct}toAffine(z){const{px:P,py:Z,pz:et}=this,at=this.is0();z==null&&(z=at?l.ONE:l.inv(et));const ct=l.mul(P,z),ut=l.mul(Z,z),ot=l.mul(et,z);if(at)return{x:l.ZERO,y:l.ZERO};if(!l.eql(ot,l.ONE))throw new Error("invZ was invalid");return{x:ct,y:ut}}isTorsionFree(){const{h:z,isTorsionFree:P}=s;if(z===ei)return!0;if(P)return P(T,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:z,clearCofactor:P}=s;return z===ei?this:P?P(T,this):this.multiplyUnsafe(s.h)}toRawBytes(z=!0){return this.assertValidity(),u(T,this,z)}toHex(z=!0){return Wr(this.toRawBytes(z))}}T.BASE=new T(s.Gx,s.Gy,l.ONE),T.ZERO=new T(l.ZERO,l.ONE,l.ZERO);const N=s.nBitLength,j=ex(T,s.endo?Math.ceil(N/2):N);return{CURVE:s,ProjectivePoint:T,normPrivateKeyToScalar:v,weierstrassEquation:p,isWithinCurveOrder:_}}function rx(a){const s=X0(a);return wl(s,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...s})}function ox(a){const s=rx(a),{Fp:l,n:u}=s,d=l.BYTES+1,p=2*l.BYTES+1;function _(st){return ga<st&&st<l.ORDER}function b(st){return en(st,u)}function v(st){return Vh(st,u)}const{ProjectivePoint:w,normPrivateKeyToScalar:A,weierstrassEquation:T,isWithinCurveOrder:N}=sx({...s,toBytes(st,O,I){const K=O.toAffine(),mt=l.toBytes(K.x),tt=sr;return I?tt(Uint8Array.from([O.hasEvenY()?2:3]),mt):tt(Uint8Array.from([4]),mt,l.toBytes(K.y))},fromBytes(st){const O=st.length,I=st[0],K=st.subarray(1);if(O===d&&(I===2||I===3)){const mt=Nn(K);if(!_(mt))throw new Error("Point is not on curve");const tt=T(mt);let C=l.sqrt(tt);const H=(C&ei)===ei;return(I&1)===1!==H&&(C=l.neg(C)),{x:mt,y:C}}else if(O===p&&I===4){const mt=l.fromBytes(K.subarray(0,l.BYTES)),tt=l.fromBytes(K.subarray(l.BYTES,2*l.BYTES));return{x:mt,y:tt}}else throw new Error(`Point of length ${O} was invalid. Expected ${d} compressed bytes or ${p} uncompressed bytes`)}}),j=st=>Wr(ms(st,s.nByteLength));function B(st){const O=u>>ei;return st>O}function z(st){return B(st)?b(-st):st}const P=(st,O,I)=>Nn(st.slice(O,I));class Z{constructor(O,I,K){this.r=O,this.s=I,this.recovery=K,this.assertValidity()}static fromCompact(O){const I=s.nByteLength;return O=un("compactSignature",O,I*2),new Z(P(O,0,I),P(O,I,2*I))}static fromDER(O){const{r:I,s:K}=ir.toSig(un("DER",O));return new Z(I,K)}assertValidity(){if(!N(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!N(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(O){return new Z(this.r,this.s,O)}recoverPublicKey(O){const{r:I,s:K,recovery:mt}=this,tt=F(un("msgHash",O));if(mt==null||![0,1,2,3].includes(mt))throw new Error("recovery id invalid");const C=mt===2||mt===3?I+s.n:I;if(C>=l.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=(mt&1)===0?"02":"03",rt=w.fromHex(H+j(C)),lt=v(C),ft=b(-tt*lt),dt=b(K*lt),Tt=w.BASE.multiplyAndAddUnsafe(rt,ft,dt);if(!Tt)throw new Error("point at infinify");return Tt.assertValidity(),Tt}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new Z(this.r,b(-this.s),this.recovery):this}toDERRawBytes(){return $r(this.toDERHex())}toDERHex(){return ir.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return $r(this.toCompactHex())}toCompactHex(){return j(this.r)+j(this.s)}}const et={isValidPrivateKey(st){try{return A(st),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const st=Q0(s.n);return $b(s.randomBytes(st),s.n)},precompute(st=8,O=w.BASE){return O._setWindowSize(st),O.multiply(BigInt(3)),O}};function at(st,O=!0){return w.fromPrivateKey(st).toRawBytes(O)}function ct(st){const O=st instanceof Uint8Array,I=typeof st=="string",K=(O||I)&&st.length;return O?K===d||K===p:I?K===2*d||K===2*p:st instanceof w}function ut(st,O,I=!0){if(ct(st))throw new Error("first arg must be private key");if(!ct(O))throw new Error("second arg must be public key");return w.fromHex(O).multiply(A(st)).toRawBytes(I)}const ot=s.bits2int||function(st){const O=Nn(st),I=st.length*8-s.nBitLength;return I>0?O>>BigInt(I):O},F=s.bits2int_modN||function(st){return b(ot(st))},$=dd(s.nBitLength);function gt(st){if(typeof st!="bigint")throw new Error("bigint expected");if(!(ga<=st&&st<$))throw new Error(`bigint expected < 2^${s.nBitLength}`);return ms(st,s.nByteLength)}function yt(st,O,I=ht){if(["recovered","canonical"].some(Rt=>Rt in I))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:mt}=s;let{lowS:tt,prehash:C,extraEntropy:H}=I;tt==null&&(tt=!0),st=un("msgHash",st),C&&(st=un("prehashed msgHash",K(st)));const rt=F(st),lt=A(O),ft=[gt(lt),gt(rt)];if(H!=null){const Rt=H===!0?mt(l.BYTES):H;ft.push(un("extraEntropy",Rt))}const dt=sr(...ft),Tt=rt;function Jt(Rt){const xe=ot(Rt);if(!N(xe))return;const fn=v(xe),fe=w.BASE.multiply(xe).toAffine(),Ue=b(fe.x);if(Ue===ga)return;const He=b(fn*b(Tt+Ue*lt));if(He===ga)return;let hn=(fe.x===Ue?0:2)|Number(fe.y&ei),Mn=He;return tt&&B(He)&&(Mn=z(He),hn^=1),new Z(Ue,Mn,hn)}return{seed:dt,k2sig:Jt}}const ht={lowS:s.lowS,prehash:!1},vt={lowS:s.lowS,prehash:!1};function kt(st,O,I=ht){const{seed:K,k2sig:mt}=yt(st,O,I),tt=s;return Y0(tt.hash.outputLen,tt.nByteLength,tt.hmac)(K,mt)}w.BASE._setWindowSize(8);function Ct(st,O,I,K=vt){const mt=st;if(O=un("msgHash",O),I=un("publicKey",I),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:tt,prehash:C}=K;let H,rt;try{if(typeof mt=="string"||mt instanceof Uint8Array)try{H=Z.fromDER(mt)}catch(fe){if(!(fe instanceof ir.Err))throw fe;H=Z.fromCompact(mt)}else if(typeof mt=="object"&&typeof mt.r=="bigint"&&typeof mt.s=="bigint"){const{r:fe,s:Ue}=mt;H=new Z(fe,Ue)}else throw new Error("PARSE");rt=w.fromHex(I)}catch(fe){if(fe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(tt&&H.hasHighS())return!1;C&&(O=s.hash(O));const{r:lt,s:ft}=H,dt=F(O),Tt=v(ft),Jt=b(dt*Tt),Rt=b(lt*Tt),xe=w.BASE.multiplyAndAddUnsafe(rt,Jt,Rt)?.toAffine();return xe?b(xe.x)===lt:!1}return{CURVE:s,getPublicKey:at,getSharedSecret:ut,sign:kt,verify:Ct,ProjectivePoint:w,Signature:Z,utils:et}}let F0=class extends Z0{constructor(s,l){super(),this.finished=!1,this.destroyed=!1,wb(s);const u=ud(l);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const d=this.blockLen,p=new Uint8Array(d);p.set(u.length>d?s.create().update(u).digest():u);for(let _=0;_<p.length;_++)p[_]^=54;this.iHash.update(p),this.oHash=s.create();for(let _=0;_<p.length;_++)p[_]^=106;this.oHash.update(p),p.fill(0)}update(s){return ec(this),this.iHash.update(s),this}digestInto(s){ec(this),H0(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:l,iHash:u,finished:d,destroyed:p,blockLen:_,outputLen:b}=this;return s=s,s.finished=d,s.destroyed=p,s.blockLen=_,s.outputLen=b,s.oHash=l._cloneInto(s.oHash),s.iHash=u._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const J0=(a,s,l)=>new F0(a,s).update(l).digest();J0.create=(a,s)=>new F0(a,s);function lx(a){return{hash:a,hmac:(s,...l)=>J0(a,s,Ab(...l)),randomBytes:q0}}function ux(a,s){const l=u=>ox({...a,...lx(u)});return Object.freeze({...l(s),create:l})}const dc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),nc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),W0=BigInt(1),ic=BigInt(2),o0=(a,s)=>(a+s/ic)/s;function $0(a){const s=dc,l=BigInt(3),u=BigInt(6),d=BigInt(11),p=BigInt(22),_=BigInt(23),b=BigInt(44),v=BigInt(88),w=a*a*a%s,A=w*w*a%s,T=ti(A,l,s)*A%s,N=ti(T,l,s)*A%s,j=ti(N,ic,s)*w%s,B=ti(j,d,s)*j%s,z=ti(B,p,s)*B%s,P=ti(z,b,s)*z%s,Z=ti(P,v,s)*P%s,et=ti(Z,b,s)*z%s,at=ti(et,l,s)*A%s,ct=ti(at,_,s)*B%s,ut=ti(ct,u,s)*w%s,ot=ti(ut,ic,s);if(!Yh.eql(Yh.sqr(ot),a))throw new Error("Cannot find square root");return ot}const Yh=Wb(dc,void 0,void 0,{sqrt:$0}),no=ux({a:BigInt(0),b:BigInt(7),Fp:Yh,n:nc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:a=>{const s=nc,l=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),u=-W0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),d=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),p=l,_=BigInt("0x100000000000000000000000000000000"),b=o0(p*a,s),v=o0(-u*a,s);let w=en(a-b*l-v*d,s),A=en(-b*u-v*p,s);const T=w>_,N=A>_;if(T&&(w=s-w),N&&(A=s-A),w>_||A>_)throw new Error("splitScalar: Endomorphism failed, k="+a);return{k1neg:T,k1:w,k2neg:N,k2:A}}}},qh),mc=BigInt(0),ty=a=>typeof a=="bigint"&&mc<a&&a<dc,cx=a=>typeof a=="bigint"&&mc<a&&a<nc,l0={};function ac(a,...s){let l=l0[a];if(l===void 0){const u=qh(Uint8Array.from(a,d=>d.charCodeAt(0)));l=sr(u,u),l0[a]=l}return qh(sr(l,...s))}const md=a=>a.toRawBytes(!0).slice(1),Ih=a=>ms(a,32),Oh=a=>en(a,dc),ml=a=>en(a,nc),pd=no.ProjectivePoint,fx=(a,s,l)=>pd.BASE.multiplyAndAddUnsafe(a,s,l);function Kh(a){let s=no.utils.normPrivateKeyToScalar(a),l=pd.fromPrivateKey(s);return{scalar:l.hasEvenY()?s:ml(-s),bytes:md(l)}}function ey(a){if(!ty(a))throw new Error("bad x: need 0 < x < p");const s=Oh(a*a),l=Oh(s*a+BigInt(7));let u=$0(l);u%ic!==mc&&(u=Oh(-u));const d=new pd(a,u,W0);return d.assertValidity(),d}function ny(...a){return ml(Nn(ac("BIP0340/challenge",...a)))}function hx(a){return Kh(a).bytes}function dx(a,s,l=q0(32)){const u=un("message",a),{bytes:d,scalar:p}=Kh(s),_=un("auxRand",l,32),b=Ih(p^Nn(ac("BIP0340/aux",_))),v=ac("BIP0340/nonce",b,d,u),w=ml(Nn(v));if(w===mc)throw new Error("sign failed: k is zero");const{bytes:A,scalar:T}=Kh(w),N=ny(A,d,u),j=new Uint8Array(64);if(j.set(A,0),j.set(Ih(ml(T+N*p)),32),!iy(j,u,d))throw new Error("sign: Invalid signature produced");return j}function iy(a,s,l){const u=un("signature",a,64),d=un("message",s),p=un("publicKey",l,32);try{const _=ey(Nn(p)),b=Nn(u.subarray(0,32));if(!ty(b))return!1;const v=Nn(u.subarray(32,64));if(!cx(v))return!1;const w=ny(Ih(b),md(_),d),A=fx(_,v,ml(-w));return!(!A||!A.hasEvenY()||A.toAffine().x!==b)}catch{return!1}}const Ui={getPublicKey:hx,sign:dx,verify:iy,utils:{randomPrivateKey:no.utils.randomPrivateKey,lift_x:ey,pointToBytes:md,numberToBytesBE:ms,bytesToNumberBE:Nn,taggedHash:ac,mod:en}},kh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const gd=a=>a instanceof Uint8Array,Rh=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),Di=(a,s)=>a<<32-s|a>>>s,mx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!mx)throw new Error("Non little-endian hardware is not supported");const px=Array.from({length:256},(a,s)=>s.toString(16).padStart(2,"0"));function De(a){if(!gd(a))throw new Error("Uint8Array expected");let s="";for(let l=0;l<a.length;l++)s+=px[a[l]];return s}function rr(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);const s=a.length;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const l=new Uint8Array(s/2);for(let u=0;u<l.length;u++){const d=u*2,p=a.slice(d,d+2),_=Number.parseInt(p,16);if(Number.isNaN(_)||_<0)throw new Error("Invalid byte sequence");l[u]=_}return l}function gx(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function pl(a){if(typeof a=="string"&&(a=gx(a)),!gd(a))throw new Error(`expected Uint8Array, got ${typeof a}`);return a}function pc(...a){const s=new Uint8Array(a.reduce((u,d)=>u+d.length,0));let l=0;return a.forEach(u=>{if(!gd(u))throw new Error("Uint8Array expected");s.set(u,l),l+=u.length}),s}class ay{clone(){return this._cloneInto()}}function sy(a){const s=u=>a().update(pl(u)).digest(),l=a();return s.outputLen=l.outputLen,s.blockLen=l.blockLen,s.create=()=>a(),s}function ry(a=32){if(kh&&typeof kh.getRandomValues=="function")return kh.getRandomValues(new Uint8Array(a));throw new Error("crypto.getRandomValues must be defined")}function Qh(a){if(!Number.isSafeInteger(a)||a<0)throw new Error(`Wrong positive integer: ${a}`)}function yx(a){if(typeof a!="boolean")throw new Error(`Expected boolean, not ${a}`)}function oy(a,...s){if(!(a instanceof Uint8Array))throw new Error("Expected Uint8Array");if(s.length>0&&!s.includes(a.length))throw new Error(`Expected Uint8Array of length ${s}, not of length=${a.length}`)}function vx(a){if(typeof a!="function"||typeof a.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qh(a.outputLen),Qh(a.blockLen)}function _x(a,s=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(s&&a.finished)throw new Error("Hash#digest() has already been called")}function bx(a,s){oy(a);const l=s.outputLen;if(a.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}const Hi={number:Qh,bool:yx,bytes:oy,hash:vx,exists:_x,output:bx};function xx(a,s,l,u){if(typeof a.setBigUint64=="function")return a.setBigUint64(s,l,u);const d=BigInt(32),p=BigInt(4294967295),_=Number(l>>d&p),b=Number(l&p),v=u?4:0,w=u?0:4;a.setUint32(s+v,_,u),a.setUint32(s+w,b,u)}class wx extends ay{constructor(s,l,u,d){super(),this.blockLen=s,this.outputLen=l,this.padOffset=u,this.isLE=d,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=Rh(this.buffer)}update(s){Hi.exists(this);const{view:l,buffer:u,blockLen:d}=this;s=pl(s);const p=s.length;for(let _=0;_<p;){const b=Math.min(d-this.pos,p-_);if(b===d){const v=Rh(s);for(;d<=p-_;_+=d)this.process(v,_);continue}u.set(s.subarray(_,_+b),this.pos),this.pos+=b,_+=b,this.pos===d&&(this.process(l,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){Hi.exists(this),Hi.output(s,this),this.finished=!0;const{buffer:l,view:u,blockLen:d,isLE:p}=this;let{pos:_}=this;l[_++]=128,this.buffer.subarray(_).fill(0),this.padOffset>d-_&&(this.process(u,0),_=0);for(let T=_;T<d;T++)l[T]=0;xx(u,d-8,BigInt(this.length*8),p),this.process(u,0);const b=Rh(s),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=v/4,A=this.get();if(w>A.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<w;T++)b.setUint32(4*T,A[T],p)}digest(){const{buffer:s,outputLen:l}=this;this.digestInto(s);const u=s.slice(0,l);return this.destroy(),u}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:l,buffer:u,length:d,finished:p,destroyed:_,pos:b}=this;return s.length=d,s.pos=b,s.finished=p,s.destroyed=_,d%l&&s.buffer.set(u),s}}const Sx=(a,s,l)=>a&s^~a&l,Ex=(a,s,l)=>a&s^a&l^s&l,Tx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fs=new Uint32Array(64);class ly extends wx{constructor(){super(64,32,8,!1),this.A=cs[0]|0,this.B=cs[1]|0,this.C=cs[2]|0,this.D=cs[3]|0,this.E=cs[4]|0,this.F=cs[5]|0,this.G=cs[6]|0,this.H=cs[7]|0}get(){const{A:s,B:l,C:u,D:d,E:p,F:_,G:b,H:v}=this;return[s,l,u,d,p,_,b,v]}set(s,l,u,d,p,_,b,v){this.A=s|0,this.B=l|0,this.C=u|0,this.D=d|0,this.E=p|0,this.F=_|0,this.G=b|0,this.H=v|0}process(s,l){for(let T=0;T<16;T++,l+=4)fs[T]=s.getUint32(l,!1);for(let T=16;T<64;T++){const N=fs[T-15],j=fs[T-2],B=Di(N,7)^Di(N,18)^N>>>3,z=Di(j,17)^Di(j,19)^j>>>10;fs[T]=z+fs[T-7]+B+fs[T-16]|0}let{A:u,B:d,C:p,D:_,E:b,F:v,G:w,H:A}=this;for(let T=0;T<64;T++){const N=Di(b,6)^Di(b,11)^Di(b,25),j=A+N+Sx(b,v,w)+Tx[T]+fs[T]|0,z=(Di(u,2)^Di(u,13)^Di(u,22))+Ex(u,d,p)|0;A=w,w=v,v=b,b=_+j|0,_=p,p=d,d=u,u=j+z|0}u=u+this.A|0,d=d+this.B|0,p=p+this.C|0,_=_+this.D|0,b=b+this.E|0,v=v+this.F|0,w=w+this.G|0,A=A+this.H|0,this.set(u,d,p,_,b,v,w,A)}roundClean(){fs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ax extends ly{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ps=sy(()=>new ly);sy(()=>new Ax);function io(a){if(!Number.isSafeInteger(a))throw new Error(`Wrong integer: ${a}`)}function xa(...a){const s=(d,p)=>_=>d(p(_)),l=Array.from(a).reverse().reduce((d,p)=>d?s(d,p.encode):p.encode,void 0),u=a.reduce((d,p)=>d?s(d,p.decode):p.decode,void 0);return{encode:l,decode:u}}function wa(a){return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return s.map(l=>{if(io(l),l<0||l>=a.length)throw new Error(`Digit index outside alphabet: ${l} (alphabet: ${a.length})`);return a[l]})},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("alphabet.decode input should be array of strings");return s.map(l=>{if(typeof l!="string")throw new Error(`alphabet.decode: not string element=${l}`);const u=a.indexOf(l);if(u===-1)throw new Error(`Unknown letter: "${l}". Allowed: ${a}`);return u})}}}function Sa(a=""){if(typeof a!="string")throw new Error("join separator should be string");return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("join.encode input should be array of strings");for(let l of s)if(typeof l!="string")throw new Error(`join.encode: non-string input=${l}`);return s.join(a)},decode:s=>{if(typeof s!="string")throw new Error("join.decode input should be string");return s.split(a)}}}function gc(a,s="="){if(io(a),typeof s!="string")throw new Error("padding chr should be string");return{encode(l){if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("padding.encode input should be array of strings");for(let u of l)if(typeof u!="string")throw new Error(`padding.encode: non-string input=${u}`);for(;l.length*a%8;)l.push(s);return l},decode(l){if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("padding.encode input should be array of strings");for(let d of l)if(typeof d!="string")throw new Error(`padding.decode: non-string input=${d}`);let u=l.length;if(u*a%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;u>0&&l[u-1]===s;u--)if(!((u-1)*a%8))throw new Error("Invalid padding: string has too much padding");return l.slice(0,u)}}}function uy(a){if(typeof a!="function")throw new Error("normalize fn should be function");return{encode:s=>s,decode:s=>a(s)}}function u0(a,s,l){if(s<2)throw new Error(`convertRadix: wrong from=${s}, base cannot be less than 2`);if(l<2)throw new Error(`convertRadix: wrong to=${l}, base cannot be less than 2`);if(!Array.isArray(a))throw new Error("convertRadix: data should be array");if(!a.length)return[];let u=0;const d=[],p=Array.from(a);for(p.forEach(_=>{if(io(_),_<0||_>=s)throw new Error(`Wrong integer: ${_}`)});;){let _=0,b=!0;for(let v=u;v<p.length;v++){const w=p[v],A=s*_+w;if(!Number.isSafeInteger(A)||s*_/s!==_||A-w!==s*_)throw new Error("convertRadix: carry overflow");if(_=A%l,p[v]=Math.floor(A/l),!Number.isSafeInteger(p[v])||p[v]*l+_!==A)throw new Error("convertRadix: carry overflow");if(b)p[v]?b=!1:u=v;else continue}if(d.push(_),b)break}for(let _=0;_<a.length-1&&a[_]===0;_++)d.push(0);return d.reverse()}const cy=(a,s)=>s?cy(s,a%s):a,sc=(a,s)=>a+(s-cy(a,s));function Xh(a,s,l,u){if(!Array.isArray(a))throw new Error("convertRadix2: data should be array");if(s<=0||s>32)throw new Error(`convertRadix2: wrong from=${s}`);if(l<=0||l>32)throw new Error(`convertRadix2: wrong to=${l}`);if(sc(s,l)>32)throw new Error(`convertRadix2: carry overflow from=${s} to=${l} carryBits=${sc(s,l)}`);let d=0,p=0;const _=2**l-1,b=[];for(const v of a){if(io(v),v>=2**s)throw new Error(`convertRadix2: invalid data word=${v} from=${s}`);if(d=d<<s|v,p+s>32)throw new Error(`convertRadix2: carry overflow pos=${p} from=${s}`);for(p+=s;p>=l;p-=l)b.push((d>>p-l&_)>>>0);d&=2**p-1}if(d=d<<l-p&_,!u&&p>=s)throw new Error("Excess padding");if(!u&&d)throw new Error(`Non-zero padding: ${d}`);return u&&p>0&&b.push(d>>>0),b}function zx(a){return io(a),{encode:s=>{if(!(s instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return u0(Array.from(s),2**8,a)},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(u0(s,a,2**8))}}}function gs(a,s=!1){if(io(a),a<=0||a>32)throw new Error("radix2: bits should be in (0..32]");if(sc(8,a)>32||sc(a,8)>32)throw new Error("radix2: carry overflow");return{encode:l=>{if(!(l instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Xh(Array.from(l),8,a,!s)},decode:l=>{if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Xh(l,a,8,s))}}}function c0(a){if(typeof a!="function")throw new Error("unsafeWrapper fn should be function");return function(...s){try{return a.apply(null,s)}catch{}}}const Cx=xa(gs(4),wa("0123456789ABCDEF"),Sa("")),Lx=xa(gs(5),wa("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),gc(5),Sa(""));xa(gs(5),wa("0123456789ABCDEFGHIJKLMNOPQRSTUV"),gc(5),Sa(""));xa(gs(5),wa("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Sa(""),uy(a=>a.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const _a=xa(gs(6),wa("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),gc(6),Sa("")),Nx=xa(gs(6),wa("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),gc(6),Sa("")),yd=a=>xa(zx(58),wa(a),Sa("")),Fh=yd("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");yd("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");yd("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const f0=[0,2,3,5,6,7,9,10,11],Mx={encode(a){let s="";for(let l=0;l<a.length;l+=8){const u=a.subarray(l,l+8);s+=Fh.encode(u).padStart(f0[u.length],"1")}return s},decode(a){let s=[];for(let l=0;l<a.length;l+=11){const u=a.slice(l,l+11),d=f0.indexOf(u.length),p=Fh.decode(u);for(let _=0;_<p.length-d;_++)if(p[_]!==0)throw new Error("base58xmr: wrong padding");s=s.concat(Array.from(p.slice(p.length-d)))}return Uint8Array.from(s)}},Jh=xa(wa("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Sa("")),h0=[996825010,642813549,513874426,1027748829,705979059];function hl(a){const s=a>>25;let l=(a&33554431)<<5;for(let u=0;u<h0.length;u++)(s>>u&1)===1&&(l^=h0[u]);return l}function d0(a,s,l=1){const u=a.length;let d=1;for(let p=0;p<u;p++){const _=a.charCodeAt(p);if(_<33||_>126)throw new Error(`Invalid prefix (${a})`);d=hl(d)^_>>5}d=hl(d);for(let p=0;p<u;p++)d=hl(d)^a.charCodeAt(p)&31;for(let p of s)d=hl(d)^p;for(let p=0;p<6;p++)d=hl(d);return d^=l,Jh.encode(Xh([d%2**30],30,5,!1))}function fy(a){const s=a==="bech32"?1:734539939,l=gs(5),u=l.decode,d=l.encode,p=c0(u);function _(A,T,N=90){if(typeof A!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof A}`);if(!Array.isArray(T)||T.length&&typeof T[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof T}`);const j=A.length+7+T.length;if(N!==!1&&j>N)throw new TypeError(`Length ${j} exceeds limit ${N}`);return A=A.toLowerCase(),`${A}1${Jh.encode(T)}${d0(A,T,s)}`}function b(A,T=90){if(typeof A!="string")throw new Error(`bech32.decode input should be string, not ${typeof A}`);if(A.length<8||T!==!1&&A.length>T)throw new TypeError(`Wrong string length: ${A.length} (${A}). Expected (8..${T})`);const N=A.toLowerCase();if(A!==N&&A!==A.toUpperCase())throw new Error("String must be lowercase or uppercase");A=N;const j=A.lastIndexOf("1");if(j===0||j===-1)throw new Error('Letter "1" must be present between prefix and data only');const B=A.slice(0,j),z=A.slice(j+1);if(z.length<6)throw new Error("Data must be at least 6 characters long");const P=Jh.decode(z).slice(0,-6),Z=d0(B,P,s);if(!z.endsWith(Z))throw new Error(`Invalid checksum in ${A}: expected "${Z}"`);return{prefix:B,words:P}}const v=c0(b);function w(A){const{prefix:T,words:N}=b(A,!1);return{prefix:T,words:N,bytes:u(N)}}return{encode:_,decode:b,decodeToBytes:w,decodeUnsafe:v,fromWords:u,fromWordsUnsafe:p,toWords:d}}const to=fy("bech32");fy("bech32m");const Ox={encode:a=>new TextDecoder().decode(a),decode:a=>new TextEncoder().encode(a)},kx=xa(gs(4),wa("0123456789abcdef"),Sa(""),uy(a=>{if(typeof a!="string"||a.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof a} with length ${a.length}`);return a.toLowerCase()})),Rx={utf8:Ox,hex:kx,base16:Cx,base32:Lx,base64:_a,base64url:Nx,base58:Fh,base58xmr:Mx};`${Object.keys(Rx).join(", ")}`;function Bh(a){if(!Number.isSafeInteger(a)||a<0)throw new Error(`positive integer expected, not ${a}`)}function m0(a){if(typeof a!="boolean")throw new Error(`boolean expected, not ${a}`)}function Bx(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function Pi(a,...s){if(!Bx(a))throw new Error("Uint8Array expected");if(s.length>0&&!s.includes(a.length))throw new Error(`Uint8Array expected of length ${s}, not of length=${a.length}`)}const cn=a=>new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)),jx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!jx)throw new Error("Non little-endian hardware is not supported");const Dx=Array.from({length:256},(a,s)=>s.toString(16).padStart(2,"0"));function Qr(a){Pi(a);let s="";for(let l=0;l<a.length;l++)s+=Dx[a[l]];return s}const ma={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p0(a){if(a>=ma._0&&a<=ma._9)return a-ma._0;if(a>=ma._A&&a<=ma._F)return a-(ma._A-10);if(a>=ma._a&&a<=ma._f)return a-(ma._a-10)}function hy(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);const s=a.length,l=s/2;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const u=new Uint8Array(l);for(let d=0,p=0;d<l;d++,p+=2){const _=p0(a.charCodeAt(p)),b=p0(a.charCodeAt(p+1));if(_===void 0||b===void 0){const v=a[p]+a[p+1];throw new Error('hex string expected, got non-hex character "'+v+'" at index '+p)}u[d]=_*16+b}return u}function Ux(a,s){if(s==null||typeof s!="object")throw new Error("options must be defined");return Object.assign(a,s)}function Hx(a,s){if(a.length!==s.length)return!1;let l=0;for(let u=0;u<a.length;u++)l|=a[u]^s[u];return l===0}const Px=(a,s)=>(Object.assign(s,a),s),ds=16,Zx=283;function vd(a){return a<<1^Zx&-(a>>7)}function Xr(a,s){let l=0;for(;s>0;s>>=1)l^=a&-(s&1),a=vd(a);return l}const Wh=(()=>{let a=new Uint8Array(256);for(let l=0,u=1;l<256;l++,u^=vd(u))a[l]=u;const s=new Uint8Array(256);s[0]=99;for(let l=0;l<255;l++){let u=a[255-l];u|=u<<8,s[a[l]]=(u^u>>4^u>>5^u>>6^u>>7^99)&255}return s})(),qx=Wh.map((a,s)=>Wh.indexOf(s)),Gx=a=>a<<24|a>>>8,jh=a=>a<<8|a>>>24;function dy(a,s){if(a.length!==256)throw new Error("Wrong sbox length");const l=new Uint32Array(256).map((w,A)=>s(a[A])),u=l.map(jh),d=u.map(jh),p=d.map(jh),_=new Uint32Array(256*256),b=new Uint32Array(256*256),v=new Uint16Array(256*256);for(let w=0;w<256;w++)for(let A=0;A<256;A++){const T=w*256+A;_[T]=l[w]^u[A],b[T]=d[w]^p[A],v[T]=a[w]<<8|a[A]}return{sbox:a,sbox2:v,T0:l,T1:u,T2:d,T3:p,T01:_,T23:b}}const _d=dy(Wh,a=>Xr(a,3)<<24|a<<16|a<<8|Xr(a,2)),my=dy(qx,a=>Xr(a,11)<<24|Xr(a,13)<<16|Xr(a,9)<<8|Xr(a,14)),Vx=(()=>{const a=new Uint8Array(16);for(let s=0,l=1;s<16;s++,l=vd(l))a[s]=l;return a})();function py(a){Pi(a);const s=a.length;if(![16,24,32].includes(s))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${s}`);const{sbox2:l}=_d,u=cn(a),d=u.length,p=b=>Zi(l,b,b,b,b),_=new Uint32Array(s+28);_.set(u);for(let b=d;b<_.length;b++){let v=_[b-1];b%d===0?v=p(Gx(v))^Vx[b/d-1]:d>6&&b%d===4&&(v=p(v)),_[b]=_[b-d]^v}return _}function Yx(a){const s=py(a),l=s.slice(),u=s.length,{sbox2:d}=_d,{T0:p,T1:_,T2:b,T3:v}=my;for(let w=0;w<u;w+=4)for(let A=0;A<4;A++)l[w+A]=s[u-w-4+A];s.fill(0);for(let w=4;w<u-4;w++){const A=l[w],T=Zi(d,A,A,A,A);l[w]=p[T&255]^_[T>>>8&255]^b[T>>>16&255]^v[T>>>24]}return l}function hs(a,s,l,u,d,p){return a[l<<8&65280|u>>>8&255]^s[d>>>8&65280|p>>>24&255]}function Zi(a,s,l,u,d){return a[s&255|l&65280]|a[u>>>16&255|d>>>16&65280]<<16}function g0(a,s,l,u,d){const{sbox2:p,T01:_,T23:b}=_d;let v=0;s^=a[v++],l^=a[v++],u^=a[v++],d^=a[v++];const w=a.length/4-2;for(let B=0;B<w;B++){const z=a[v++]^hs(_,b,s,l,u,d),P=a[v++]^hs(_,b,l,u,d,s),Z=a[v++]^hs(_,b,u,d,s,l),et=a[v++]^hs(_,b,d,s,l,u);s=z,l=P,u=Z,d=et}const A=a[v++]^Zi(p,s,l,u,d),T=a[v++]^Zi(p,l,u,d,s),N=a[v++]^Zi(p,u,d,s,l),j=a[v++]^Zi(p,d,s,l,u);return{s0:A,s1:T,s2:N,s3:j}}function Ix(a,s,l,u,d){const{sbox2:p,T01:_,T23:b}=my;let v=0;s^=a[v++],l^=a[v++],u^=a[v++],d^=a[v++];const w=a.length/4-2;for(let B=0;B<w;B++){const z=a[v++]^hs(_,b,s,d,u,l),P=a[v++]^hs(_,b,l,s,d,u),Z=a[v++]^hs(_,b,u,l,s,d),et=a[v++]^hs(_,b,d,u,l,s);s=z,l=P,u=Z,d=et}const A=a[v++]^Zi(p,s,d,u,l),T=a[v++]^Zi(p,l,s,d,u),N=a[v++]^Zi(p,u,l,s,d),j=a[v++]^Zi(p,d,u,l,s);return{s0:A,s1:T,s2:N,s3:j}}function gy(a,s){if(!s)return new Uint8Array(a);if(Pi(s),s.length<a)throw new Error(`aes: wrong destination length, expected at least ${a}, got: ${s.length}`);return s}function Kx(a){if(Pi(a),a.length%ds!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${ds}`)}function Qx(a,s,l){let u=a.length;const d=u%ds;if(!s&&d!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const p=cn(a);if(s){let v=ds-d;v||(v=ds),u=u+v}const _=gy(u,l),b=cn(_);return{b:p,o:b,out:_}}function Xx(a,s){if(!s)return a;const l=a.length;if(!l)throw new Error("aes/pcks5: empty ciphertext not allowed");const u=a[l-1];if(u<=0||u>16)throw new Error(`aes/pcks5: wrong padding byte: ${u}`);const d=a.subarray(0,-u);for(let p=0;p<u;p++)if(a[l-p-1]!==u)throw new Error("aes/pcks5: wrong padding");return d}function Fx(a){const s=new Uint8Array(16),l=cn(s);s.set(a);const u=ds-a.length;for(let d=ds-u;d<ds;d++)s[d]=u;return l}const yy=Px({blockSize:16,nonceLength:16},function(s,l,u={}){Pi(s),Pi(l,16);const d=!u.disablePadding;return{encrypt:(p,_)=>{const b=py(s),{b:v,o:w,out:A}=Qx(p,d,_),T=cn(l);let N=T[0],j=T[1],B=T[2],z=T[3],P=0;for(;P+4<=v.length;)N^=v[P+0],j^=v[P+1],B^=v[P+2],z^=v[P+3],{s0:N,s1:j,s2:B,s3:z}=g0(b,N,j,B,z),w[P++]=N,w[P++]=j,w[P++]=B,w[P++]=z;if(d){const Z=Fx(p.subarray(P*4));N^=Z[0],j^=Z[1],B^=Z[2],z^=Z[3],{s0:N,s1:j,s2:B,s3:z}=g0(b,N,j,B,z),w[P++]=N,w[P++]=j,w[P++]=B,w[P++]=z}return b.fill(0),A},decrypt:(p,_)=>{Kx(p);const b=Yx(s),v=cn(l),w=gy(p.length,_),A=cn(p),T=cn(w);let N=v[0],j=v[1],B=v[2],z=v[3];for(let P=0;P+4<=A.length;){const Z=N,et=j,at=B,ct=z;N=A[P+0],j=A[P+1],B=A[P+2],z=A[P+3];const{s0:ut,s1:ot,s2:F,s3:$}=Ix(b,N,j,B,z);T[P++]=ut^Z,T[P++]=ot^et,T[P++]=F^at,T[P++]=$^ct}return b.fill(0),Xx(w,d)}}}),vy=a=>Uint8Array.from(a.split("").map(s=>s.charCodeAt(0))),Jx=vy("expand 16-byte k"),Wx=vy("expand 32-byte k"),$x=cn(Jx),_y=cn(Wx);_y.slice();function ne(a,s){return a<<s|a>>>32-s}function $h(a){return a.byteOffset%4===0}const Xu=64,t1=16,by=2**32-1,y0=new Uint32Array;function e1(a,s,l,u,d,p,_,b){const v=d.length,w=new Uint8Array(Xu),A=cn(w),T=$h(d)&&$h(p),N=T?cn(d):y0,j=T?cn(p):y0;for(let B=0;B<v;_++){if(a(s,l,u,A,_,b),_>=by)throw new Error("arx: counter overflow");const z=Math.min(Xu,v-B);if(T&&z===Xu){const P=B/4;if(B%4!==0)throw new Error("arx: invalid block position");for(let Z=0,et;Z<t1;Z++)et=P+Z,j[et]=N[et]^A[Z];B+=Xu;continue}for(let P=0,Z;P<z;P++)Z=B+P,p[Z]=d[Z]^w[P];B+=z}}function n1(a,s){const{allowShortKeys:l,extendNonceFn:u,counterLength:d,counterRight:p,rounds:_}=Ux({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},s);if(typeof a!="function")throw new Error("core must be a function");return Bh(d),Bh(_),m0(p),m0(l),(b,v,w,A,T=0)=>{Pi(b),Pi(v),Pi(w);const N=w.length;if(A||(A=new Uint8Array(N)),Pi(A),Bh(T),T<0||T>=by)throw new Error("arx: counter overflow");if(A.length<N)throw new Error(`arx: output (${A.length}) is shorter than data (${N})`);const j=[];let B=b.length,z,P;if(B===32)z=b.slice(),j.push(z),P=_y;else if(B===16&&l)z=new Uint8Array(32),z.set(b),z.set(b,16),P=$x,j.push(z);else throw new Error(`arx: invalid 32-byte key, got length=${B}`);$h(v)||(v=v.slice(),j.push(v));const Z=cn(z);if(u){if(v.length!==24)throw new Error("arx: extended nonce must be 24 bytes");u(P,Z,cn(v.subarray(0,16)),Z),v=v.subarray(16)}const et=16-d;if(et!==v.length)throw new Error(`arx: nonce must be ${et} or 16 bytes`);if(et!==12){const ct=new Uint8Array(12);ct.set(v,p?0:12-v.length),v=ct,j.push(v)}const at=cn(v);for(e1(a,P,Z,at,w,A,T,_);j.length>0;)j.pop().fill(0);return A}}function i1(a,s,l,u,d,p=20){let _=a[0],b=a[1],v=a[2],w=a[3],A=s[0],T=s[1],N=s[2],j=s[3],B=s[4],z=s[5],P=s[6],Z=s[7],et=d,at=l[0],ct=l[1],ut=l[2],ot=_,F=b,$=v,gt=w,yt=A,ht=T,vt=N,kt=j,Ct=B,st=z,O=P,I=Z,K=et,mt=at,tt=ct,C=ut;for(let rt=0;rt<p;rt+=2)ot=ot+yt|0,K=ne(K^ot,16),Ct=Ct+K|0,yt=ne(yt^Ct,12),ot=ot+yt|0,K=ne(K^ot,8),Ct=Ct+K|0,yt=ne(yt^Ct,7),F=F+ht|0,mt=ne(mt^F,16),st=st+mt|0,ht=ne(ht^st,12),F=F+ht|0,mt=ne(mt^F,8),st=st+mt|0,ht=ne(ht^st,7),$=$+vt|0,tt=ne(tt^$,16),O=O+tt|0,vt=ne(vt^O,12),$=$+vt|0,tt=ne(tt^$,8),O=O+tt|0,vt=ne(vt^O,7),gt=gt+kt|0,C=ne(C^gt,16),I=I+C|0,kt=ne(kt^I,12),gt=gt+kt|0,C=ne(C^gt,8),I=I+C|0,kt=ne(kt^I,7),ot=ot+ht|0,C=ne(C^ot,16),O=O+C|0,ht=ne(ht^O,12),ot=ot+ht|0,C=ne(C^ot,8),O=O+C|0,ht=ne(ht^O,7),F=F+vt|0,K=ne(K^F,16),I=I+K|0,vt=ne(vt^I,12),F=F+vt|0,K=ne(K^F,8),I=I+K|0,vt=ne(vt^I,7),$=$+kt|0,mt=ne(mt^$,16),Ct=Ct+mt|0,kt=ne(kt^Ct,12),$=$+kt|0,mt=ne(mt^$,8),Ct=Ct+mt|0,kt=ne(kt^Ct,7),gt=gt+yt|0,tt=ne(tt^gt,16),st=st+tt|0,yt=ne(yt^st,12),gt=gt+yt|0,tt=ne(tt^gt,8),st=st+tt|0,yt=ne(yt^st,7);let H=0;u[H++]=_+ot|0,u[H++]=b+F|0,u[H++]=v+$|0,u[H++]=w+gt|0,u[H++]=A+yt|0,u[H++]=T+ht|0,u[H++]=N+vt|0,u[H++]=j+kt|0,u[H++]=B+Ct|0,u[H++]=z+st|0,u[H++]=P+O|0,u[H++]=Z+I|0,u[H++]=et+K|0,u[H++]=at+mt|0,u[H++]=ct+tt|0,u[H++]=ut+C|0}const xy=n1(i1,{counterRight:!1,counterLength:4,allowShortKeys:!1});class wy extends ay{constructor(s,l){super(),this.finished=!1,this.destroyed=!1,Hi.hash(s);const u=pl(l);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const d=this.blockLen,p=new Uint8Array(d);p.set(u.length>d?s.create().update(u).digest():u);for(let _=0;_<p.length;_++)p[_]^=54;this.iHash.update(p),this.oHash=s.create();for(let _=0;_<p.length;_++)p[_]^=106;this.oHash.update(p),p.fill(0)}update(s){return Hi.exists(this),this.iHash.update(s),this}digestInto(s){Hi.exists(this),Hi.bytes(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:l,iHash:u,finished:d,destroyed:p,blockLen:_,outputLen:b}=this;return s=s,s.finished=d,s.destroyed=p,s.blockLen=_,s.outputLen=b,s.oHash=l._cloneInto(s.oHash),s.iHash=u._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const yc=(a,s,l)=>new wy(a,s).update(l).digest();yc.create=(a,s)=>new wy(a,s);function a1(a,s,l){return Hi.hash(a),yc(a,pl(l),pl(s))}const Dh=new Uint8Array([0]),v0=new Uint8Array;function s1(a,s,l,u=32){if(Hi.hash(a),Hi.number(u),u>255*a.outputLen)throw new Error("Length should be <= 255*HashLen");const d=Math.ceil(u/a.outputLen);l===void 0&&(l=v0);const p=new Uint8Array(d*a.outputLen),_=yc.create(a,s),b=_._cloneInto(),v=new Uint8Array(_.outputLen);for(let w=0;w<d;w++)Dh[0]=w+1,b.update(w===0?v0:v).update(l).update(Dh).digestInto(v),p.set(v,a.outputLen*w),_._cloneInto(b);return _.destroy(),b.destroy(),v.fill(0),Dh.fill(0),p.slice(0,u)}var r1=Object.defineProperty,ye=(a,s)=>{for(var l in s)r1(a,l,{get:s[l],enumerable:!0})},$s=Symbol("verified"),o1=a=>a instanceof Object;function bd(a){if(!o1(a)||typeof a.kind!="number"||typeof a.content!="string"||typeof a.created_at!="number"||typeof a.pubkey!="string"||!a.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(a.tags))return!1;for(let s=0;s<a.tags.length;s++){let l=a.tags[s];if(!Array.isArray(l))return!1;for(let u=0;u<l.length;u++)if(typeof l[u]!="string")return!1}return!0}var l1={};ye(l1,{Queue:()=>Ey,QueueNode:()=>Sy,binarySearch:()=>xd,bytesToHex:()=>De,hexToBytes:()=>rr,insertEventIntoAscendingList:()=>c1,insertEventIntoDescendingList:()=>u1,normalizeURL:()=>nr,utf8Decoder:()=>va,utf8Encoder:()=>gi});var va=new TextDecoder("utf-8"),gi=new TextEncoder;function nr(a){try{a.indexOf("://")===-1&&(a="wss://"+a);let s=new URL(a);return s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),s.pathname=s.pathname.replace(/\/+/g,"/"),s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),(s.port==="80"&&s.protocol==="ws:"||s.port==="443"&&s.protocol==="wss:")&&(s.port=""),s.searchParams.sort(),s.hash="",s.toString()}catch{throw new Error(`Invalid URL: ${a}`)}}function u1(a,s){const[l,u]=xd(a,d=>s.id===d.id?0:s.created_at===d.created_at?-1:d.created_at-s.created_at);return u||a.splice(l,0,s),a}function c1(a,s){const[l,u]=xd(a,d=>s.id===d.id?0:s.created_at===d.created_at?-1:s.created_at-d.created_at);return u||a.splice(l,0,s),a}function xd(a,s){let l=0,u=a.length-1;for(;l<=u;){const d=Math.floor((l+u)/2),p=s(a[d]);if(p===0)return[d,!0];p<0?u=d-1:l=d+1}return[l,!1]}var Sy=class{value;next=null;prev=null;constructor(a){this.value=a}},Ey=class{first;last;constructor(){this.first=null,this.last=null}enqueue(a){const s=new Sy(a);return this.last?this.last===this.first?(this.last=s,this.last.prev=this.first,this.first.next=s):(s.prev=this.last,this.last.next=s,this.last=s):(this.first=s,this.last=s),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const s=this.first;return this.first=null,this.last=null,s.value}const a=this.first;return this.first=a.next,this.first&&(this.first.prev=null),a.value}},f1=class{generateSecretKey(){return Ui.utils.randomPrivateKey()}getPublicKey(s){return De(Ui.getPublicKey(s))}finalizeEvent(s,l){const u=s;return u.pubkey=De(Ui.getPublicKey(l)),u.id=Wu(u),u.sig=De(Ui.sign(Wu(u),l)),u[$s]=!0,u}verifyEvent(s){if(typeof s[$s]=="boolean")return s[$s];const l=Wu(s);if(l!==s.id)return s[$s]=!1,!1;try{const u=Ui.verify(s.sig,l,s.pubkey);return s[$s]=u,u}catch{return s[$s]=!1,!1}}};function h1(a){if(!bd(a))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,a.pubkey,a.created_at,a.kind,a.tags,a.content])}function Wu(a){let s=ps(gi.encode(h1(a)));return De(s)}var vc=new f1,Ty=vc.generateSecretKey,gl=vc.getPublicKey,ni=vc.finalizeEvent,_c=vc.verifyEvent,d1={};ye(d1,{Application:()=>Tw,BadgeAward:()=>x1,BadgeDefinition:()=>vw,BlockedRelaysList:()=>tw,BlossomServerList:()=>ow,BookmarkList:()=>J1,Bookmarksets:()=>pw,Calendar:()=>Ow,CalendarEventRSVP:()=>kw,ChannelCreation:()=>My,ChannelHideMessage:()=>Ry,ChannelMessage:()=>ky,ChannelMetadata:()=>Oy,ChannelMuteUser:()=>By,ChatMessage:()=>w1,ClassifiedListing:()=>Cw,ClientAuth:()=>Dy,Comment:()=>M1,CommunitiesList:()=>W1,CommunityDefinition:()=>Dw,CommunityPostApproval:()=>H1,Contacts:()=>v1,CreateOrUpdateProduct:()=>xw,CreateOrUpdateStall:()=>bw,Curationsets:()=>gw,Date:()=>Nw,DirectMessageRelaysList:()=>sw,DraftClassifiedListing:()=>Lw,DraftLong:()=>Sw,Emojisets:()=>Ew,EncryptedDirectMessage:()=>_1,EventDeletion:()=>b1,FavoriteRelays:()=>nw,FileMessage:()=>E1,FileMetadata:()=>N1,FileServerPreference:()=>rw,Followsets:()=>hw,ForumThread:()=>S1,GenericRepost:()=>Ad,Genericlists:()=>dw,GiftWrap:()=>jy,GroupMetadata:()=>Uw,HTTPAuth:()=>zd,Handlerinformation:()=>jw,Handlerrecommendation:()=>Bw,Highlights:()=>I1,InterestsList:()=>iw,Interestsets:()=>_w,JobFeedback:()=>q1,JobRequest:()=>P1,JobResult:()=>Z1,Label:()=>U1,LightningPubRPC:()=>uw,LiveChatMessage:()=>O1,LiveEvent:()=>Aw,LongFormArticle:()=>ww,Metadata:()=>g1,Mutelist:()=>Q1,NWCWalletInfo:()=>lw,NWCWalletRequest:()=>Uy,NWCWalletResponse:()=>cw,NormalVideo:()=>A1,NostrConnect:()=>fw,OpenTimestamps:()=>C1,Photo:()=>T1,Pinlist:()=>X1,Poll:()=>L1,PollResponse:()=>K1,PrivateDirectMessage:()=>Ny,ProblemTracker:()=>B1,ProfileBadges:()=>yw,PublicChatsList:()=>$1,Reaction:()=>Td,RecommendRelay:()=>y1,RelayList:()=>F1,RelayReview:()=>Rw,Relaysets:()=>mw,Report:()=>j1,Reporting:()=>D1,Repost:()=>Ed,Seal:()=>Ly,SearchRelaysList:()=>ew,ShortTextNote:()=>Cy,ShortVideo:()=>z1,Time:()=>Mw,UserEmojiList:()=>aw,UserStatuses:()=>zw,Voice:()=>k1,VoiceComment:()=>R1,Zap:()=>Y1,ZapGoal:()=>G1,ZapRequest:()=>V1,classifyKind:()=>m1,isAddressableKind:()=>Sd,isEphemeralKind:()=>zy,isKind:()=>p1,isRegularKind:()=>Ay,isReplaceableKind:()=>wd});function Ay(a){return a<1e4&&a!==0&&a!==3}function wd(a){return a===0||a===3||1e4<=a&&a<2e4}function zy(a){return 2e4<=a&&a<3e4}function Sd(a){return 3e4<=a&&a<4e4}function m1(a){return Ay(a)?"regular":wd(a)?"replaceable":zy(a)?"ephemeral":Sd(a)?"parameterized":"unknown"}function p1(a,s){const l=s instanceof Array?s:[s];return bd(a)&&l.includes(a.kind)||!1}var g1=0,Cy=1,y1=2,v1=3,_1=4,b1=5,Ed=6,Td=7,x1=8,w1=9,S1=11,Ly=13,Ny=14,E1=15,Ad=16,T1=20,A1=21,z1=22,My=40,Oy=41,ky=42,Ry=43,By=44,C1=1040,jy=1059,L1=1068,N1=1063,M1=1111,O1=1311,k1=1222,R1=1244,B1=1971,j1=1984,D1=1984,U1=1985,H1=4550,P1=5999,Z1=6999,q1=7e3,G1=9041,V1=9734,Y1=9735,I1=9802,K1=1018,Q1=1e4,X1=10001,F1=10002,J1=10003,W1=10004,$1=10005,tw=10006,ew=10007,nw=10012,iw=10015,aw=10030,sw=10050,rw=10096,ow=10063,lw=13194,uw=21e3,Dy=22242,Uy=23194,cw=23195,fw=24133,zd=27235,hw=3e4,dw=30001,mw=30002,pw=30003,gw=30004,yw=30008,vw=30009,_w=30015,bw=30017,xw=30018,ww=30023,Sw=30024,Ew=30030,Tw=30078,Aw=30311,zw=30315,Cw=30402,Lw=30403,Nw=31922,Mw=31923,Ow=31924,kw=31925,Rw=31987,Bw=31989,jw=31990,Dw=34550,Uw=39e3;function Hw(a,s){if(a.ids&&a.ids.indexOf(s.id)===-1||a.kinds&&a.kinds.indexOf(s.kind)===-1||a.authors&&a.authors.indexOf(s.pubkey)===-1)return!1;for(let l in a)if(l[0]==="#"){let u=l.slice(1),d=a[`#${u}`];if(d&&!s.tags.find(([p,_])=>p===l.slice(1)&&d.indexOf(_)!==-1))return!1}return!(a.since&&s.created_at<a.since||a.until&&s.created_at>a.until)}function Pw(a,s){for(let l=0;l<a.length;l++)if(Hw(a[l],s))return!0;return!1}var Zw={};ye(Zw,{getHex64:()=>bc,getInt:()=>Hy,getSubscriptionId:()=>Py,matchEventId:()=>qw,matchEventKind:()=>Vw,matchEventPubkey:()=>Gw});function bc(a,s){let l=s.length+3,u=a.indexOf(`"${s}":`)+l,d=a.slice(u).indexOf('"')+u+1;return a.slice(d,d+64)}function Hy(a,s){let l=s.length,u=a.indexOf(`"${s}":`)+l+3,d=a.slice(u),p=Math.min(d.indexOf(","),d.indexOf("}"));return parseInt(d.slice(0,p),10)}function Py(a){let s=a.slice(0,22).indexOf('"EVENT"');if(s===-1)return null;let l=a.slice(s+7+1).indexOf('"');if(l===-1)return null;let u=s+7+1+l,d=a.slice(u+1,80).indexOf('"');if(d===-1)return null;let p=u+1+d;return a.slice(u+1,p)}function qw(a,s){return s===bc(a,"id")}function Gw(a,s){return s===bc(a,"pubkey")}function Vw(a,s){return s===Hy(a,"kind")}var Yw={};ye(Yw,{makeAuthEvent:()=>Zy});function Zy(a,s){return{kind:Dy,created_at:Math.floor(Date.now()/1e3),tags:[["relay",a],["challenge",s]],content:""}}async function Iw(){return new Promise((a,s)=>{try{if(typeof MessageChannel<"u"){const l=new MessageChannel,u=()=>{l.port1.removeEventListener("message",u),a()};l.port1.addEventListener("message",u),l.port2.postMessage(0),l.port1.start()}else typeof setImmediate<"u"?setImmediate(a):typeof setTimeout<"u"?setTimeout(a,0):a()}catch(l){console.error("during yield: ",l),s(l)}})}var Kw=a=>(a[$s]=!0,!0),qy=class extends Error{constructor(a,s){super(`Tried to send message '${a} on a closed connection to ${s}.`),this.name="SendingOnClosedConnection"}},Gy=class{url;_connected=!1;onclose=null;onnotice=a=>console.debug(`NOTICE from ${this.url}: ${a}`);onauth;baseEoseTimeout=4400;connectionTimeout=4400;publishTimeout=4400;pingFrequency=29e3;pingTimeout=2e4;resubscribeBackoff=[1e4,1e4,1e4,2e4,2e4,3e4,6e4];openSubs=new Map;enablePing;enableReconnect;connectionTimeoutHandle;reconnectTimeoutHandle;pingIntervalHandle;reconnectAttempts=0;closedIntentionally=!1;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new Ey;queueRunning=!1;challenge;authPromise;serial=0;verifyEvent;_WebSocket;constructor(a,s){this.url=nr(a),this.verifyEvent=s.verifyEvent,this._WebSocket=s.websocketImplementation||WebSocket,this.enablePing=s.enablePing,this.enableReconnect=s.enableReconnect||!1}static async connect(a,s){const l=new Gy(a,s);return await l.connect(),l}closeAllSubscriptions(a){for(let[s,l]of this.openSubs)l.close(a);this.openSubs.clear();for(let[s,l]of this.openEventPublishes)l.reject(new Error(a));this.openEventPublishes.clear();for(let[s,l]of this.openCountRequests)l.reject(new Error(a));this.openCountRequests.clear()}get connected(){return this._connected}async reconnect(){const a=this.resubscribeBackoff[Math.min(this.reconnectAttempts,this.resubscribeBackoff.length-1)];this.reconnectAttempts++,this.reconnectTimeoutHandle=setTimeout(async()=>{try{await this.connect()}catch{}},a)}handleHardClose(a){this.pingIntervalHandle&&(clearInterval(this.pingIntervalHandle),this.pingIntervalHandle=void 0),this._connected=!1,this.connectionPromise=void 0;const s=this.closedIntentionally;this.closedIntentionally=!1,this.onclose?.(),this.enableReconnect&&!s?this.reconnect():this.closeAllSubscriptions(a)}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.authPromise=void 0,this.connectionPromise=new Promise((a,s)=>{this.connectionTimeoutHandle=setTimeout(()=>{s("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(l){clearTimeout(this.connectionTimeoutHandle),s(l);return}this.ws.onopen=()=>{this.reconnectTimeoutHandle&&(clearTimeout(this.reconnectTimeoutHandle),this.reconnectTimeoutHandle=void 0),clearTimeout(this.connectionTimeoutHandle),this._connected=!0;const l=this.reconnectAttempts>0;this.reconnectAttempts=0;for(const u of this.openSubs.values()){if(u.eosed=!1,l)for(let d=0;d<u.filters.length;d++)u.lastEmitted&&(u.filters[d].since=u.lastEmitted+1);u.fire()}this.enablePing&&(this.pingIntervalHandle=setInterval(()=>this.pingpong(),this.pingFrequency)),a()},this.ws.onerror=l=>{clearTimeout(this.connectionTimeoutHandle),s(l.message||"websocket error"),this.handleHardClose("relay connection errored")},this.ws.onclose=l=>{clearTimeout(this.connectionTimeoutHandle),s(l.message||"websocket closed"),this.handleHardClose("relay connection closed")},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}waitForPingPong(){return new Promise(a=>{this.ws.once("pong",()=>a(!0)),this.ws.ping()})}waitForDummyReq(){return new Promise((a,s)=>{if(!this.connectionPromise)return s(new Error(`no connection to ${this.url}, can't ping`));try{const l=this.subscribe([{ids:["aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"],limit:0}],{label:"forced-ping",oneose:()=>{a(!0),l.close()},onclose(){a(!0)},eoseTimeout:this.pingTimeout+1e3})}catch(l){s(l)}})}async pingpong(){this.ws?.readyState===1&&(await Promise.any([this.ws&&this.ws.ping&&this.ws.once?this.waitForPingPong():this.waitForDummyReq(),new Promise(s=>setTimeout(()=>s(!1),this.pingTimeout))])||this.ws?.readyState===this._WebSocket.OPEN&&this.ws?.close())}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Iw();this.queueRunning=!1}handleNext(){const a=this.incomingMessageQueue.dequeue();if(!a)return!1;const s=Py(a);if(s){const l=this.openSubs.get(s);if(!l)return;const u=bc(a,"id"),d=l.alreadyHaveEvent?.(u);if(l.receivedEvent?.(this,u),d)return}try{let l=JSON.parse(a);switch(l[0]){case"EVENT":{const u=this.openSubs.get(l[1]),d=l[2];this.verifyEvent(d)&&Pw(u.filters,d)&&u.onevent(d),(!u.lastEmitted||u.lastEmitted<d.created_at)&&(u.lastEmitted=d.created_at);return}case"COUNT":{const u=l[1],d=l[2],p=this.openCountRequests.get(u);p&&(p.resolve(d.count),this.openCountRequests.delete(u));return}case"EOSE":{const u=this.openSubs.get(l[1]);if(!u)return;u.receivedEose();return}case"OK":{const u=l[1],d=l[2],p=l[3],_=this.openEventPublishes.get(u);_&&(clearTimeout(_.timeout),d?_.resolve(p):_.reject(new Error(p)),this.openEventPublishes.delete(u));return}case"CLOSED":{const u=l[1],d=this.openSubs.get(u);if(!d)return;d.closed=!0,d.close(l[2]);return}case"NOTICE":{this.onnotice(l[1]);return}case"AUTH":{this.challenge=l[1],this.onauth&&this.auth(this.onauth);return}default:{this.openSubs.get(l[1])?.oncustom?.(l);return}}}catch{return}}async send(a){if(!this.connectionPromise)throw new qy(a,this.url);this.connectionPromise.then(()=>{this.ws?.send(a)})}async auth(a){const s=this.challenge;if(!s)throw new Error("can't perform auth, no challenge was received");return this.authPromise?this.authPromise:(this.authPromise=new Promise(async(l,u)=>{try{let d=await a(Zy(this.url,s)),p=setTimeout(()=>{let _=this.openEventPublishes.get(d.id);_&&(_.reject(new Error("auth timed out")),this.openEventPublishes.delete(d.id))},this.publishTimeout);this.openEventPublishes.set(d.id,{resolve:l,reject:u,timeout:p}),this.send('["AUTH",'+JSON.stringify(d)+"]")}catch(d){console.warn("subscribe auth function failed:",d)}}),this.authPromise)}async publish(a){const s=new Promise((l,u)=>{const d=setTimeout(()=>{const p=this.openEventPublishes.get(a.id);p&&(p.reject(new Error("publish timed out")),this.openEventPublishes.delete(a.id))},this.publishTimeout);this.openEventPublishes.set(a.id,{resolve:l,reject:u,timeout:d})});return this.send('["EVENT",'+JSON.stringify(a)+"]"),s}async count(a,s){this.serial++;const l=s?.id||"count:"+this.serial,u=new Promise((d,p)=>{this.openCountRequests.set(l,{resolve:d,reject:p})});return this.send('["COUNT","'+l+'",'+JSON.stringify(a).substring(1)),u}subscribe(a,s){const l=this.prepareSubscription(a,s);return l.fire(),l}prepareSubscription(a,s){this.serial++;const l=s.id||(s.label?s.label+":":"sub:")+this.serial,u=new Qw(this,l,a,s);return this.openSubs.set(l,u),u}close(){this.closedIntentionally=!0,this.reconnectTimeoutHandle&&(clearTimeout(this.reconnectTimeoutHandle),this.reconnectTimeoutHandle=void 0),this.pingIntervalHandle&&(clearInterval(this.pingIntervalHandle),this.pingIntervalHandle=void 0),this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.onclose?.(),this.ws?.readyState===this._WebSocket.OPEN&&this.ws?.close()}_onmessage(a){this.incomingMessageQueue.enqueue(a.data),this.queueRunning||this.runQueue()}},Qw=class{relay;id;lastEmitted;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;oncustom;eoseTimeout;eoseTimeoutHandle;constructor(a,s,l,u){if(l.length===0)throw new Error("subscription can't be created with zero filters");this.relay=a,this.filters=l,this.id=s,this.alreadyHaveEvent=u.alreadyHaveEvent,this.receivedEvent=u.receivedEvent,this.eoseTimeout=u.eoseTimeout||a.baseEoseTimeout,this.oneose=u.oneose,this.onclose=u.onclose,this.onevent=u.onevent||(d=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,d)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(a="closed by caller"){if(!this.closed&&this.relay.connected){try{this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]")}catch(s){if(!(s instanceof qy))throw s}this.closed=!0}this.relay.openSubs.delete(this.id),this.onclose?.(a)}},Xw;try{Xw=WebSocket}catch{}var Fw=class{relays=new Map;seenOn=new Map;trackRelays=!1;verifyEvent;enablePing;enableReconnect;automaticallyAuth;trustedRelayURLs=new Set;_WebSocket;constructor(a){this.verifyEvent=a.verifyEvent,this._WebSocket=a.websocketImplementation,this.enablePing=a.enablePing,this.enableReconnect=a.enableReconnect||!1,this.automaticallyAuth=a.automaticallyAuth}async ensureRelay(a,s){a=nr(a);let l=this.relays.get(a);if(l||(l=new Gy(a,{verifyEvent:this.trustedRelayURLs.has(a)?Kw:this.verifyEvent,websocketImplementation:this._WebSocket,enablePing:this.enablePing,enableReconnect:this.enableReconnect}),l.onclose=()=>{l&&!l.enableReconnect&&this.relays.delete(a)},s?.connectionTimeout&&(l.connectionTimeout=s.connectionTimeout),this.relays.set(a,l)),this.automaticallyAuth){const u=this.automaticallyAuth(a);u&&(l.onauth=u)}return await l.connect(),l}close(a){a.map(nr).forEach(s=>{this.relays.get(s)?.close(),this.relays.delete(s)})}subscribe(a,s,l){const u=[];for(let d=0;d<a.length;d++){const p=nr(a[d]);u.find(_=>_.url===p)||u.push({url:p,filter:s})}return this.subscribeMap(u,l)}subscribeMany(a,s,l){const u=[],d=[];for(let p=0;p<a.length;p++){const _=nr(a[p]);d.indexOf(_)===-1&&(d.push(_),u.push({url:_,filter:s}))}return this.subscribeMap(u,l)}subscribeMap(a,s){const l=new Map;for(const N of a){const{url:j,filter:B}=N;l.has(j)||l.set(j,[]),l.get(j).push(B)}const u=Array.from(l.entries()).map(([N,j])=>({url:N,filters:j}));this.trackRelays&&(s.receivedEvent=(N,j)=>{let B=this.seenOn.get(j);B||(B=new Set,this.seenOn.set(j,B)),B.add(N)});const d=new Set,p=[],_=[];let b=N=>{_[N]||(_[N]=!0,_.filter(j=>j).length===u.length&&(s.oneose?.(),b=()=>{}))};const v=[];let w=(N,j)=>{v[N]||(b(N),v[N]=j,v.filter(B=>B).length===u.length&&(s.onclose?.(v),w=()=>{}))};const A=N=>{if(s.alreadyHaveEvent?.(N))return!0;const j=d.has(N);return d.add(N),j},T=Promise.all(u.map(async({url:N,filters:j},B)=>{let z;try{z=await this.ensureRelay(N,{connectionTimeout:s.maxWait?Math.max(s.maxWait*.8,s.maxWait-1e3):void 0})}catch(Z){w(B,Z?.message||String(Z));return}let P=z.subscribe(j,{...s,oneose:()=>b(B),onclose:Z=>{Z.startsWith("auth-required: ")&&s.onauth?z.auth(s.onauth).then(()=>{z.subscribe(j,{...s,oneose:()=>b(B),onclose:et=>{w(B,et)},alreadyHaveEvent:A,eoseTimeout:s.maxWait})}).catch(et=>{w(B,`auth was required and attempted, but failed with: ${et}`)}):w(B,Z)},alreadyHaveEvent:A,eoseTimeout:s.maxWait});p.push(P)}));return{async close(N){await T,p.forEach(j=>{j.close(N)})}}}subscribeEose(a,s,l){const u=this.subscribe(a,s,{...l,oneose(){u.close("closed automatically on eose")}});return u}subscribeManyEose(a,s,l){const u=this.subscribeMany(a,s,{...l,oneose(){u.close("closed automatically on eose")}});return u}async querySync(a,s,l){return new Promise(async u=>{const d=[];this.subscribeEose(a,s,{...l,onevent(p){d.push(p)},onclose(p){u(d)}})})}async get(a,s,l){s.limit=1;const u=await this.querySync(a,s,l);return u.sort((d,p)=>p.created_at-d.created_at),u[0]||null}publish(a,s,l){return a.map(nr).map(async(u,d,p)=>{if(p.indexOf(u)!==d)return Promise.reject("duplicate url");let _=await this.ensureRelay(u);return _.publish(s).catch(async b=>{if(b instanceof Error&&b.message.startsWith("auth-required: ")&&l?.onauth)return await _.auth(l.onauth),_.publish(s);throw b}).then(b=>{if(this.trackRelays){let v=this.seenOn.get(s.id);v||(v=new Set,this.seenOn.set(s.id,v)),v.add(_)}return b})})}listConnectionStatus(){const a=new Map;return this.relays.forEach((s,l)=>a.set(l,s.connected)),a}destroy(){this.relays.forEach(a=>a.close()),this.relays=new Map}},Vy;try{Vy=WebSocket}catch{}var Jw=class extends Fw{constructor(a){super({verifyEvent:_c,websocketImplementation:Vy,...a})}},ar={};ye(ar,{BECH32_REGEX:()=>Yy,Bech32MaxSize:()=>Cd,NostrTypeGuard:()=>Ww,decode:()=>xc,decodeNostrURI:()=>t2,encodeBytes:()=>Sc,naddrEncode:()=>r2,neventEncode:()=>s2,noteEncode:()=>i2,nprofileEncode:()=>a2,npubEncode:()=>n2,nsecEncode:()=>e2});var Ww={isNProfile:a=>/^nprofile1[a-z\d]+$/.test(a||""),isNEvent:a=>/^nevent1[a-z\d]+$/.test(a||""),isNAddr:a=>/^naddr1[a-z\d]+$/.test(a||""),isNSec:a=>/^nsec1[a-z\d]{58}$/.test(a||""),isNPub:a=>/^npub1[a-z\d]{58}$/.test(a||""),isNote:a=>/^note1[a-z\d]+$/.test(a||""),isNcryptsec:a=>/^ncryptsec1[a-z\d]+$/.test(a||"")},Cd=5e3,Yy=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function $w(a){const s=new Uint8Array(4);return s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=a&255,s}function t2(a){try{return a.startsWith("nostr:")&&(a=a.substring(6)),xc(a)}catch{return{type:"invalid",data:null}}}function xc(a){let{prefix:s,words:l}=to.decode(a,Cd),u=new Uint8Array(to.fromWords(l));switch(s){case"nprofile":{let d=Uh(u);if(!d[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:De(d[0][0]),relays:d[1]?d[1].map(p=>va.decode(p)):[]}}}case"nevent":{let d=Uh(u);if(!d[0]?.[0])throw new Error("missing TLV 0 for nevent");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(d[2]&&d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(d[3]&&d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:De(d[0][0]),relays:d[1]?d[1].map(p=>va.decode(p)):[],author:d[2]?.[0]?De(d[2][0]):void 0,kind:d[3]?.[0]?parseInt(De(d[3][0]),16):void 0}}}case"naddr":{let d=Uh(u);if(!d[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!d[2]?.[0])throw new Error("missing TLV 2 for naddr");if(d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!d[3]?.[0])throw new Error("missing TLV 3 for naddr");if(d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:va.decode(d[0][0]),pubkey:De(d[2][0]),kind:parseInt(De(d[3][0]),16),relays:d[1]?d[1].map(p=>va.decode(p)):[]}}}case"nsec":return{type:s,data:u};case"npub":case"note":return{type:s,data:De(u)};default:throw new Error(`unknown prefix ${s}`)}}function Uh(a){let s={},l=a;for(;l.length>0;){let u=l[0],d=l[1],p=l.slice(2,2+d);if(l=l.slice(2+d),p.length<d)throw new Error(`not enough data to read on TLV ${u}`);s[u]=s[u]||[],s[u].push(p)}return s}function e2(a){return Sc("nsec",a)}function n2(a){return Sc("npub",rr(a))}function i2(a){return Sc("note",rr(a))}function wc(a,s){let l=to.toWords(s);return to.encode(a,l,Cd)}function Sc(a,s){return wc(a,s)}function a2(a){let s=Ld({0:[rr(a.pubkey)],1:(a.relays||[]).map(l=>gi.encode(l))});return wc("nprofile",s)}function s2(a){let s;a.kind!==void 0&&(s=$w(a.kind));let l=Ld({0:[rr(a.id)],1:(a.relays||[]).map(u=>gi.encode(u)),2:a.author?[rr(a.author)]:[],3:s?[new Uint8Array(s)]:[]});return wc("nevent",l)}function r2(a){let s=new ArrayBuffer(4);new DataView(s).setUint32(0,a.kind,!1);let l=Ld({0:[gi.encode(a.identifier)],1:(a.relays||[]).map(u=>gi.encode(u)),2:[rr(a.pubkey)],3:[new Uint8Array(s)]});return wc("naddr",l)}function Ld(a){let s=[];return Object.entries(a).reverse().forEach(([l,u])=>{u.forEach(d=>{let p=new Uint8Array(d.length+2);p.set([parseInt(l)],0),p.set([d.length],1),p.set(d,2),s.push(p)})}),pc(...s)}var o2={};ye(o2,{decrypt:()=>l2,encrypt:()=>Iy});function Iy(a,s,l){const u=a instanceof Uint8Array?De(a):a,d=no.getSharedSecret(u,"02"+s),p=Ky(d);let _=Uint8Array.from(ry(16)),b=gi.encode(l),v=yy(p,_).encrypt(b),w=_a.encode(new Uint8Array(v)),A=_a.encode(new Uint8Array(_.buffer));return`${w}?iv=${A}`}function l2(a,s,l){const u=a instanceof Uint8Array?De(a):a;let[d,p]=l.split("?iv="),_=no.getSharedSecret(u,"02"+s),b=Ky(_),v=_a.decode(p),w=_a.decode(d),A=yy(b,v).decrypt(w);return va.decode(A)}function Ky(a){return a.slice(1,33)}var u2={};ye(u2,{NIP05_REGEX:()=>Nd,isNip05:()=>c2,isValid:()=>d2,queryProfile:()=>Qy,searchDomain:()=>h2,useFetchImplementation:()=>f2});var Nd=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,c2=a=>Nd.test(a||""),Ec;try{Ec=fetch}catch{}function f2(a){Ec=a}async function h2(a,s=""){try{const l=`https://${a}/.well-known/nostr.json?name=${s}`,u=await Ec(l,{redirect:"manual"});if(u.status!==200)throw Error("Wrong response code");return(await u.json()).names}catch{return{}}}async function Qy(a){const s=a.match(Nd);if(!s)return null;const[,l="_",u]=s;try{const d=`https://${u}/.well-known/nostr.json?name=${l}`,p=await Ec(d,{redirect:"manual"});if(p.status!==200)throw Error("Wrong response code");const _=await p.json(),b=_.names[l];return b?{pubkey:b,relays:_.relays?.[b]}:null}catch{return null}}async function d2(a,s){const l=await Qy(s);return l?l.pubkey===a:!1}var m2={};ye(m2,{parse:()=>p2});function p2(a){const s={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let l,u;for(let d=a.tags.length-1;d>=0;d--){const p=a.tags[d];if(p[0]==="e"&&p[1]){const[_,b,v,w,A]=p,T={id:b,relays:v?[v]:[],author:A};if(w==="root"){s.root=T;continue}if(w==="reply"){s.reply=T;continue}if(w==="mention"){s.mentions.push(T);continue}l?u=T:l=T,s.mentions.push(T);continue}if(p[0]==="q"&&p[1]){const[_,b,v]=p;s.quotes.push({id:b,relays:v?[v]:[]})}if(p[0]==="p"&&p[1]){s.profiles.push({pubkey:p[1],relays:p[2]?[p[2]]:[]});continue}}return s.root||(s.root=u||l||s.reply),s.reply||(s.reply=l||s.root),[s.reply,s.root].forEach(d=>{if(!d)return;let p=s.mentions.indexOf(d);if(p!==-1&&s.mentions.splice(p,1),d.author){let _=s.profiles.find(b=>b.pubkey===d.author);_&&_.relays&&(d.relays||(d.relays=[]),_.relays.forEach(b=>{d.relays?.indexOf(b)===-1&&d.relays.push(b)}),_.relays=d.relays)}}),s.mentions.forEach(d=>{if(d.author){let p=s.profiles.find(_=>_.pubkey===d.author);p&&p.relays&&(d.relays||(d.relays=[]),p.relays.forEach(_=>{d.relays.indexOf(_)===-1&&d.relays.push(_)}),p.relays=d.relays)}}),s}var g2={};ye(g2,{fetchRelayInformation:()=>v2,useFetchImplementation:()=>y2});var Xy;try{Xy=fetch}catch{}function y2(a){Xy=a}async function v2(a){return await(await fetch(a.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var _2={};ye(_2,{fastEventHash:()=>Jy,getPow:()=>Fy,minePow:()=>b2});function Fy(a){let s=0;for(let l=0;l<64;l+=8){const u=parseInt(a.substring(l,l+8),16);if(u===0)s+=32;else{s+=Math.clz32(u);break}}return s}function b2(a,s){let l=0;const u=a,d=["nonce",l.toString(),s.toString()];for(u.tags.push(d);;){const p=Math.floor(new Date().getTime()/1e3);if(p!==u.created_at&&(l=0,u.created_at=p),d[1]=(++l).toString(),u.id=Jy(u),Fy(u.id)>=s)break}return u}function Jy(a){return De(ps(gi.encode(JSON.stringify([0,a.pubkey,a.created_at,a.kind,a.tags,a.content]))))}var x2={};ye(x2,{unwrapEvent:()=>O2,unwrapManyEvents:()=>k2,wrapEvent:()=>cv,wrapManyEvents:()=>M2});var w2={};ye(w2,{createRumor:()=>rv,createSeal:()=>ov,createWrap:()=>lv,unwrapEvent:()=>Bd,unwrapManyEvents:()=>uv,wrapEvent:()=>rc,wrapManyEvents:()=>L2});var yl={};ye(yl,{decrypt:()=>Rd,encrypt:()=>kd,getConversationKey:()=>Md,v2:()=>z2});var Wy=1,$y=65535;function Md(a,s){const l=no.getSharedSecret(a,"02"+s).subarray(1,33);return a1(ps,l,"nip44-v2")}function tv(a,s){const l=s1(ps,a,s,76);return{chacha_key:l.subarray(0,32),chacha_nonce:l.subarray(32,44),hmac_key:l.subarray(44,76)}}function Od(a){if(!Number.isSafeInteger(a)||a<1)throw new Error("expected positive integer");if(a<=32)return 32;const s=1<<Math.floor(Math.log2(a-1))+1,l=s<=256?32:s/8;return l*(Math.floor((a-1)/l)+1)}function S2(a){if(!Number.isSafeInteger(a)||a<Wy||a>$y)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const s=new Uint8Array(2);return new DataView(s.buffer).setUint16(0,a,!1),s}function E2(a){const s=gi.encode(a),l=s.length,u=S2(l),d=new Uint8Array(Od(l)-l);return pc(u,s,d)}function T2(a){const s=new DataView(a.buffer).getUint16(0),l=a.subarray(2,2+s);if(s<Wy||s>$y||l.length!==s||a.length!==2+Od(s))throw new Error("invalid padding");return va.decode(l)}function ev(a,s,l){if(l.length!==32)throw new Error("AAD associated data must be 32 bytes");const u=pc(l,s);return yc(ps,a,u)}function A2(a){if(typeof a!="string")throw new Error("payload must be a valid string");const s=a.length;if(s<132||s>87472)throw new Error("invalid payload length: "+s);if(a[0]==="#")throw new Error("unknown encryption version");let l;try{l=_a.decode(a)}catch(p){throw new Error("invalid base64: "+p.message)}const u=l.length;if(u<99||u>65603)throw new Error("invalid data length: "+u);const d=l[0];if(d!==2)throw new Error("unknown encryption version "+d);return{nonce:l.subarray(1,33),ciphertext:l.subarray(33,-32),mac:l.subarray(-32)}}function kd(a,s,l=ry(32)){const{chacha_key:u,chacha_nonce:d,hmac_key:p}=tv(s,l),_=E2(a),b=xy(u,d,_),v=ev(p,b,l);return _a.encode(pc(new Uint8Array([2]),l,b,v))}function Rd(a,s){const{nonce:l,ciphertext:u,mac:d}=A2(a),{chacha_key:p,chacha_nonce:_,hmac_key:b}=tv(s,l),v=ev(b,u,l);if(!Hx(v,d))throw new Error("invalid MAC");const w=xy(p,_,u);return T2(w)}var z2={utils:{getConversationKey:Md,calcPaddedLen:Od},encrypt:kd,decrypt:Rd},C2=2880*60,nv=()=>Math.round(Date.now()/1e3),iv=()=>Math.round(nv()-Math.random()*C2),av=(a,s)=>Md(a,s),sv=(a,s,l)=>kd(JSON.stringify(a),av(s,l)),_0=(a,s)=>JSON.parse(Rd(a.content,av(s,a.pubkey)));function rv(a,s){const l={created_at:nv(),content:"",tags:[],...a,pubkey:gl(s)};return l.id=Wu(l),l}function ov(a,s,l){return ni({kind:Ly,content:sv(a,s,l),created_at:iv(),tags:[]},s)}function lv(a,s){const l=Ty();return ni({kind:jy,content:sv(a,l,s),created_at:iv(),tags:[["p",s]]},l)}function rc(a,s,l){const u=rv(a,s),d=ov(u,s,l);return lv(d,l)}function L2(a,s,l){if(!l||l.length===0)throw new Error("At least one recipient is required.");const u=gl(s),d=[rc(a,s,u)];return l.forEach(p=>{d.push(rc(a,s,p))}),d}function Bd(a,s){const l=_0(a,s);return _0(l,s)}function uv(a,s){let l=[];return a.forEach(u=>{l.push(Bd(u,s))}),l.sort((u,d)=>u.created_at-d.created_at),l}function N2(a,s,l,u){const d={created_at:Math.ceil(Date.now()/1e3),kind:Ny,tags:[],content:s};return(Array.isArray(a)?a:[a]).forEach(({publicKey:_,relayUrl:b})=>{d.tags.push(b?["p",_,b]:["p",_])}),u&&d.tags.push(["e",u.eventId,u.relayUrl||"","reply"]),l&&d.tags.push(["subject",l]),d}function cv(a,s,l,u,d){const p=N2(s,l,u,d);return rc(p,a,s.publicKey)}function M2(a,s,l,u,d){if(!s||s.length===0)throw new Error("At least one recipient is required.");return[{publicKey:gl(a)},...s].map(_=>cv(a,_,l,u,d))}var O2=Bd,k2=uv,R2={};ye(R2,{finishRepostEvent:()=>B2,getRepostedEvent:()=>j2,getRepostedEventPointer:()=>fv});function B2(a,s,l,u){let d;const p=[...a.tags??[],["e",s.id,l],["p",s.pubkey]];return s.kind===Cy?d=Ed:(d=Ad,p.push(["k",String(s.kind)])),ni({kind:d,tags:p,content:a.content===""||s.tags?.find(_=>_[0]==="-")?"":JSON.stringify(s),created_at:a.created_at},u)}function fv(a){if(![Ed,Ad].includes(a.kind))return;let s,l;for(let u=a.tags.length-1;u>=0&&(s===void 0||l===void 0);u--){const d=a.tags[u];d.length>=2&&(d[0]==="e"&&s===void 0?s=d:d[0]==="p"&&l===void 0&&(l=d))}if(s!==void 0)return{id:s[1],relays:[s[2],l?.[2]].filter(u=>typeof u=="string"),author:l?.[1]}}function j2(a,{skipVerification:s}={}){const l=fv(a);if(l===void 0||a.content==="")return;let u;try{u=JSON.parse(a.content)}catch{return}if(u.id===l.id&&!(!s&&!_c(u)))return u}var D2={};ye(D2,{NOSTR_URI_REGEX:()=>jd,parse:()=>H2,test:()=>U2});var jd=new RegExp(`nostr:(${Yy.source})`);function U2(a){return typeof a=="string"&&new RegExp(`^${jd.source}$`).test(a)}function H2(a){const s=a.match(new RegExp(`^${jd.source}$`));if(!s)throw new Error(`Invalid Nostr URI: ${a}`);return{uri:s[0],value:s[1],decoded:xc(s[1])}}var P2={};ye(P2,{finishReactionEvent:()=>Z2,getReactedEventPointer:()=>q2});function Z2(a,s,l){const u=s.tags.filter(d=>d.length>=2&&(d[0]==="e"||d[0]==="p"));return ni({...a,kind:Td,tags:[...a.tags??[],...u,["e",s.id],["p",s.pubkey]],content:a.content??"+"},l)}function q2(a){if(a.kind!==Td)return;let s,l;for(let u=a.tags.length-1;u>=0&&(s===void 0||l===void 0);u--){const d=a.tags[u];d.length>=2&&(d[0]==="e"&&s===void 0?s=d:d[0]==="p"&&l===void 0&&(l=d))}if(!(s===void 0||l===void 0))return{id:s[1],relays:[s[2],l[2]].filter(u=>u!==void 0),author:l[1]}}var G2={};ye(G2,{parse:()=>Y2});var b0=/\W/m,x0=/[^\w\/] |[^\w\/]$|$|,| /m,V2=42;function*Y2(a){let s=[];if(typeof a!="string"){for(let p=0;p<a.tags.length;p++){const _=a.tags[p];_[0]==="emoji"&&_.length>=3&&s.push({type:"emoji",shortcode:_[1],url:_[2]})}a=a.content}const l=a.length;let u=0,d=0;t:for(;d<l;){const p=a.indexOf(":",d),_=a.indexOf("#",d);if(p===-1&&_===-1)break t;if(p===-1||_>=0&&_<p){if(_===0||a[_-1]===" "){const b=a.slice(_+1,_+V2).match(b0),v=b?_+1+b.index:l;yield{type:"text",text:a.slice(u,_)},yield{type:"hashtag",value:a.slice(_+1,v)},d=v,u=d;continue t}d=_+1;continue t}if(a.slice(p-5,p)==="nostr"){const b=a.slice(p+60).match(b0),v=b?p+60+b.index:l;try{let w,{data:A,type:T}=xc(a.slice(p+1,v));switch(T){case"npub":w={pubkey:A};break;case"note":w={id:A};break;case"nsec":d=v+1;continue;default:w=A}u!==p-5&&(yield{type:"text",text:a.slice(u,p-5)}),yield{type:"reference",pointer:w},d=v,u=d;continue t}catch{d=p+1;continue t}}else if(a.slice(p-5,p)==="https"||a.slice(p-4,p)==="http"){const b=a.slice(p+4).match(x0),v=b?p+4+b.index:l,w=a[p-1]==="s"?5:4;try{let A=new URL(a.slice(p-w,v));if(A.hostname.indexOf(".")===-1)throw new Error("invalid url");if(u!==p-w&&(yield{type:"text",text:a.slice(u,p-w)}),/\.(png|jpe?g|gif|webp|heic|svg)$/i.test(A.pathname)){yield{type:"image",url:A.toString()},d=v,u=d;continue t}if(/\.(mp4|avi|webm|mkv|mov)$/i.test(A.pathname)){yield{type:"video",url:A.toString()},d=v,u=d;continue t}if(/\.(mp3|aac|ogg|opus|wav|flac)$/i.test(A.pathname)){yield{type:"audio",url:A.toString()},d=v,u=d;continue t}yield{type:"url",url:A.toString()},d=v,u=d;continue t}catch{d=v+1;continue t}}else if(a.slice(p-3,p)==="wss"||a.slice(p-2,p)==="ws"){const b=a.slice(p+4).match(x0),v=b?p+4+b.index:l,w=a[p-1]==="s"?3:2;try{let A=new URL(a.slice(p-w,v));if(A.hostname.indexOf(".")===-1)throw new Error("invalid ws url");u!==p-w&&(yield{type:"text",text:a.slice(u,p-w)}),yield{type:"relay",url:A.toString()},d=v,u=d;continue t}catch{d=v+1;continue t}}else{for(let b=0;b<s.length;b++){const v=s[b];if(a[p+v.shortcode.length+1]===":"&&a.slice(p+1,p+v.shortcode.length+1)===v.shortcode){u!==p&&(yield{type:"text",text:a.slice(u,p)}),yield v,d=p+v.shortcode.length+2,u=d;continue t}}d=p+1;continue t}}u!==l&&(yield{type:"text",text:a.slice(u)})}var I2={};ye(I2,{channelCreateEvent:()=>K2,channelHideMessageEvent:()=>F2,channelMessageEvent:()=>X2,channelMetadataEvent:()=>Q2,channelMuteUserEvent:()=>J2});var K2=(a,s)=>{let l;if(typeof a.content=="object")l=JSON.stringify(a.content);else if(typeof a.content=="string")l=a.content;else return;return ni({kind:My,tags:[...a.tags??[]],content:l,created_at:a.created_at},s)},Q2=(a,s)=>{let l;if(typeof a.content=="object")l=JSON.stringify(a.content);else if(typeof a.content=="string")l=a.content;else return;return ni({kind:Oy,tags:[["e",a.channel_create_event_id],...a.tags??[]],content:l,created_at:a.created_at},s)},X2=(a,s)=>{const l=[["e",a.channel_create_event_id,a.relay_url,"root"]];return a.reply_to_channel_message_event_id&&l.push(["e",a.reply_to_channel_message_event_id,a.relay_url,"reply"]),ni({kind:ky,tags:[...l,...a.tags??[]],content:a.content,created_at:a.created_at},s)},F2=(a,s)=>{let l;if(typeof a.content=="object")l=JSON.stringify(a.content);else if(typeof a.content=="string")l=a.content;else return;return ni({kind:Ry,tags:[["e",a.channel_message_event_id],...a.tags??[]],content:l,created_at:a.created_at},s)},J2=(a,s)=>{let l;if(typeof a.content=="object")l=JSON.stringify(a.content);else if(typeof a.content=="string")l=a.content;else return;return ni({kind:By,tags:[["p",a.pubkey_to_mute],...a.tags??[]],content:l,created_at:a.created_at},s)},W2={};ye(W2,{EMOJI_SHORTCODE_REGEX:()=>hv,matchAll:()=>$2,regex:()=>Dd,replaceAll:()=>tS});var hv=/:(\w+):/,Dd=()=>new RegExp(`\\B${hv.source}\\B`,"g");function*$2(a){const s=a.matchAll(Dd());for(const l of s)try{const[u,d]=l;yield{shortcode:u,name:d,start:l.index,end:l.index+u.length}}catch{}}function tS(a,s){return a.replaceAll(Dd(),(l,u)=>s({shortcode:l,name:u}))}var eS={};ye(eS,{useFetchImplementation:()=>nS,validateGithub:()=>iS});var Ud;try{Ud=fetch}catch{}function nS(a){Ud=a}async function iS(a,s,l){try{return await(await Ud(`https://gist.github.com/${s}/${l}/raw`)).text()===`Verifying that I control the following Nostr public key: ${a}`}catch{return!1}}var aS={};ye(aS,{makeNwcRequestEvent:()=>rS,parseConnectionString:()=>sS});function sS(a){const{host:s,pathname:l,searchParams:u}=new URL(a),d=l||s,p=u.get("relay"),_=u.get("secret");if(!d||!p||!_)throw new Error("invalid connection string");return{pubkey:d,relay:p,secret:_}}async function rS(a,s,l){const d=Iy(s,a,JSON.stringify({method:"pay_invoice",params:{invoice:l}})),p={kind:Uy,created_at:Math.round(Date.now()/1e3),content:d,tags:[["p",a]]};return ni(p,s)}var oS={};ye(oS,{normalizeIdentifier:()=>lS});function lS(a){return a=a.trim().toLowerCase(),a=a.normalize("NFKC"),Array.from(a).map(s=>new RegExp("\\p{Letter}","u").test(s)||new RegExp("\\p{Number}","u").test(s)?s:"-").join("")}var uS={};ye(uS,{getSatoshisAmountFromBolt11:()=>pS,getZapEndpoint:()=>fS,makeZapReceipt:()=>mS,makeZapRequest:()=>hS,useFetchImplementation:()=>cS,validateZapRequest:()=>dS});var Hd;try{Hd=fetch}catch{}function cS(a){Hd=a}async function fS(a){try{let s="",{lud06:l,lud16:u}=JSON.parse(a.content);if(u){let[_,b]=u.split("@");s=new URL(`/.well-known/lnurlp/${_}`,`https://${b}`).toString()}else if(l){let{words:_}=to.decode(l,1e3),b=to.fromWords(_);s=va.decode(b)}else return null;let p=await(await Hd(s)).json();if(p.allowsNostr&&p.nostrPubkey)return p.callback}catch{}return null}function hS(a){let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:a.comment||"",tags:[["p","pubkey"in a?a.pubkey:a.event.pubkey],["amount",a.amount.toString()],["relays",...a.relays]]};if("event"in a){if(s.tags.push(["e",a.event.id]),wd(a.event.kind)){const l=["a",`${a.event.kind}:${a.event.pubkey}:`];s.tags.push(l)}else if(Sd(a.event.kind)){let l=a.event.tags.find(([d,p])=>d==="d"&&p);if(!l)throw new Error("d tag not found or is empty");const u=["a",`${a.event.kind}:${a.event.pubkey}:${l[1]}`];s.tags.push(u)}s.tags.push(["k",a.event.kind.toString()])}return s}function dS(a){let s;try{s=JSON.parse(a)}catch{return"Invalid zap request JSON."}if(!bd(s))return"Zap request is not a valid Nostr event.";if(!_c(s))return"Invalid signature on zap request.";let l=s.tags.find(([p,_])=>p==="p"&&_);if(!l)return"Zap request doesn't have a 'p' tag.";if(!l[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let u=s.tags.find(([p,_])=>p==="e"&&_);return u&&!u[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":s.tags.find(([p,_])=>p==="relays"&&_)?null:"Zap request doesn't have a 'relays' tag."}function mS({zapRequest:a,preimage:s,bolt11:l,paidAt:u}){let d=JSON.parse(a),p=d.tags.filter(([b])=>b==="e"||b==="p"||b==="a"),_={kind:9735,created_at:Math.round(u.getTime()/1e3),content:"",tags:[...p,["P",d.pubkey],["bolt11",l],["description",a]]};return s&&_.tags.push(["preimage",s]),_}function pS(a){if(a.length<50)return 0;a=a.substring(0,50);const s=a.lastIndexOf("1");if(s===-1)return 0;const l=a.substring(0,s);if(!l.startsWith("lnbc"))return 0;const u=l.substring(4);if(u.length<1)return 0;const d=u[u.length-1],p=d.charCodeAt(0)-48,_=p>=0&&p<=9;let b=u.length-1;if(_&&b++,b<1)return 0;const v=parseInt(u.substring(0,b));switch(d){case"m":return v*1e5;case"u":return v*100;case"n":return v/10;case"p":return v/1e4;default:return v*1e8}}var gS={};ye(gS,{Negentropy:()=>mv,NegentropyStorageVector:()=>_S,NegentropySync:()=>bS});var Hh=97,Fr=32,dv=16,Ws={Skip:0,Fingerprint:1,IdList:2},ya=class{_raw;length;constructor(a){typeof a=="number"?(this._raw=new Uint8Array(a),this.length=0):a instanceof Uint8Array?(this._raw=new Uint8Array(a),this.length=a.length):(this._raw=new Uint8Array(512),this.length=0)}unwrap(){return this._raw.subarray(0,this.length)}get capacity(){return this._raw.byteLength}extend(a){if(a instanceof ya&&(a=a.unwrap()),typeof a.length!="number")throw Error("bad length");const s=a.length+this.length;if(this.capacity<s){const l=this._raw,u=Math.max(this.capacity*2,s);this._raw=new Uint8Array(u),this._raw.set(l)}this._raw.set(a,this.length),this.length+=a.length}shift(){const a=this._raw[0];return this._raw=this._raw.subarray(1),this.length--,a}shiftN(a=1){const s=this._raw.subarray(0,a);return this._raw=this._raw.subarray(a),this.length-=a,s}};function Fu(a){let s=0;for(;;){if(a.length===0)throw Error("parse ends prematurely");let l=a.shift();if(s=s<<7|l&127,(l&128)===0)break}return s}function pa(a){if(a===0)return new ya(new Uint8Array([0]));let s=[];for(;a!==0;)s.push(a&127),a>>>=7;s.reverse();for(let l=0;l<s.length-1;l++)s[l]|=128;return new ya(new Uint8Array(s))}function yS(a){return $u(a,1)[0]}function $u(a,s){if(a.length<s)throw Error("parse ends prematurely");return a.shiftN(s)}var vS=class{buf;constructor(){this.setToZero()}setToZero(){this.buf=new Uint8Array(Fr)}add(a){let s=0,l=0,u=new DataView(this.buf.buffer),d=new DataView(a.buffer);for(let p=0;p<8;p++){let _=p*4,b=u.getUint32(_,!0),v=d.getUint32(_,!0),w=b;w+=s,w+=v,w>4294967295&&(l=1),u.setUint32(_,w&4294967295,!0),s=l,l=0}}negate(){let a=new DataView(this.buf.buffer);for(let l=0;l<8;l++){let u=l*4;a.setUint32(u,~a.getUint32(u,!0))}let s=new Uint8Array(Fr);s[0]=1,this.add(s)}getFingerprint(a){let s=new ya;return s.extend(this.buf),s.extend(pa(a)),ps(s.unwrap()).subarray(0,dv)}},_S=class{items;sealed;constructor(){this.items=[],this.sealed=!1}insert(a,s){if(this.sealed)throw Error("already sealed");const l=hy(s);if(l.byteLength!==Fr)throw Error("bad id size for added item");this.items.push({timestamp:a,id:l})}seal(){if(this.sealed)throw Error("already sealed");this.sealed=!0,this.items.sort(Ph);for(let a=1;a<this.items.length;a++)if(Ph(this.items[a-1],this.items[a])===0)throw Error("duplicate item inserted")}unseal(){this.sealed=!1}size(){return this._checkSealed(),this.items.length}getItem(a){if(this._checkSealed(),a>=this.items.length)throw Error("out of range");return this.items[a]}iterate(a,s,l){this._checkSealed(),this._checkBounds(a,s);for(let u=a;u<s&&l(this.items[u],u);++u);}findLowerBound(a,s,l){return this._checkSealed(),this._checkBounds(a,s),this._binarySearch(this.items,a,s,u=>Ph(u,l)<0)}fingerprint(a,s){let l=new vS;return l.setToZero(),this.iterate(a,s,u=>(l.add(u.id),!0)),l.getFingerprint(s-a)}_checkSealed(){if(!this.sealed)throw Error("not sealed")}_checkBounds(a,s){if(a>s||s>this.items.length)throw Error("bad range")}_binarySearch(a,s,l,u){let d=l-s;for(;d>0;){let p=s,_=Math.floor(d/2);p+=_,u(a[p])?(s=++p,d-=_+1):d=_}return s}},mv=class{storage;frameSizeLimit;lastTimestampIn;lastTimestampOut;constructor(a,s=6e4){if(s<4096)throw Error("frameSizeLimit too small");this.storage=a,this.frameSizeLimit=s,this.lastTimestampIn=0,this.lastTimestampOut=0}_bound(a,s){return{timestamp:a,id:s||new Uint8Array(0)}}initiate(){let a=new ya;return a.extend(new Uint8Array([Hh])),this.splitRange(0,this.storage.size(),this._bound(Number.MAX_VALUE),a),Qr(a.unwrap())}reconcile(a,s,l){const u=new ya(hy(a));this.lastTimestampIn=this.lastTimestampOut=0;let d=new ya;d.extend(new Uint8Array([Hh]));let p=yS(u);if(p<96||p>111)throw Error("invalid negentropy protocol version byte");if(p!==Hh)throw Error("unsupported negentropy protocol version requested: "+(p-96));let _=this.storage.size(),b=this._bound(0),v=0,w=!1;for(;u.length!==0;){let A=new ya,T=()=>{w&&(w=!1,A.extend(this.encodeBound(b)),A.extend(pa(Ws.Skip)))},N=this.decodeBound(u),j=Fu(u),B=v,z=this.storage.findLowerBound(v,_,N);if(j===Ws.Skip)w=!0;else if(j===Ws.Fingerprint){let P=$u(u,dv),Z=this.storage.fingerprint(B,z);pv(P,Z)!==0?(T(),this.splitRange(B,z,N,A)):w=!0}else if(j===Ws.IdList){let P=Fu(u),Z={};for(let et=0;et<P;et++){let at=$u(u,Fr);Z[Qr(at)]=at}if(w=!0,this.storage.iterate(B,z,et=>{let at=et.id;const ct=Qr(at);return Z[ct]?delete Z[Qr(at)]:s?.(ct),!0}),l)for(let et of Object.values(Z))l(Qr(et))}else throw Error("unexpected mode");if(this.exceededFrameSizeLimit(d.length+A.length)){let P=this.storage.fingerprint(z,_);d.extend(this.encodeBound(this._bound(Number.MAX_VALUE))),d.extend(pa(Ws.Fingerprint)),d.extend(P);break}else d.extend(A);v=z,b=N}return d.length===1?null:Qr(d.unwrap())}splitRange(a,s,l,u){let d=s-a,p=16;if(d<p*2)u.extend(this.encodeBound(l)),u.extend(pa(Ws.IdList)),u.extend(pa(d)),this.storage.iterate(a,s,_=>(u.extend(_.id),!0));else{let _=Math.floor(d/p),b=d%p,v=a;for(let w=0;w<p;w++){let A=_+(w<b?1:0),T=this.storage.fingerprint(v,v+A);v+=A;let N;if(v===s)N=l;else{let j,B;this.storage.iterate(v-1,v+1,(z,P)=>(P===v-1?j=z:B=z,!0)),N=this.getMinimalBound(j,B)}u.extend(this.encodeBound(N)),u.extend(pa(Ws.Fingerprint)),u.extend(T)}}}exceededFrameSizeLimit(a){return a>this.frameSizeLimit-200}decodeTimestampIn(a){let s=Fu(a);return s=s===0?Number.MAX_VALUE:s-1,this.lastTimestampIn===Number.MAX_VALUE||s===Number.MAX_VALUE?(this.lastTimestampIn=Number.MAX_VALUE,Number.MAX_VALUE):(s+=this.lastTimestampIn,this.lastTimestampIn=s,s)}decodeBound(a){let s=this.decodeTimestampIn(a),l=Fu(a);if(l>Fr)throw Error("bound key too long");let u=$u(a,l);return{timestamp:s,id:u}}encodeTimestampOut(a){if(a===Number.MAX_VALUE)return this.lastTimestampOut=Number.MAX_VALUE,pa(0);let s=a;return a-=this.lastTimestampOut,this.lastTimestampOut=s,pa(a+1)}encodeBound(a){let s=new ya;return s.extend(this.encodeTimestampOut(a.timestamp)),s.extend(pa(a.id.length)),s.extend(a.id),s}getMinimalBound(a,s){if(s.timestamp!==a.timestamp)return this._bound(s.timestamp);{let l=0,u=s.id,d=a.id;for(let p=0;p<Fr&&u[p]===d[p];p++)l++;return this._bound(s.timestamp,s.id.subarray(0,l+1))}}};function pv(a,s){for(let l=0;l<a.byteLength;l++){if(a[l]<s[l])return-1;if(a[l]>s[l])return 1}return a.byteLength>s.byteLength?1:a.byteLength<s.byteLength?-1:0}function Ph(a,s){return a.timestamp===s.timestamp?pv(a.id,s.id):a.timestamp-s.timestamp}var bS=class{relay;storage;neg;filter;subscription;onhave;onneed;constructor(a,s,l,u={}){this.relay=a,this.storage=s,this.neg=new mv(s),this.onhave=u.onhave,this.onneed=u.onneed,this.filter=l,this.subscription=this.relay.prepareSubscription([{}],{label:u.label||"negentropy"}),this.subscription.oncustom=d=>{switch(d[0]){case"NEG-MSG":{d.length<3&&console.warn(`got invalid NEG-MSG from ${this.relay.url}: ${d}`);try{const p=this.neg.reconcile(d[2],this.onhave,this.onneed);p?this.relay.send(`["NEG-MSG", "${this.subscription.id}", "${p}"]`):(this.close(),u.onclose?.())}catch(p){console.error("negentropy reconcile error:",p),u?.onclose?.(`reconcile error: ${p}`)}break}case"NEG-CLOSE":{const p=d[2];console.warn("negentropy error:",p),u.onclose?.(p);break}case"NEG-ERR":u.onclose?.()}}}async start(){const a=this.neg.initiate();this.relay.send(`["NEG-OPEN","${this.subscription.id}",${JSON.stringify(this.filter)},"${a}"]`)}close(){this.relay.send(`["NEG-CLOSE","${this.subscription.id}"]`),this.subscription.close()}},xS={};ye(xS,{getToken:()=>wS,hashPayload:()=>Pd,unpackEventFromToken:()=>yv,validateEvent:()=>Sv,validateEventKind:()=>_v,validateEventMethodTag:()=>xv,validateEventPayloadTag:()=>wv,validateEventTimestamp:()=>vv,validateEventUrlTag:()=>bv,validateToken:()=>SS});var gv="Nostr ";async function wS(a,s,l,u=!1,d){const p={kind:zd,tags:[["u",a],["method",s]],created_at:Math.round(new Date().getTime()/1e3),content:""};d&&p.tags.push(["payload",Pd(d)]);const _=await l(p);return(u?gv:"")+_a.encode(gi.encode(JSON.stringify(_)))}async function SS(a,s,l){const u=await yv(a).catch(p=>{throw p});return await Sv(u,s,l).catch(p=>{throw p})}async function yv(a){if(!a)throw new Error("Missing token");a=a.replace(gv,"");const s=va.decode(_a.decode(a));if(!s||s.length===0||!s.startsWith("{"))throw new Error("Invalid token");return JSON.parse(s)}function vv(a){return a.created_at?Math.round(new Date().getTime()/1e3)-a.created_at<60:!1}function _v(a){return a.kind===zd}function bv(a,s){const l=a.tags.find(u=>u[0]==="u");return l?l.length>0&&l[1]===s:!1}function xv(a,s){const l=a.tags.find(u=>u[0]==="method");return l?l.length>0&&l[1].toLowerCase()===s.toLowerCase():!1}function Pd(a){const s=ps(gi.encode(JSON.stringify(a)));return De(s)}function wv(a,s){const l=a.tags.find(d=>d[0]==="payload");if(!l)return!1;const u=Pd(s);return l.length>0&&l[1]===u}async function Sv(a,s,l,u){if(!_c(a))throw new Error("Invalid nostr event, signature invalid");if(!_v(a))throw new Error("Invalid nostr event, kind invalid");if(!vv(a))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!bv(a,s))throw new Error("Invalid nostr event, url tag invalid");if(!xv(a,l))throw new Error("Invalid nostr event, method tag invalid");if(u&&typeof u=="object"&&Object.keys(u).length>0&&!wv(a,u))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const w0=a=>Array.from(a).map(s=>s.toString(16).padStart(2,"0")).join(""),Ev=X.createContext(null),ES=({children:a})=>{const[s,l]=X.useState(localStorage.getItem("parlens_pubkey")),[u]=X.useState(new Jw),d=async(b,v,w)=>{let A="",T=null;if(b==="extension"){if(!window.nostr)throw new Error("Nostr extension not found");A=await window.nostr.getPublicKey()}else if(b==="nsec"&&v)try{const N=ar.decode(v);if(N.type!=="nsec")throw new Error("Not an nsec");T=N.data,A=gl(T),localStorage.setItem("parlens_privkey",w0(T))}catch{throw new Error("Invalid nsec format")}else b==="create"&&(T=Ty(),A=gl(T),localStorage.setItem("parlens_privkey",w0(T)));if(l(A),localStorage.setItem("parlens_pubkey",A),b==="create"&&w&&T)try{const N=ni({kind:0,created_at:Math.floor(Date.now()/1e3),tags:[],content:JSON.stringify({name:w,display_name:w,picture:`https://api.dicebear.com/7.x/bottts/svg?seed=${A}`})},T);await Promise.any([u.publish(["wss://relay.damus.io","wss://nos.lol"],N)])}catch(N){console.warn("Failed to publish metadata:",N)}},p=()=>{l(null),localStorage.removeItem("parlens_pubkey"),localStorage.removeItem("parlens_privkey")},_=async b=>{const v=localStorage.getItem("parlens_privkey");if(v){const w=new Uint8Array(v.match(/.{1,2}/g).map(A=>parseInt(A,16)));return ni(b,w)}if(window.nostr)return await window.nostr.signEvent(b);throw new Error("No signing method available")};return x.jsx(Ev.Provider,{value:{pubkey:s,login:d,logout:p,pool:u,signEvent:_},children:a})},ao=()=>{const a=X.useContext(Ev);if(!a)throw new Error("useAuth must be used within AuthProvider");return a};const TS=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AS=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,l,u)=>u?u.toUpperCase():l.toLowerCase()),S0=a=>{const s=AS(a);return s.charAt(0).toUpperCase()+s.slice(1)},Tv=(...a)=>a.filter((s,l,u)=>!!s&&s.trim()!==""&&u.indexOf(s)===l).join(" ").trim(),zS=a=>{for(const s in a)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};var CS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const LS=X.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:p,iconNode:_,...b},v)=>X.createElement("svg",{ref:v,...CS,width:s,height:s,stroke:a,strokeWidth:u?Number(l)*24/Number(s):l,className:Tv("lucide",d),...!p&&!zS(b)&&{"aria-hidden":"true"},...b},[..._.map(([w,A])=>X.createElement(w,A)),...Array.isArray(p)?p:[p]]));const be=(a,s)=>{const l=X.forwardRef(({className:u,...d},p)=>X.createElement(LS,{ref:p,iconNode:s,className:Tv(`lucide-${TS(S0(a))}`,`lucide-${a}`,u),...d}));return l.displayName=S0(a),l};const NS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],MS=be("arrow-right",NS);const OS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kS=be("check",OS);const RS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vl=be("chevron-down",RS);const BS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oc=be("chevron-right",BS);const jS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],DS=be("chevron-up",jS);const US=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],E0=be("circle-question-mark",US);const HS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Av=be("clock",HS);const PS=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ZS=be("compass",PS);const qS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],GS=be("eye-off",qS);const VS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YS=be("eye",VS);const IS=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],KS=be("folder-open",IS);const QS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],td=be("key",QS);const XS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_l=be("map-pin",XS);const FS=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],JS=be("map-pinned",FS);const WS=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ed=be("navigation",WS);const $S=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],tE=be("pencil",$S);const eE=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],nE=be("route",eE);const iE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],aE=be("save",iE);const sE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rE=be("search",sE);const oE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zv=be("shield",oE);const lE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nd=be("trash-2",lE);const uE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cE=be("user-plus",uE);const fE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hE=be("user",fE);const dE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zd=be("x",dE);function mE(a,s){const l=X.useRef(s);X.useEffect(function(){s!==l.current&&a.attributionControl!=null&&(l.current!=null&&a.attributionControl.removeAttribution(l.current),s!=null&&a.attributionControl.addAttribution(s)),l.current=s},[a,s])}U0();const pE=1;function gE(a){return Object.freeze({__version:pE,map:a})}function Cv(a,s){return Object.freeze({...a,...s})}const qd=X.createContext(null);function Gd(){const a=X.use(qd);if(a==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return a}function Lv(a){function s(l,u){const{instance:d,context:p}=a(l).current;X.useImperativeHandle(u,()=>d);const{children:_}=l;return _==null?null:Jr.createElement(qd,{value:p},_)}return X.forwardRef(s)}function yE(a){function s(l,u){const{instance:d}=a(l).current;return X.useImperativeHandle(u,()=>d),null}return X.forwardRef(s)}function Nv(a,s){const l=X.useRef(void 0);X.useEffect(function(){return s!=null&&a.instance.on(s),l.current=s,function(){l.current!=null&&a.instance.off(l.current),l.current=null}},[a,s])}function Vd(a,s){const l=a.pane??s.pane;return l?{...a,pane:l}:a}var dl={exports:{}};var vE=dl.exports,T0;function _E(){return T0||(T0=1,(function(a,s){(function(l,u){u(s)})(vE,(function(l){var u="1.9.4";function d(n){var r,c,m,g;for(c=1,m=arguments.length;c<m;c++){g=arguments[c];for(r in g)n[r]=g[r]}return n}var p=Object.create||(function(){function n(){}return function(r){return n.prototype=r,new n}})();function _(n,r){var c=Array.prototype.slice;if(n.bind)return n.bind.apply(n,c.call(arguments,1));var m=c.call(arguments,2);return function(){return n.apply(r,m.length?m.concat(c.call(arguments)):arguments)}}var b=0;function v(n){return"_leaflet_id"in n||(n._leaflet_id=++b),n._leaflet_id}function w(n,r,c){var m,g,S,M;return M=function(){m=!1,g&&(S.apply(c,g),g=!1)},S=function(){m?g=arguments:(n.apply(c,arguments),setTimeout(M,r),m=!0)},S}function A(n,r,c){var m=r[1],g=r[0],S=m-g;return n===m&&c?n:((n-g)%S+S)%S+g}function T(){return!1}function N(n,r){if(r===!1)return n;var c=Math.pow(10,r===void 0?6:r);return Math.round(n*c)/c}function j(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function B(n){return j(n).split(/\s+/)}function z(n,r){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?p(n.options):{});for(var c in r)n.options[c]=r[c];return n.options}function P(n,r,c){var m=[];for(var g in n)m.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(n[g]));return(!r||r.indexOf("?")===-1?"?":"&")+m.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function et(n,r){return n.replace(Z,function(c,m){var g=r[m];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(r)),g})}var at=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function ct(n,r){for(var c=0;c<n.length;c++)if(n[c]===r)return c;return-1}var ut="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ot(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var F=0;function $(n){var r=+new Date,c=Math.max(0,16-(r-F));return F=r+c,window.setTimeout(n,c)}var gt=window.requestAnimationFrame||ot("RequestAnimationFrame")||$,yt=window.cancelAnimationFrame||ot("CancelAnimationFrame")||ot("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function ht(n,r,c){if(c&&gt===$)n.call(r);else return gt.call(window,_(n,r))}function vt(n){n&&yt.call(window,n)}var kt={__proto__:null,extend:d,create:p,bind:_,get lastId(){return b},stamp:v,throttle:w,wrapNum:A,falseFn:T,formatNum:N,trim:j,splitWords:B,setOptions:z,getParamString:P,template:et,isArray:at,indexOf:ct,emptyImageUrl:ut,requestFn:gt,cancelFn:yt,requestAnimFrame:ht,cancelAnimFrame:vt};function Ct(){}Ct.extend=function(n){var r=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=r.__super__=this.prototype,m=p(c);m.constructor=r,r.prototype=m;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(r[g]=this[g]);return n.statics&&d(r,n.statics),n.includes&&(st(n.includes),d.apply(null,[m].concat(n.includes))),d(m,n),delete m.statics,delete m.includes,m.options&&(m.options=c.options?p(c.options):{},d(m.options,n.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,M=m._initHooks.length;S<M;S++)m._initHooks[S].call(this)}},r},Ct.include=function(n){var r=this.prototype.options;return d(this.prototype,n),n.options&&(this.prototype.options=r,this.mergeOptions(n.options)),this},Ct.mergeOptions=function(n){return d(this.prototype.options,n),this},Ct.addInitHook=function(n){var r=Array.prototype.slice.call(arguments,1),c=typeof n=="function"?n:function(){this[n].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function st(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=at(n)?n:[n];for(var r=0;r<n.length;r++)n[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var O={on:function(n,r,c){if(typeof n=="object")for(var m in n)this._on(m,n[m],r);else{n=B(n);for(var g=0,S=n.length;g<S;g++)this._on(n[g],r,c)}return this},off:function(n,r,c){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var m in n)this._off(m,n[m],r);else{n=B(n);for(var g=arguments.length===1,S=0,M=n.length;S<M;S++)g?this._off(n[S]):this._off(n[S],r,c)}return this},_on:function(n,r,c,m){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(n,r,c)===!1){c===this&&(c=void 0);var g={fn:r,ctx:c};m&&(g.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(g)}},_off:function(n,r,c){var m,g,S;if(this._events&&(m=this._events[n],!!m)){if(arguments.length===1){if(this._firingCount)for(g=0,S=m.length;g<S;g++)m[g].fn=T;delete this._events[n];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var M=this._listens(n,r,c);if(M!==!1){var U=m[M];this._firingCount&&(U.fn=T,this._events[n]=m=m.slice()),m.splice(M,1)}}},fire:function(n,r,c){if(!this.listens(n,c))return this;var m=d({},r,{type:n,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var g=this._events[n];if(g){this._firingCount=this._firingCount+1||1;for(var S=0,M=g.length;S<M;S++){var U=g[S],V=U.fn;U.once&&this.off(n,V,U.ctx),V.call(U.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(n,r,c,m){typeof n!="string"&&console.warn('"string" type argument expected');var g=r;typeof r!="function"&&(m=!!r,g=void 0,c=void 0);var S=this._events&&this._events[n];if(S&&S.length&&this._listens(n,g,c)!==!1)return!0;if(m){for(var M in this._eventParents)if(this._eventParents[M].listens(n,r,c,m))return!0}return!1},_listens:function(n,r,c){if(!this._events)return!1;var m=this._events[n]||[];if(!r)return!!m.length;c===this&&(c=void 0);for(var g=0,S=m.length;g<S;g++)if(m[g].fn===r&&m[g].ctx===c)return g;return!1},once:function(n,r,c){if(typeof n=="object")for(var m in n)this._on(m,n[m],r,!0);else{n=B(n);for(var g=0,S=n.length;g<S;g++)this._on(n[g],r,c,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[v(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[v(n)],this},_propagateEvent:function(n){for(var r in this._eventParents)this._eventParents[r].fire(n.type,d({layer:n.target,propagatedFrom:n.target},n),!0)}};O.addEventListener=O.on,O.removeEventListener=O.clearAllEventListeners=O.off,O.addOneTimeEventListener=O.once,O.fireEvent=O.fire,O.hasEventListeners=O.listens;var I=Ct.extend(O);function K(n,r,c){this.x=c?Math.round(n):n,this.y=c?Math.round(r):r}var mt=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(n){return this.clone()._add(tt(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(tt(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new K(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new K(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=mt(this.x),this.y=mt(this.y),this},distanceTo:function(n){n=tt(n);var r=n.x-this.x,c=n.y-this.y;return Math.sqrt(r*r+c*c)},equals:function(n){return n=tt(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=tt(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function tt(n,r,c){return n instanceof K?n:at(n)?new K(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new K(n.x,n.y):new K(n,r,c)}function C(n,r){if(n)for(var c=r?[n,r]:n,m=0,g=c.length;m<g;m++)this.extend(c[m])}C.prototype={extend:function(n){var r,c;if(!n)return this;if(n instanceof K||typeof n[0]=="number"||"x"in n)r=c=tt(n);else if(n=H(n),r=n.min,c=n.max,!r||!c)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=c.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(n){return tt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return tt(this.min.x,this.max.y)},getTopRight:function(){return tt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var r,c;return typeof n[0]=="number"||n instanceof K?n=tt(n):n=H(n),n instanceof C?(r=n.min,c=n.max):r=c=n,r.x>=this.min.x&&c.x<=this.max.x&&r.y>=this.min.y&&c.y<=this.max.y},intersects:function(n){n=H(n);var r=this.min,c=this.max,m=n.min,g=n.max,S=g.x>=r.x&&m.x<=c.x,M=g.y>=r.y&&m.y<=c.y;return S&&M},overlaps:function(n){n=H(n);var r=this.min,c=this.max,m=n.min,g=n.max,S=g.x>r.x&&m.x<c.x,M=g.y>r.y&&m.y<c.y;return S&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var r=this.min,c=this.max,m=Math.abs(r.x-c.x)*n,g=Math.abs(r.y-c.y)*n;return H(tt(r.x-m,r.y-g),tt(c.x+m,c.y+g))},equals:function(n){return n?(n=H(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function H(n,r){return!n||n instanceof C?n:new C(n,r)}function rt(n,r){if(n)for(var c=r?[n,r]:n,m=0,g=c.length;m<g;m++)this.extend(c[m])}rt.prototype={extend:function(n){var r=this._southWest,c=this._northEast,m,g;if(n instanceof ft)m=n,g=n;else if(n instanceof rt){if(m=n._southWest,g=n._northEast,!m||!g)return this}else return n?this.extend(dt(n)||lt(n)):this;return!r&&!c?(this._southWest=new ft(m.lat,m.lng),this._northEast=new ft(g.lat,g.lng)):(r.lat=Math.min(m.lat,r.lat),r.lng=Math.min(m.lng,r.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(n){var r=this._southWest,c=this._northEast,m=Math.abs(r.lat-c.lat)*n,g=Math.abs(r.lng-c.lng)*n;return new rt(new ft(r.lat-m,r.lng-g),new ft(c.lat+m,c.lng+g))},getCenter:function(){return new ft((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ft(this.getNorth(),this.getWest())},getSouthEast:function(){return new ft(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof ft||"lat"in n?n=dt(n):n=lt(n);var r=this._southWest,c=this._northEast,m,g;return n instanceof rt?(m=n.getSouthWest(),g=n.getNorthEast()):m=g=n,m.lat>=r.lat&&g.lat<=c.lat&&m.lng>=r.lng&&g.lng<=c.lng},intersects:function(n){n=lt(n);var r=this._southWest,c=this._northEast,m=n.getSouthWest(),g=n.getNorthEast(),S=g.lat>=r.lat&&m.lat<=c.lat,M=g.lng>=r.lng&&m.lng<=c.lng;return S&&M},overlaps:function(n){n=lt(n);var r=this._southWest,c=this._northEast,m=n.getSouthWest(),g=n.getNorthEast(),S=g.lat>r.lat&&m.lat<c.lat,M=g.lng>r.lng&&m.lng<c.lng;return S&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,r){return n?(n=lt(n),this._southWest.equals(n.getSouthWest(),r)&&this._northEast.equals(n.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function lt(n,r){return n instanceof rt?n:new rt(n,r)}function ft(n,r,c){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r,c!==void 0&&(this.alt=+c)}ft.prototype={equals:function(n,r){if(!n)return!1;n=dt(n);var c=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return c<=(r===void 0?1e-9:r)},toString:function(n){return"LatLng("+N(this.lat,n)+", "+N(this.lng,n)+")"},distanceTo:function(n){return Jt.distance(this,dt(n))},wrap:function(){return Jt.wrapLatLng(this)},toBounds:function(n){var r=180*n/40075017,c=r/Math.cos(Math.PI/180*this.lat);return lt([this.lat-r,this.lng-c],[this.lat+r,this.lng+c])},clone:function(){return new ft(this.lat,this.lng,this.alt)}};function dt(n,r,c){return n instanceof ft?n:at(n)&&typeof n[0]!="object"?n.length===3?new ft(n[0],n[1],n[2]):n.length===2?new ft(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new ft(n.lat,"lng"in n?n.lng:n.lon,n.alt):r===void 0?null:new ft(n,r,c)}var Tt={latLngToPoint:function(n,r){var c=this.projection.project(n),m=this.scale(r);return this.transformation._transform(c,m)},pointToLatLng:function(n,r){var c=this.scale(r),m=this.transformation.untransform(n,c);return this.projection.unproject(m)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var r=this.projection.bounds,c=this.scale(n),m=this.transformation.transform(r.min,c),g=this.transformation.transform(r.max,c);return new C(m,g)},infinite:!1,wrapLatLng:function(n){var r=this.wrapLng?A(n.lng,this.wrapLng,!0):n.lng,c=this.wrapLat?A(n.lat,this.wrapLat,!0):n.lat,m=n.alt;return new ft(c,r,m)},wrapLatLngBounds:function(n){var r=n.getCenter(),c=this.wrapLatLng(r),m=r.lat-c.lat,g=r.lng-c.lng;if(m===0&&g===0)return n;var S=n.getSouthWest(),M=n.getNorthEast(),U=new ft(S.lat-m,S.lng-g),V=new ft(M.lat-m,M.lng-g);return new rt(U,V)}},Jt=d({},Tt,{wrapLng:[-180,180],R:6371e3,distance:function(n,r){var c=Math.PI/180,m=n.lat*c,g=r.lat*c,S=Math.sin((r.lat-n.lat)*c/2),M=Math.sin((r.lng-n.lng)*c/2),U=S*S+Math.cos(m)*Math.cos(g)*M*M,V=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*V}}),Rt=6378137,xe={R:Rt,MAX_LATITUDE:85.0511287798,project:function(n){var r=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,n.lat),-c),g=Math.sin(m*r);return new K(this.R*n.lng*r,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(n){var r=180/Math.PI;return new ft((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*r,n.x*r/this.R)},bounds:(function(){var n=Rt*Math.PI;return new C([-n,-n],[n,n])})()};function fn(n,r,c,m){if(at(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=r,this._c=c,this._d=m}fn.prototype={transform:function(n,r){return this._transform(n.clone(),r)},_transform:function(n,r){return r=r||1,n.x=r*(this._a*n.x+this._b),n.y=r*(this._c*n.y+this._d),n},untransform:function(n,r){return r=r||1,new K((n.x/r-this._b)/this._a,(n.y/r-this._d)/this._c)}};function fe(n,r,c,m){return new fn(n,r,c,m)}var Ue=d({},Jt,{code:"EPSG:3857",projection:xe,transformation:(function(){var n=.5/(Math.PI*xe.R);return fe(n,.5,-n,.5)})()}),He=d({},Ue,{code:"EPSG:900913"});function hn(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Mn(n,r){var c="",m,g,S,M,U,V;for(m=0,S=n.length;m<S;m++){for(U=n[m],g=0,M=U.length;g<M;g++)V=U[g],c+=(g?"L":"M")+V.x+" "+V.y;c+=r?St.svg?"z":"x":""}return c||"M0 0"}var yi=document.documentElement.style,Xe="ActiveXObject"in window,bt=Xe&&!document.addEventListener,Nt="msLaunchUri"in navigator&&!("documentMode"in document),Ht=yn("webkit"),qt=yn("android"),_t=yn("android 2")||yn("android 3"),Lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),At=qt&&yn("Google")&&Lt<537&&!("AudioNode"in window),Bt=!!window.opera,Gt=!Nt&&yn("chrome"),Se=yn("gecko")&&!Ht&&!Bt&&!Xe,nn=!Gt&&yn("safari"),Ge=yn("phantom"),an="OTransition"in yi,qn=navigator.platform.indexOf("Win")===0,sn=Xe&&"transition"in yi,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_t,On="MozPerspective"in yi,Fe=!window.L_DISABLE_3D&&(sn||me||On)&&!an&&!Ge,vi=typeof orientation<"u"||yn("mobile"),or=vi&&Ht,ro=vi&&me,qi=!window.PointerEvent&&window.MSPointerEvent,Ea=!!(window.PointerEvent||qi),Gi="ontouchstart"in window||!!window.TouchEvent,ii=!window.L_NO_TOUCH&&(Gi||Ea),_i=vi&&Bt,Vi=vi&&Se,Cc=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,El=(function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",T,r),window.removeEventListener("testPassiveEventSupport",T,r)}catch{}return n})(),oo=(function(){return!!document.createElement("canvas").getContext})(),Yi=!!(document.createElementNS&&hn("svg").createSVGRect),Lc=!!Yi&&(function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Tl=!Yi&&(function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var r=n.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}})(),Al=navigator.platform.indexOf("Mac")===0,zl=navigator.platform.indexOf("Linux")===0;function yn(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var St={ie:Xe,ielt9:bt,edge:Nt,webkit:Ht,android:qt,android23:_t,androidStock:At,opera:Bt,chrome:Gt,gecko:Se,safari:nn,phantom:Ge,opera12:an,win:qn,ie3d:sn,webkit3d:me,gecko3d:On,any3d:Fe,mobile:vi,mobileWebkit:or,mobileWebkit3d:ro,msPointer:qi,pointer:Ea,touch:ii,touchNative:Gi,mobileOpera:_i,mobileGecko:Vi,retina:Cc,passiveEvents:El,canvas:oo,svg:Yi,vml:Tl,inlineSvg:Lc,mac:Al,linux:zl},lo=St.msPointer?"MSPointerDown":"pointerdown",uo=St.msPointer?"MSPointerMove":"pointermove",ai=St.msPointer?"MSPointerUp":"pointerup",Me=St.msPointer?"MSPointerCancel":"pointercancel",Ve={touchstart:lo,touchmove:uo,touchend:ai,touchcancel:Me},Ii={touchstart:Aa,touchmove:xi,touchend:xi,touchcancel:xi},bi={},Cl=!1;function Nc(n,r,c){return r==="touchstart"&&Ta(),Ii[r]?(c=Ii[r].bind(this,c),n.addEventListener(Ve[r],c,!1),c):(console.warn("wrong event specified:",r),T)}function Ll(n,r,c){if(!Ve[r]){console.warn("wrong event specified:",r);return}n.removeEventListener(Ve[r],c,!1)}function ys(n){bi[n.pointerId]=n}function co(n){bi[n.pointerId]&&(bi[n.pointerId]=n)}function Ki(n){delete bi[n.pointerId]}function Ta(){Cl||(document.addEventListener(lo,ys,!0),document.addEventListener(uo,co,!0),document.addEventListener(ai,Ki,!0),document.addEventListener(Me,Ki,!0),Cl=!0)}function xi(n,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var c in bi)r.touches.push(bi[c]);r.changedTouches=[r],n(r)}}function Aa(n,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&Ee(r),xi(n,r)}function Oe(n){var r={},c,m;for(m in n)c=n[m],r[m]=c&&c.bind?c.bind(n):c;return n=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var Nl=200;function Ml(n,r){n.addEventListener("dblclick",r);var c=0,m;function g(S){if(S.detail!==1){m=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var M=Es(S);if(!(M.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!M.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var U=Date.now();U-c<=Nl?(m++,m===2&&r(Oe(S))):m=1,c=U}}}return n.addEventListener("click",g),{dblclick:r,simDblclick:g}}function Qi(n,r){n.removeEventListener("dblclick",r.dblclick),n.removeEventListener("click",r.simDblclick)}var wi=bs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),vs=bs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fo=vs==="webkitTransition"||vs==="OTransition"?vs+"End":"transitionend";function ho(n){return typeof n=="string"?document.getElementById(n):n}function _s(n,r){var c=n.style[r]||n.currentStyle&&n.currentStyle[r];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(n,null);c=m?m[r]:null}return c==="auto"?null:c}function Vt(n,r,c){var m=document.createElement(n);return m.className=r||"",c&&c.appendChild(m),m}function oe(n){var r=n.parentNode;r&&r.removeChild(n)}function vn(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Pe(n){var r=n.parentNode;r&&r.lastChild!==n&&r.appendChild(n)}function Xi(n){var r=n.parentNode;r&&r.firstChild!==n&&r.insertBefore(n,r.firstChild)}function mo(n,r){if(n.classList!==void 0)return n.classList.contains(r);var c=lr(n);return c.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(c)}function jt(n,r){if(n.classList!==void 0)for(var c=B(r),m=0,g=c.length;m<g;m++)n.classList.add(c[m]);else if(!mo(n,r)){var S=lr(n);za(n,(S?S+" ":"")+r)}}function ve(n,r){n.classList!==void 0?n.classList.remove(r):za(n,j((" "+lr(n)+" ").replace(" "+r+" "," ")))}function za(n,r){n.className.baseVal===void 0?n.className=r:n.className.baseVal=r}function lr(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function pe(n,r){"opacity"in n.style?n.style.opacity=r:"filter"in n.style&&po(n,r)}function po(n,r){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=n.filters.item(m)}catch{if(r===1)return}r=Math.round(r*100),c?(c.Enabled=r!==100,c.Opacity=r):n.style.filter+=" progid:"+m+"(opacity="+r+")"}function bs(n){for(var r=document.documentElement.style,c=0;c<n.length;c++)if(n[c]in r)return n[c];return!1}function si(n,r,c){var m=r||new K(0,0);n.style[wi]=(St.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function he(n,r){n._leaflet_pos=r,St.any3d?si(n,r):(n.style.left=r.x+"px",n.style.top=r.y+"px")}function Si(n){return n._leaflet_pos||new K(0,0)}var Ca,Gn,go;if("onselectstart"in document)Ca=function(){Ot(window,"selectstart",Ee)},Gn=function(){ae(window,"selectstart",Ee)};else{var La=bs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ca=function(){if(La){var n=document.documentElement.style;go=n[La],n[La]="none"}},Gn=function(){La&&(document.documentElement.style[La]=go,go=void 0)}}function ur(){Ot(window,"dragstart",Ee)}function xs(){ae(window,"dragstart",Ee)}var cr,yo;function Na(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(_n(),cr=n,yo=n.style.outlineStyle,n.style.outlineStyle="none",Ot(window,"keydown",_n))}function _n(){cr&&(cr.style.outlineStyle=yo,cr=void 0,yo=void 0,ae(window,"keydown",_n))}function fr(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ws(n){var r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth||1,y:r.height/n.offsetHeight||1,boundingClientRect:r}}var Ma={__proto__:null,TRANSFORM:wi,TRANSITION:vs,TRANSITION_END:fo,get:ho,getStyle:_s,create:Vt,remove:oe,empty:vn,toFront:Pe,toBack:Xi,hasClass:mo,addClass:jt,removeClass:ve,setClass:za,getClass:lr,setOpacity:pe,testProp:bs,setTransform:si,setPosition:he,getPosition:Si,get disableTextSelection(){return Ca},get enableTextSelection(){return Gn},disableImageDrag:ur,enableImageDrag:xs,preventOutline:Na,restoreOutline:_n,getSizedParentNode:fr,getScale:ws};function Ot(n,r,c,m){if(r&&typeof r=="object")for(var g in r)Rn(n,g,r[g],c);else{r=B(r);for(var S=0,M=r.length;S<M;S++)Rn(n,r[S],c,m)}return this}var kn="_leaflet_events";function ae(n,r,c,m){if(arguments.length===1)vo(n),delete n[kn];else if(r&&typeof r=="object")for(var g in r)Ss(n,g,r[g],c);else if(r=B(r),arguments.length===2)vo(n,function(U){return ct(r,U)!==-1});else for(var S=0,M=r.length;S<M;S++)Ss(n,r[S],c,m);return this}function vo(n,r){for(var c in n[kn]){var m=c.split(/\d/)[0];(!r||r(m))&&Ss(n,m,null,null,c)}}var Fi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Rn(n,r,c,m){var g=r+v(c)+(m?"_"+v(m):"");if(n[kn]&&n[kn][g])return this;var S=function(U){return c.call(m||n,U||window.event)},M=S;!St.touchNative&&St.pointer&&r.indexOf("touch")===0?S=Nc(n,r,S):St.touch&&r==="dblclick"?S=Ml(n,S):"addEventListener"in n?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?n.addEventListener(Fi[r]||r,S,St.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(S=function(U){U=U||window.event,ri(n,U)&&M(U)},n.addEventListener(Fi[r],S,!1)):n.addEventListener(r,M,!1):n.attachEvent("on"+r,S),n[kn]=n[kn]||{},n[kn][g]=S}function Ss(n,r,c,m,g){g=g||r+v(c)+(m?"_"+v(m):"");var S=n[kn]&&n[kn][g];if(!S)return this;!St.touchNative&&St.pointer&&r.indexOf("touch")===0?Ll(n,r,S):St.touch&&r==="dblclick"?Qi(n,S):"removeEventListener"in n?n.removeEventListener(Fi[r]||r,S,!1):n.detachEvent("on"+r,S),n[kn][g]=null}function Bn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Vn(n){return Rn(n,"wheel",Bn),this}function Ji(n){return Ot(n,"mousedown touchstart dblclick contextmenu",Bn),n._leaflet_disable_click=!0,this}function Ee(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Ei(n){return Ee(n),Bn(n),this}function Es(n){if(n.composedPath)return n.composedPath();for(var r=[],c=n.target;c;)r.push(c),c=c.parentNode;return r}function Ts(n,r){if(!r)return new K(n.clientX,n.clientY);var c=ws(r),m=c.boundingClientRect;return new K((n.clientX-m.left)/c.x-r.clientLeft,(n.clientY-m.top)/c.y-r.clientTop)}var Ol=St.linux&&St.chrome?window.devicePixelRatio:St.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Je(n){return St.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Ol:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function ri(n,r){var c=r.relatedTarget;if(!c)return!0;try{for(;c&&c!==n;)c=c.parentNode}catch{return!1}return c!==n}var hr={__proto__:null,on:Ot,off:ae,stopPropagation:Bn,disableScrollPropagation:Vn,disableClickPropagation:Ji,preventDefault:Ee,stop:Ei,getPropagationPath:Es,getMousePosition:Ts,getWheelDelta:Je,isExternalTarget:ri,addListener:Ot,removeListener:ae},Oa=I.extend({run:function(n,r,c,m){this.stop(),this._el=n,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Si(n),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ht(this._animate,this),this._step()},_step:function(n){var r=+new Date-this._startTime,c=this._duration*1e3;r<c?this._runFrame(this._easeOut(r/c),n):(this._runFrame(1),this._complete())},_runFrame:function(n,r){var c=this._startPos.add(this._offset.multiplyBy(n));r&&c._round(),he(this._el,c),this.fire("step")},_complete:function(){vt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Qt=I.extend({options:{crs:Ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,r){r=z(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=_(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(dt(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=vs&&St.any3d&&!St.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ot(this._proxy,fo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,r,c){if(r=r===void 0?this._zoom:this._limitZoom(r),n=this._limitCenter(dt(n),r,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=d({animate:c.animate},c.zoom),c.pan=d({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,r,c.zoom):this._tryAnimatedPan(n,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(n,r,c.pan&&c.pan.noMoveStart),this},setZoom:function(n,r){return this._loaded?this.setView(this.getCenter(),n,{zoom:r}):(this._zoom=n,this)},zoomIn:function(n,r){return n=n||(St.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,r)},zoomOut:function(n,r){return n=n||(St.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,r)},setZoomAround:function(n,r,c){var m=this.getZoomScale(r),g=this.getSize().divideBy(2),S=n instanceof K?n:this.latLngToContainerPoint(n),M=S.subtract(g).multiplyBy(1-1/m),U=this.containerPointToLatLng(g.add(M));return this.setView(U,r,{zoom:c})},_getBoundsCenterZoom:function(n,r){r=r||{},n=n.getBounds?n.getBounds():lt(n);var c=tt(r.paddingTopLeft||r.padding||[0,0]),m=tt(r.paddingBottomRight||r.padding||[0,0]),g=this.getBoundsZoom(n,!1,c.add(m));if(g=typeof r.maxZoom=="number"?Math.min(r.maxZoom,g):g,g===1/0)return{center:n.getCenter(),zoom:g};var S=m.subtract(c).divideBy(2),M=this.project(n.getSouthWest(),g),U=this.project(n.getNorthEast(),g),V=this.unproject(M.add(U).divideBy(2).add(S),g);return{center:V,zoom:g}},fitBounds:function(n,r){if(n=lt(n),!n.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(n,r);return this.setView(c.center,c.zoom,r)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,r){return this.setView(n,this._zoom,{pan:r})},panBy:function(n,r){if(n=tt(n).round(),r=r||{},!n.x&&!n.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Oa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){jt(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,c,r.duration||.25,r.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,r,c){if(c=c||{},c.animate===!1||!St.any3d)return this.setView(n,r,c);this._stop();var m=this.project(this.getCenter()),g=this.project(n),S=this.getSize(),M=this._zoom;n=dt(n),r=r===void 0?M:r;var U=Math.max(S.x,S.y),V=U*this.getZoomScale(M,r),nt=g.distanceTo(m)||1,pt=1.42,Et=pt*pt;function Pt(we){var ci=we?-1:1,ea=we?V:U,ko=V*V-U*U+ci*Et*Et*nt*nt,Zs=2*ea*Et*nt,qs=ko/Zs,ki=Math.sqrt(qs*qs+1)-qs,fi=ki<1e-9?-18:Math.log(ki);return fi}function Ze(we){return(Math.exp(we)-Math.exp(-we))/2}function Te(we){return(Math.exp(we)+Math.exp(-we))/2}function mn(we){return Ze(we)/Te(we)}var Wt=Pt(0);function $t(we){return U*(Te(Wt)/Te(Wt+pt*we))}function Yt(we){return U*(Te(Wt)*mn(Wt+pt*we)-Ze(Wt))/Et}function Mi(we){return 1-Math.pow(1-we,1.5)}var Sn=Date.now(),Ar=(Pt(1)-Wt)/pt,Oi=c.duration?1e3*c.duration:1e3*Ar*.8;function Oo(){var we=(Date.now()-Sn)/Oi,ci=Mi(we)*Ar;we<=1?(this._flyToFrame=ht(Oo,this),this._move(this.unproject(m.add(g.subtract(m).multiplyBy(Yt(ci)/nt)),M),this.getScaleZoom(U/$t(ci),M),{flyTo:!0})):this._move(n,r)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Oo.call(this),this},flyToBounds:function(n,r){var c=this._getBoundsCenterZoom(n,r);return this.flyTo(c.center,c.zoom,r)},setMaxBounds:function(n){return n=lt(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var r=this.options.minZoom;return this.options.minZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var r=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&r!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,r){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,lt(n));return c.equals(m)||this.panTo(m,r),this._enforcingBounds=!1,this},panInside:function(n,r){r=r||{};var c=tt(r.paddingTopLeft||r.padding||[0,0]),m=tt(r.paddingBottomRight||r.padding||[0,0]),g=this.project(this.getCenter()),S=this.project(n),M=this.getPixelBounds(),U=H([M.min.add(c),M.max.subtract(m)]),V=U.getSize();if(!U.contains(S)){this._enforcingBounds=!0;var nt=S.subtract(U.getCenter()),pt=U.extend(S).getSize().subtract(V);g.x+=nt.x<0?-pt.x:pt.x,g.y+=nt.y<0?-pt.y:pt.y,this.panTo(this.unproject(g),r),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=d({animate:!1,pan:!0},n===!0?{animate:!0}:n);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=r.divideBy(2).round(),g=c.divideBy(2).round(),S=m.subtract(g);return!S.x&&!S.y?this:(n.animate&&n.pan?this.panBy(S):(n.pan&&this._rawPanBy(S),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(_(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=d({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=_(this._handleGeolocationResponse,this),c=_(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,c,n):navigator.geolocation.getCurrentPosition(r,c,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var r=n.code,c=n.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var r=n.coords.latitude,c=n.coords.longitude,m=new ft(r,c),g=m.toBounds(n.coords.accuracy*2),S=this._locateOptions;if(S.setView){var M=this.getBoundsZoom(g);this.setView(m,S.maxZoom?Math.min(M,S.maxZoom):M)}var U={latlng:m,bounds:g,timestamp:n.timestamp};for(var V in n.coords)typeof n.coords[V]=="number"&&(U[V]=n.coords[V]);this.fire("locationfound",U)}},addHandler:function(n,r){if(!r)return this;var c=this[n]=new r(this);return this._handlers.push(c),this.options[n]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(vt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)oe(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,r){var c="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),m=Vt("div",c,r||this._mapPane);return n&&(this._panes[n]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),r=this.unproject(n.getBottomLeft()),c=this.unproject(n.getTopRight());return new rt(r,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,r,c){n=lt(n),c=tt(c||[0,0]);var m=this.getZoom()||0,g=this.getMinZoom(),S=this.getMaxZoom(),M=n.getNorthWest(),U=n.getSouthEast(),V=this.getSize().subtract(c),nt=H(this.project(U,m),this.project(M,m)).getSize(),pt=St.any3d?this.options.zoomSnap:1,Et=V.x/nt.x,Pt=V.y/nt.y,Ze=r?Math.max(Et,Pt):Math.min(Et,Pt);return m=this.getScaleZoom(Ze,m),pt&&(m=Math.round(m/(pt/100))*(pt/100),m=r?Math.ceil(m/pt)*pt:Math.floor(m/pt)*pt),Math.max(g,Math.min(S,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,r){var c=this._getTopLeftPoint(n,r);return new C(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,r){var c=this.options.crs;return r=r===void 0?this._zoom:r,c.scale(n)/c.scale(r)},getScaleZoom:function(n,r){var c=this.options.crs;r=r===void 0?this._zoom:r;var m=c.zoom(n*c.scale(r));return isNaN(m)?1/0:m},project:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(dt(n),r)},unproject:function(n,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(tt(n),r)},layerPointToLatLng:function(n){var r=tt(n).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(n){var r=this.project(dt(n))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(dt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(lt(n))},distance:function(n,r){return this.options.crs.distance(dt(n),dt(r))},containerPointToLayerPoint:function(n){return tt(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return tt(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var r=this.containerPointToLayerPoint(tt(n));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(dt(n)))},mouseEventToContainerPoint:function(n){return Ts(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var r=this._container=ho(n);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ot(r,"scroll",this._onScroll,this),this._containerId=v(r)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&St.any3d,jt(n,"leaflet-container"+(St.touch?" leaflet-touch":"")+(St.retina?" leaflet-retina":"")+(St.ielt9?" leaflet-oldie":"")+(St.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=_s(n,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),he(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(jt(n.markerPane,"leaflet-zoom-hide"),jt(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,r,c){he(this._mapPane,new K(0,0));var m=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var g=this._zoom!==r;this._moveStart(g,c)._move(n,r)._moveEnd(g),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(n,r){return n&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(n,r,c,m){r===void 0&&(r=this._zoom);var g=this._zoom!==r;return this._zoom=r,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),m?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return vt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){he(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[v(this._container)]=this;var r=n?ae:Ot;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),St.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){vt(this._resizeRequest),this._resizeRequest=ht(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,r){for(var c=[],m,g=r==="mouseout"||r==="mouseover",S=n.target||n.srcElement,M=!1;S;){if(m=this._targets[v(S)],m&&(r==="click"||r==="preclick")&&this._draggableMoved(m)){M=!0;break}if(m&&m.listens(r,!0)&&(g&&!ri(S,n)||(c.push(m),g))||S===this._container)break;S=S.parentNode}return!c.length&&!M&&!g&&this.listens(r,!0)&&(c=[this]),c},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var r=n.target||n.srcElement;if(!(!this._loaded||r._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(r))){var c=n.type;c==="mousedown"&&Na(r),this._fireDOMEvent(n,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,r,c){if(n.type==="click"){var m=d({},n);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var g=this._findEventTargets(n,r);if(c){for(var S=[],M=0;M<c.length;M++)c[M].listens(r,!0)&&S.push(c[M]);g=S.concat(g)}if(g.length){r==="contextmenu"&&Ee(n);var U=g[0],V={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var nt=U.getLatLng&&(!U._radius||U._radius<=10);V.containerPoint=nt?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(n),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=nt?U.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(M=0;M<g.length;M++)if(g[M].fire(r,V,!0),V.originalEvent._stopped||g[M].options.bubblingMouseEvents===!1&&ct(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,r=this._handlers.length;n<r;n++)this._handlers[n].disable()},whenReady:function(n,r){return this._loaded?n.call(r||this,{target:this}):this.on("load",n,r),this},_getMapPanePos:function(){return Si(this._mapPane)||new K(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,r){var c=n&&r!==void 0?this._getNewPixelOrigin(n,r):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,r){var c=this.getSize()._divideBy(2);return this.project(n,r)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,r,c){var m=this._getNewPixelOrigin(c,r);return this.project(n,r)._subtract(m)},_latLngBoundsToNewLayerBounds:function(n,r,c){var m=this._getNewPixelOrigin(c,r);return H([this.project(n.getSouthWest(),r)._subtract(m),this.project(n.getNorthWest(),r)._subtract(m),this.project(n.getSouthEast(),r)._subtract(m),this.project(n.getNorthEast(),r)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,r,c){if(!c)return n;var m=this.project(n,r),g=this.getSize().divideBy(2),S=new C(m.subtract(g),m.add(g)),M=this._getBoundsOffset(S,c,r);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?n:this.unproject(m.add(M),r)},_limitOffset:function(n,r){if(!r)return n;var c=this.getPixelBounds(),m=new C(c.min.add(n),c.max.add(n));return n.add(this._getBoundsOffset(m,r))},_getBoundsOffset:function(n,r,c){var m=H(this.project(r.getNorthEast(),c),this.project(r.getSouthWest(),c)),g=m.min.subtract(n.min),S=m.max.subtract(n.max),M=this._rebound(g.x,-S.x),U=this._rebound(g.y,-S.y);return new K(M,U)},_rebound:function(n,r){return n+r>0?Math.round(n-r)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(r))},_limitZoom:function(n){var r=this.getMinZoom(),c=this.getMaxZoom(),m=St.any3d?this.options.zoomSnap:1;return m&&(n=Math.round(n/m)*m),Math.max(r,Math.min(c,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,r){var c=this._getCenterOffset(n)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,r),!0)},_createAnimProxy:function(){var n=this._proxy=Vt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(r){var c=wi,m=this._proxy.style[c];si(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),r=this.getZoom();si(this._proxy,this.project(n,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,r,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(r),g=this._getCenterOffset(n)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(g)?!1:(ht(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(n,r,!0)},this),!0)},_animateZoom:function(n,r,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=r,jt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:r,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(_(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _o(n,r){return new Qt(n,r)}var dn=Ct.extend({options:{position:"topright"},initialize:function(n){z(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var r=this._map;return r&&r.removeControl(this),this.options.position=n,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var r=this._container=this.onAdd(n),c=this.getPosition(),m=n._controlCorners[c];return jt(r,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(r,m.firstChild):m.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),oi=function(n){return new dn(n)};Qt.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},r="leaflet-",c=this._controlContainer=Vt("div",r+"control-container",this._container);function m(g,S){var M=r+g+" "+r+S;n[g+S]=Vt("div",M,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)oe(this._controlCorners[n]);oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var As=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,r,c,m){return c<m?-1:m<c?1:0}},initialize:function(n,r,c){z(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in n)this._addLayer(n[m],m);for(m in r)this._addLayer(r[m],m,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return dn.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,r){return this._addLayer(n,r),this._map?this._update():this},addOverlay:function(n,r){return this._addLayer(n,r,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var r=this._getLayer(v(n));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){jt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(jt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",r=this._container=Vt("div",n),c=this.options.collapsed;r.setAttribute("aria-haspopup",!0),Ji(r),Vn(r);var m=this._section=Vt("section",n+"-list");c&&(this._map.on("click",this.collapse,this),Ot(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Vt("a",n+"-toggle",r);g.href="#",g.title="Layers",g.setAttribute("role","button"),Ot(g,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){Ee(S),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Vt("div",n+"-base",m),this._separator=Vt("div",n+"-separator",m),this._overlaysList=Vt("div",n+"-overlays",m),r.appendChild(m)},_getLayer:function(n){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&v(this._layers[r].layer)===n)return this._layers[r]},_addLayer:function(n,r,c){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:r,overlay:c}),this.options.sortLayers&&this._layers.sort(_(function(m,g){return this.options.sortFunction(m.layer,g.layer,m.name,g.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;vn(this._baseLayersList),vn(this._overlaysList),this._layerControlInputs=[];var n,r,c,m,g=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),r=r||m.overlay,n=n||!m.overlay,g+=m.overlay?0:1;return this.options.hideSingleBase&&(n=n&&g>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var r=this._getLayer(v(n.target)),c=r.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;c&&this._map.fire(c,r)},_createRadioElement:function(n,r){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(r?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(n){var r=document.createElement("label"),c=this._map.hasLayer(n.layer),m;n.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+v(this),c),this._layerControlInputs.push(m),m.layerId=v(n.layer),Ot(m,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+n.name;var S=document.createElement("span");r.appendChild(S),S.appendChild(m),S.appendChild(g);var M=n.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,r,c,m=[],g=[];this._handlingClick=!0;for(var S=n.length-1;S>=0;S--)r=n[S],c=this._getLayer(r.layerId).layer,r.checked?m.push(c):r.checked||g.push(c);for(S=0;S<g.length;S++)this._map.hasLayer(g[S])&&this._map.removeLayer(g[S]);for(S=0;S<m.length;S++)this._map.hasLayer(m[S])||this._map.addLayer(m[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,r,c,m=this._map.getZoom(),g=n.length-1;g>=0;g--)r=n[g],c=this._getLayer(r.layerId).layer,r.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Ot(n,"click",Ee),this.expand();var r=this;setTimeout(function(){ae(n,"click",Ee),r._preventClick=!1})}}),kl=function(n,r,c){return new As(n,r,c)},bo=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var r="leaflet-control-zoom",c=Vt("div",r+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,r+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,r+"-out",c,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,r,c,m,g){var S=Vt("a",c,m);return S.innerHTML=n,S.href="#",S.title=r,S.setAttribute("role","button"),S.setAttribute("aria-label",r),Ji(S),Ot(S,"click",Ei),Ot(S,"click",g,this),Ot(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var n=this._map,r="leaflet-disabled";ve(this._zoomInButton,r),ve(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(jt(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(jt(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qt.mergeOptions({zoomControl:!0}),Qt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new bo,this.addControl(this.zoomControl))});var Mc=function(n){return new bo(n)},Rl=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var r="leaflet-control-scale",c=Vt("div",r),m=this.options;return this._addScales(m,r+"-line",c),n.on(m.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),c},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,r,c){n.metric&&(this._mScale=Vt("div",r,c)),n.imperial&&(this._iScale=Vt("div",r,c))},_update:function(){var n=this._map,r=n.getSize().y/2,c=n.distance(n.containerPointToLatLng([0,r]),n.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(c)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var r=this._getRoundNum(n),c=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,c,r/n)},_updateImperial:function(n){var r=n*3.2808399,c,m,g;r>5280?(c=r/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(g=this._getRoundNum(r),this._updateScale(this._iScale,g+" ft",g/r))},_updateScale:function(n,r,c){n.style.width=Math.round(this.options.maxWidth*c)+"px",n.innerHTML=r},_getRoundNum:function(n){var r=Math.pow(10,(Math.floor(n)+"").length-1),c=n/r;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,r*c}}),xo=function(n){return new Rl(n)},Oc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',wo=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(St.inlineSvg?Oc+" ":"")+"Leaflet</a>"},initialize:function(n){z(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Vt("div","leaflet-control-attribution"),Ji(this._container);for(var r in n._layers)n._layers[r].getAttribution&&this.addAttribution(n._layers[r].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var r in this._attributions)this._attributions[r]&&n.push(r);var c=[];this.options.prefix&&c.push(this.options.prefix),n.length&&c.push(n.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Qt.mergeOptions({attributionControl:!0}),Qt.addInitHook(function(){this.options.attributionControl&&new wo().addTo(this)});var kc=function(n){return new wo(n)};dn.Layers=As,dn.Zoom=bo,dn.Scale=Rl,dn.Attribution=wo,oi.layers=kl,oi.zoom=Mc,oi.scale=xo,oi.attribution=kc;var Yn=Ct.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yn.addTo=function(n,r){return n.addHandler(r,this),this};var Rc={Events:O},So=St.touch?"touchstart mousedown":"mousedown",Ti=I.extend({options:{clickTolerance:3},initialize:function(n,r,c,m){z(this,m),this._element=n,this._dragStartTarget=r||n,this._preventOutline=c},enable:function(){this._enabled||(Ot(this._dragStartTarget,So,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ti._dragging===this&&this.finishDrag(!0),ae(this._dragStartTarget,So,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!mo(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){Ti._dragging===this&&this.finishDrag();return}if(!(Ti._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Ti._dragging=this,this._preventOutline&&Na(this._element),ur(),Ca(),!this._moving)){this.fire("down");var r=n.touches?n.touches[0]:n,c=fr(this._element);this._startPoint=new K(r.clientX,r.clientY),this._startPos=Si(this._element),this._parentScale=ws(c);var m=n.type==="mousedown";Ot(document,m?"mousemove":"touchmove",this._onMove,this),Ot(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var r=n.touches&&n.touches.length===1?n.touches[0]:n,c=new K(r.clientX,r.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Ee(n),this._moved||(this.fire("dragstart"),this._moved=!0,jt(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),jt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),he(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){ve(document.body,"leaflet-dragging"),this._lastTarget&&(ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ae(document,"mousemove touchmove",this._onMove,this),ae(document,"mouseup touchend touchcancel",this._onUp,this),xs(),Gn();var r=this._moved&&this._moving;this._moving=!1,Ti._dragging=!1,r&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function Bl(n,r,c){var m,g=[1,4,2,8],S,M,U,V,nt,pt,Et,Pt;for(S=0,pt=n.length;S<pt;S++)n[S]._code=Wi(n[S],r);for(U=0;U<4;U++){for(Et=g[U],m=[],S=0,pt=n.length,M=pt-1;S<pt;M=S++)V=n[S],nt=n[M],V._code&Et?nt._code&Et||(Pt=dr(nt,V,Et,r,c),Pt._code=Wi(Pt,r),m.push(Pt)):(nt._code&Et&&(Pt=dr(nt,V,Et,r,c),Pt._code=Wi(Pt,r),m.push(Pt)),m.push(V));n=m}return n}function jl(n,r){var c,m,g,S,M,U,V,nt,pt;if(!n||n.length===0)throw new Error("latlngs not passed");bn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Et=dt([0,0]),Pt=lt(n),Ze=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());Ze<1700&&(Et=Eo(n));var Te=n.length,mn=[];for(c=0;c<Te;c++){var Wt=dt(n[c]);mn.push(r.project(dt([Wt.lat-Et.lat,Wt.lng-Et.lng])))}for(U=V=nt=0,c=0,m=Te-1;c<Te;m=c++)g=mn[c],S=mn[m],M=g.y*S.x-S.y*g.x,V+=(g.x+S.x)*M,nt+=(g.y+S.y)*M,U+=M*3;U===0?pt=mn[0]:pt=[V/U,nt/U];var $t=r.unproject(tt(pt));return dt([$t.lat+Et.lat,$t.lng+Et.lng])}function Eo(n){for(var r=0,c=0,m=0,g=0;g<n.length;g++){var S=dt(n[g]);r+=S.lat,c+=S.lng,m++}return dt([r/m,c/m])}var To={__proto__:null,clipPolygon:Bl,polygonCenter:jl,centroid:Eo};function Dl(n,r){if(!r||!n.length)return n.slice();var c=r*r;return n=jc(n,c),n=Hl(n,c),n}function Ul(n,r,c){return Math.sqrt(zs(n,r,c,!0))}function Bc(n,r,c){return zs(n,r,c)}function Hl(n,r){var c=n.length,m=typeof Uint8Array<"u"?Uint8Array:Array,g=new m(c);g[0]=g[c-1]=1,Ao(n,g,r,0,c-1);var S,M=[];for(S=0;S<c;S++)g[S]&&M.push(n[S]);return M}function Ao(n,r,c,m,g){var S=0,M,U,V;for(U=m+1;U<=g-1;U++)V=zs(n[U],n[m],n[g],!0),V>S&&(M=U,S=V);S>c&&(r[M]=1,Ao(n,r,c,m,M),Ao(n,r,c,M,g))}function jc(n,r){for(var c=[n[0]],m=1,g=0,S=n.length;m<S;m++)Dc(n[m],n[g])>r&&(c.push(n[m]),g=m);return g<S-1&&c.push(n[S-1]),c}var Pl;function Zl(n,r,c,m,g){var S=m?Pl:Wi(n,c),M=Wi(r,c),U,V,nt;for(Pl=M;;){if(!(S|M))return[n,r];if(S&M)return!1;U=S||M,V=dr(n,r,U,c,g),nt=Wi(V,c),U===S?(n=V,S=nt):(r=V,M=nt)}}function dr(n,r,c,m,g){var S=r.x-n.x,M=r.y-n.y,U=m.min,V=m.max,nt,pt;return c&8?(nt=n.x+S*(V.y-n.y)/M,pt=V.y):c&4?(nt=n.x+S*(U.y-n.y)/M,pt=U.y):c&2?(nt=V.x,pt=n.y+M*(V.x-n.x)/S):c&1&&(nt=U.x,pt=n.y+M*(U.x-n.x)/S),new K(nt,pt,g)}function Wi(n,r){var c=0;return n.x<r.min.x?c|=1:n.x>r.max.x&&(c|=2),n.y<r.min.y?c|=4:n.y>r.max.y&&(c|=8),c}function Dc(n,r){var c=r.x-n.x,m=r.y-n.y;return c*c+m*m}function zs(n,r,c,m){var g=r.x,S=r.y,M=c.x-g,U=c.y-S,V=M*M+U*U,nt;return V>0&&(nt=((n.x-g)*M+(n.y-S)*U)/V,nt>1?(g=c.x,S=c.y):nt>0&&(g+=M*nt,S+=U*nt)),M=n.x-g,U=n.y-S,m?M*M+U*U:new K(g,S)}function bn(n){return!at(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function mr(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),bn(n)}function ka(n,r){var c,m,g,S,M,U,V,nt;if(!n||n.length===0)throw new Error("latlngs not passed");bn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var pt=dt([0,0]),Et=lt(n),Pt=Et.getNorthWest().distanceTo(Et.getSouthWest())*Et.getNorthEast().distanceTo(Et.getNorthWest());Pt<1700&&(pt=Eo(n));var Ze=n.length,Te=[];for(c=0;c<Ze;c++){var mn=dt(n[c]);Te.push(r.project(dt([mn.lat-pt.lat,mn.lng-pt.lng])))}for(c=0,m=0;c<Ze-1;c++)m+=Te[c].distanceTo(Te[c+1])/2;if(m===0)nt=Te[0];else for(c=0,S=0;c<Ze-1;c++)if(M=Te[c],U=Te[c+1],g=M.distanceTo(U),S+=g,S>m){V=(S-m)/g,nt=[U.x-V*(U.x-M.x),U.y-V*(U.y-M.y)];break}var Wt=r.unproject(tt(nt));return dt([Wt.lat+pt.lat,Wt.lng+pt.lng])}var Uc={__proto__:null,simplify:Dl,pointToSegmentDistance:Ul,closestPointOnSegment:Bc,clipSegment:Zl,_getEdgeIntersection:dr,_getBitCode:Wi,_sqClosestPointOnSegment:zs,isFlat:bn,_flat:mr,polylineCenter:ka},pr={project:function(n){return new K(n.lng,n.lat)},unproject:function(n){return new ft(n.y,n.x)},bounds:new C([-180,-90],[180,90])},gr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new C([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var r=Math.PI/180,c=this.R,m=n.lat*r,g=this.R_MINOR/c,S=Math.sqrt(1-g*g),M=S*Math.sin(m),U=Math.tan(Math.PI/4-m/2)/Math.pow((1-M)/(1+M),S/2);return m=-c*Math.log(Math.max(U,1e-10)),new K(n.lng*r*c,m)},unproject:function(n){for(var r=180/Math.PI,c=this.R,m=this.R_MINOR/c,g=Math.sqrt(1-m*m),S=Math.exp(-n.y/c),M=Math.PI/2-2*Math.atan(S),U=0,V=.1,nt;U<15&&Math.abs(V)>1e-7;U++)nt=g*Math.sin(M),nt=Math.pow((1-nt)/(1+nt),g/2),V=Math.PI/2-2*Math.atan(S*nt)-M,M+=V;return new ft(M*r,n.x*r/c)}},ql={__proto__:null,LonLat:pr,Mercator:gr,SphericalMercator:xe},Gl=d({},Jt,{code:"EPSG:3395",projection:gr,transformation:(function(){var n=.5/(Math.PI*gr.R);return fe(n,.5,-n,.5)})()}),zo=d({},Jt,{code:"EPSG:4326",projection:pr,transformation:fe(1/180,1,-1/180,.5)}),Ra=d({},Tt,{projection:pr,transformation:fe(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,r){var c=r.lng-n.lng,m=r.lat-n.lat;return Math.sqrt(c*c+m*m)},infinite:!0});Tt.Earth=Jt,Tt.EPSG3395=Gl,Tt.EPSG3857=Ue,Tt.EPSG900913=He,Tt.EPSG4326=zo,Tt.Simple=Ra;var jn=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[v(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[v(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var r=n.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var c=this.getEvents();r.on(c,this),this.once("remove",function(){r.off(c,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});Qt.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var r=v(n);return this._layers[r]?this:(this._layers[r]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var r=v(n);return this._layers[r]?(this._loaded&&n.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return v(n)in this._layers},eachLayer:function(n,r){for(var c in this._layers)n.call(r,this._layers[c]);return this},_addLayers:function(n){n=n?at(n)?n:[n]:[];for(var r=0,c=n.length;r<c;r++)this.addLayer(n[r])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[v(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var r=v(n);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,r=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var g=this._zoomBoundLayers[m].options;n=g.minZoom===void 0?n:Math.min(n,g.minZoom),r=g.maxZoom===void 0?r:Math.max(r,g.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=n===1/0?void 0:n,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ba=jn.extend({initialize:function(n,r){z(this,r),this._layers={};var c,m;if(n)for(c=0,m=n.length;c<m;c++)this.addLayer(n[c])},addLayer:function(n){var r=this.getLayerId(n);return this._layers[r]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var r=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(n){var r=typeof n=="number"?n:this.getLayerId(n);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[n]&&m[n].apply(m,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,r){for(var c in this._layers)n.call(r,this._layers[c]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return v(n)}}),Hc=function(n,r){return new Ba(n,r)},In=Ba.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Ba.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Ba.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new rt;for(var r in this._layers){var c=this._layers[r];n.extend(c.getBounds?c.getBounds():c.getLatLng())}return n}}),Vl=function(n,r){return new In(n,r)},Kn=Ct.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){z(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,r){var c=this._getIconUrl(n);if(!c){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(m,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(n,r){var c=this.options,m=c[r+"Size"];typeof m=="number"&&(m=[m,m]);var g=tt(m),S=tt(r==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));n.className="leaflet-marker-"+r+" "+(c.className||""),S&&(n.style.marginLeft=-S.x+"px",n.style.marginTop=-S.y+"px"),g&&(n.style.width=g.x+"px",n.style.height=g.y+"px")},_createImg:function(n,r){return r=r||document.createElement("img"),r.src=n,r},_getIconUrl:function(n){return St.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Cs(n){return new Kn(n)}var Ls=Kn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof Ls.imagePath!="string"&&(Ls.imagePath=this._detectIconPath()),(this.options.imagePath||Ls.imagePath)+Kn.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var r=function(c,m,g){var S=m.exec(c);return S&&S[g]};return n=r(n,/^url\((['"])?(.+)\1\)$/,2),n&&r(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Vt("div","leaflet-default-icon-path",document.body),r=_s(n,"background-image")||_s(n,"backgroundImage");if(document.body.removeChild(n),r=this._stripUrl(r),r)return r;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Ns=Yn.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Ti(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),jt(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var r=this._marker,c=r._map,m=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,S=Si(r._icon),M=c.getPixelBounds(),U=c.getPixelOrigin(),V=H(M.min._subtract(U).add(g),M.max._subtract(U).subtract(g));if(!V.contains(S)){var nt=tt((Math.max(V.max.x,S.x)-V.max.x)/(M.max.x-V.max.x)-(Math.min(V.min.x,S.x)-V.min.x)/(M.min.x-V.min.x),(Math.max(V.max.y,S.y)-V.max.y)/(M.max.y-V.max.y)-(Math.min(V.min.y,S.y)-V.min.y)/(M.min.y-V.min.y)).multiplyBy(m);c.panBy(nt,{animate:!1}),this._draggable._newPos._add(nt),this._draggable._startPos._add(nt),he(r._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=ht(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(vt(this._panRequest),this._panRequest=ht(this._adjustPan.bind(this,n)))},_onDrag:function(n){var r=this._marker,c=r._shadow,m=Si(r._icon),g=r._map.layerPointToLatLng(m);c&&he(c,m),r._latlng=g,n.latlng=g,n.oldLatLng=this._oldLatLng,r.fire("move",n).fire("drag",n)},_onDragEnd:function(n){vt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Ms=jn.extend({options:{icon:new Ls,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,r){z(this,r),this._latlng=dt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var r=this._latlng;return this._latlng=dt(n),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=n.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,n.title&&(c.title=n.title),c.tagName==="IMG"&&(c.alt=n.alt||"")),jt(c,r),n.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ot(c,"focus",this._panOnFocus,this);var g=n.icon.createShadow(this._shadow),S=!1;g!==this._shadow&&(this._removeShadow(),S=!0),g&&(jt(g,r),g.alt=""),this._shadow=g,n.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&S&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(this._icon,"focus",this._panOnFocus,this),oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&oe(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&he(this._icon,n),this._shadow&&he(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(jt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ns)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ns(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&pe(this._icon,n),this._shadow&&pe(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var r=this.options.icon.options,c=r.iconSize?tt(r.iconSize):tt(0,0),m=r.iconAnchor?tt(r.iconAnchor):tt(0,0);n.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Yl(n,r){return new Ms(n,r)}var Qn=jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return z(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ja=Qn.extend({options:{fill:!0,radius:10},initialize:function(n,r){z(this,r),this._latlng=dt(n),this._radius=this.options.radius},setLatLng:function(n){var r=this._latlng;return this._latlng=dt(n),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var r=n&&n.radius||this._radius;return Qn.prototype.setStyle.call(this,n),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,c=this._clickTolerance(),m=[n+c,r+c];this._pxBounds=new C(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Il(n,r){return new ja(n,r)}var yr=ja.extend({initialize:function(n,r,c){if(typeof r=="number"&&(r=d({},c,{radius:r})),z(this,r),this._latlng=dt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new rt(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:Qn.prototype.setStyle,_project:function(){var n=this._latlng.lng,r=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===Jt.distance){var g=Math.PI/180,S=this._mRadius/Jt.R/g,M=c.project([r+S,n]),U=c.project([r-S,n]),V=M.add(U).divideBy(2),nt=c.unproject(V).lat,pt=Math.acos((Math.cos(S*g)-Math.sin(r*g)*Math.sin(nt*g))/(Math.cos(r*g)*Math.cos(nt*g)))/g;(isNaN(pt)||pt===0)&&(pt=S/Math.cos(Math.PI/180*r)),this._point=V.subtract(c.getPixelOrigin()),this._radius=isNaN(pt)?0:V.x-c.project([nt,n-pt]).x,this._radiusY=V.y-M.y}else{var Et=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Et).x}this._updateBounds()}});function Kl(n,r,c){return new yr(n,r,c)}var li=Qn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,r){z(this,r),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r=1/0,c=null,m=zs,g,S,M=0,U=this._parts.length;M<U;M++)for(var V=this._parts[M],nt=1,pt=V.length;nt<pt;nt++){g=V[nt-1],S=V[nt];var Et=m(n,g,S,!0);Et<r&&(r=Et,c=m(n,g,S))}return c&&(c.distance=Math.sqrt(r)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ka(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,r){return r=r||this._defaultShape(),n=dt(n),r.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new rt,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return bn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var r=[],c=bn(n),m=0,g=n.length;m<g;m++)c?(r[m]=dt(n[m]),this._bounds.extend(r[m])):r[m]=this._convertLatLngs(n[m]);return r},_project:function(){var n=new C;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),r=new K(n,n);this._rawPxBounds&&(this._pxBounds=new C([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(n,r,c){var m=n[0]instanceof ft,g=n.length,S,M;if(m){for(M=[],S=0;S<g;S++)M[S]=this._map.latLngToLayerPoint(n[S]),c.extend(M[S]);r.push(M)}else for(S=0;S<g;S++)this._projectLatlngs(n[S],r,c)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,c,m,g,S,M,U,V;for(c=0,g=0,S=this._rings.length;c<S;c++)for(V=this._rings[c],m=0,M=V.length;m<M-1;m++)U=Zl(V[m],V[m+1],n,m,!0),U&&(r[g]=r[g]||[],r[g].push(U[0]),(U[1]!==V[m+1]||m===M-2)&&(r[g].push(U[1]),g++))}},_simplifyPoints:function(){for(var n=this._parts,r=this.options.smoothFactor,c=0,m=n.length;c<m;c++)n[c]=Dl(n[c],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,r){var c,m,g,S,M,U,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(c=0,S=this._parts.length;c<S;c++)for(U=this._parts[c],m=0,M=U.length,g=M-1;m<M;g=m++)if(!(!r&&m===0)&&Ul(n,U[g],U[m])<=V)return!0;return!1}});function Pc(n,r){return new li(n,r)}li._flat=mr;var Da=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var r=li.prototype._convertLatLngs.call(this,n),c=r.length;return c>=2&&r[0]instanceof ft&&r[0].equals(r[c-1])&&r.pop(),r},_setLatLngs:function(n){li.prototype._setLatLngs.call(this,n),bn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return bn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,r=this.options.weight,c=new K(r,r);if(n=new C(n.min.subtract(c),n.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,g=this._rings.length,S;m<g;m++)S=Bl(this._rings[m],n,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var r=!1,c,m,g,S,M,U,V,nt;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(S=0,V=this._parts.length;S<V;S++)for(c=this._parts[S],M=0,nt=c.length,U=nt-1;M<nt;U=M++)m=c[M],g=c[U],m.y>n.y!=g.y>n.y&&n.x<(g.x-m.x)*(n.y-m.y)/(g.y-m.y)+m.x&&(r=!r);return r||li.prototype._containsPoint.call(this,n,!0)}});function Zc(n,r){return new Da(n,r)}var ui=In.extend({initialize:function(n,r){z(this,r),this._layers={},n&&this.addData(n)},addData:function(n){var r=at(n)?n:n.features,c,m,g;if(r){for(c=0,m=r.length;c<m;c++)g=r[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var S=this.options;if(S.filter&&!S.filter(n))return this;var M=Ye(n,S);return M?(M.feature=br(n),M.defaultOptions=M.options,this.resetStyle(M),S.onEachFeature&&S.onEachFeature(n,M),this.addLayer(M)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=d({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(r){this._setLayerStyle(r,n)},this)},_setLayerStyle:function(n,r){n.setStyle&&(typeof r=="function"&&(r=r(n.feature)),n.setStyle(r))}});function Ye(n,r){var c=n.type==="Feature"?n.geometry:n,m=c?c.coordinates:null,g=[],S=r&&r.pointToLayer,M=r&&r.coordsToLatLng||vr,U,V,nt,pt;if(!m&&!c)return null;switch(c.type){case"Point":return U=M(m),Ua(S,n,U,r);case"MultiPoint":for(nt=0,pt=m.length;nt<pt;nt++)U=M(m[nt]),g.push(Ua(S,n,U,r));return new In(g);case"LineString":case"MultiLineString":return V=Os(m,c.type==="LineString"?0:1,M),new li(V,r);case"Polygon":case"MultiPolygon":return V=Os(m,c.type==="Polygon"?1:2,M),new Da(V,r);case"GeometryCollection":for(nt=0,pt=c.geometries.length;nt<pt;nt++){var Et=Ye({geometry:c.geometries[nt],type:"Feature",properties:n.properties},r);Et&&g.push(Et)}return new In(g);case"FeatureCollection":for(nt=0,pt=c.features.length;nt<pt;nt++){var Pt=Ye(c.features[nt],r);Pt&&g.push(Pt)}return new In(g);default:throw new Error("Invalid GeoJSON object.")}}function Ua(n,r,c,m){return n?n(r,c):new Ms(c,m&&m.markersInheritOptions&&m)}function vr(n){return new ft(n[1],n[0],n[2])}function Os(n,r,c){for(var m=[],g=0,S=n.length,M;g<S;g++)M=r?Os(n[g],r-1,c):(c||vr)(n[g]),m.push(M);return m}function _r(n,r){return n=dt(n),n.alt!==void 0?[N(n.lng,r),N(n.lat,r),N(n.alt,r)]:[N(n.lng,r),N(n.lat,r)]}function ks(n,r,c,m){for(var g=[],S=0,M=n.length;S<M;S++)g.push(r?ks(n[S],bn(n[S])?0:r-1,c,m):_r(n[S],m));return!r&&c&&g.length>0&&g.push(g[0].slice()),g}function Ai(n,r){return n.feature?d({},n.feature,{geometry:r}):br(r)}function br(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var zi={toGeoJSON:function(n){return Ai(this,{type:"Point",coordinates:_r(this.getLatLng(),n)})}};Ms.include(zi),yr.include(zi),ja.include(zi),li.include({toGeoJSON:function(n){var r=!bn(this._latlngs),c=ks(this._latlngs,r?1:0,!1,n);return Ai(this,{type:(r?"Multi":"")+"LineString",coordinates:c})}}),Da.include({toGeoJSON:function(n){var r=!bn(this._latlngs),c=r&&!bn(this._latlngs[0]),m=ks(this._latlngs,c?2:r?1:0,!0,n);return r||(m=[m]),Ai(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),Ba.include({toMultiPoint:function(n){var r=[];return this.eachLayer(function(c){r.push(c.toGeoJSON(n).geometry.coordinates)}),Ai(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(n);var c=r==="GeometryCollection",m=[];return this.eachLayer(function(g){if(g.toGeoJSON){var S=g.toGeoJSON(n);if(c)m.push(S.geometry);else{var M=br(S);M.type==="FeatureCollection"?m.push.apply(m,M.features):m.push(M)}}}),c?Ai(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function xr(n,r){return new ui(n,r)}var Rs=xr,Ha=jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,r,c){this._url=n,this._bounds=lt(r),z(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(jt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&Pe(this._image),this},bringToBack:function(){return this._map&&Xi(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=lt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",r=this._image=n?this._url:Vt("img");if(jt(r,"leaflet-image-layer"),this._zoomAnimated&&jt(r,"leaflet-zoom-animated"),this.options.className&&jt(r,this.options.className),r.onselectstart=T,r.onmousemove=T,r.onload=_(this.fire,this,"load"),r.onerror=_(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(n){var r=this._map.getZoomScale(n.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;si(this._image,c,r)},_reset:function(){var n=this._image,r=new C(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=r.getSize();he(n,r.min),n.style.width=c.x+"px",n.style.height=c.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Ql=function(n,r,c){return new Ha(n,r,c)},Ci=Ha.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",r=this._image=n?this._url:Vt("video");if(jt(r,"leaflet-image-layer"),this._zoomAnimated&&jt(r,"leaflet-zoom-animated"),this.options.className&&jt(r,this.options.className),r.onselectstart=T,r.onmousemove=T,r.onloadeddata=_(this.fire,this,"load"),n){for(var c=r.getElementsByTagName("source"),m=[],g=0;g<c.length;g++)m.push(c[g].src);this._url=c.length>0?m:[r.src];return}at(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var M=Vt("source");M.src=this._url[S],r.appendChild(M)}}});function Pa(n,r,c){return new Ci(n,r,c)}var wr=Ha.extend({_initImage:function(){var n=this._image=this._url;jt(n,"leaflet-image-layer"),this._zoomAnimated&&jt(n,"leaflet-zoom-animated"),this.options.className&&jt(n,this.options.className),n.onselectstart=T,n.onmousemove=T}});function Xl(n,r,c){return new wr(n,r,c)}var Ie=jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,r){n&&(n instanceof ft||at(n))?(this._latlng=dt(n),z(this,r)):(z(this,n),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&pe(this._container,1),this.bringToFront(),this.options.interactive&&(jt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(_(oe,void 0,this._container),200)):oe(this._container),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=dt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pe(this._container),this},bringToBack:function(){return this._map&&Xi(this._container),this},_prepareOpen:function(n){var r=this._source;if(!r._map)return!1;if(r instanceof In){r=null;var c=this._source._layers;for(var m in c)if(c[m]._map){r=c[m];break}if(!r)return!1;this._source=r}if(!n)if(r.getCenter)n=r.getCenter();else if(r.getLatLng)n=r.getLatLng();else if(r.getBounds)n=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")n.innerHTML=r;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),r=tt(this.options.offset),c=this._getAnchor();this._zoomAnimated?he(this._container,n.add(c)):r=r.add(n).add(c);var m=this._containerBottom=-r.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=m+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Qt.include({_initOverlay:function(n,r,c,m){var g=r;return g instanceof n||(g=new n(m).setContent(r)),c&&g.setLatLng(c),g}}),jn.include({_initOverlay:function(n,r,c,m){var g=c;return g instanceof n?(z(g,m),g._source=this):(g=r&&!m?r:new n(m,this),g.setContent(c)),g}});var Bs=Ie.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Ie.prototype.openOn.call(this,n)},onAdd:function(n){Ie.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qn||this._source.on("preclick",Bn))},onRemove:function(n){Ie.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qn||this._source.off("preclick",Bn))},getEvents:function(){var n=Ie.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",r=this._container=Vt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Vt("div",n+"-content-wrapper",r);if(this._contentNode=Vt("div",n+"-content",c),Ji(r),Vn(this._contentNode),Ot(r,"contextmenu",Bn),this._tipContainer=Vt("div",n+"-tip-container",r),this._tip=Vt("div",n+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Vt("a",n+"-close-button",r);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Ot(m,"click",function(g){Ee(g),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,r=n.style;r.width="",r.whiteSpace="nowrap";var c=n.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),r.width=c+1+"px",r.whiteSpace="",r.height="";var m=n.offsetHeight,g=this.options.maxHeight,S="leaflet-popup-scrolled";g&&m>g?(r.height=g+"px",jt(n,S)):ve(n,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),c=this._getAnchor();he(this._container,r.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,r=parseInt(_s(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+r,m=this._containerWidth,g=new K(this._containerLeft,-c-this._containerBottom);g._add(Si(this._container));var S=n.layerPointToContainerPoint(g),M=tt(this.options.autoPanPadding),U=tt(this.options.autoPanPaddingTopLeft||M),V=tt(this.options.autoPanPaddingBottomRight||M),nt=n.getSize(),pt=0,Et=0;S.x+m+V.x>nt.x&&(pt=S.x+m-nt.x+V.x),S.x-pt-U.x<0&&(pt=S.x-U.x),S.y+c+V.y>nt.y&&(Et=S.y+c-nt.y+V.y),S.y-Et-U.y<0&&(Et=S.y-U.y),(pt||Et)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([pt,Et]))}},_getAnchor:function(){return tt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fl=function(n,r){return new Bs(n,r)};Qt.mergeOptions({closePopupOnClick:!0}),Qt.include({openPopup:function(n,r,c){return this._initOverlay(Bs,n,r,c).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),jn.include({bindPopup:function(n,r){return this._popup=this._initOverlay(Bs,this._popup,n,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof In||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Ei(n);var r=n.layer||n.target;if(this._popup._source===r&&!(r instanceof Qn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=r,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var js=Ie.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Ie.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Ie.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Ie.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",r=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Vt("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var r,c,m=this._map,g=this._container,S=m.latLngToContainerPoint(m.getCenter()),M=m.layerPointToContainerPoint(n),U=this.options.direction,V=g.offsetWidth,nt=g.offsetHeight,pt=tt(this.options.offset),Et=this._getAnchor();U==="top"?(r=V/2,c=nt):U==="bottom"?(r=V/2,c=0):U==="center"?(r=V/2,c=nt/2):U==="right"?(r=0,c=nt/2):U==="left"?(r=V,c=nt/2):M.x<S.x?(U="right",r=0,c=nt/2):(U="left",r=V+(pt.x+Et.x)*2,c=nt/2),n=n.subtract(tt(r,c,!0)).add(pt).add(Et),ve(g,"leaflet-tooltip-right"),ve(g,"leaflet-tooltip-left"),ve(g,"leaflet-tooltip-top"),ve(g,"leaflet-tooltip-bottom"),jt(g,"leaflet-tooltip-"+U),he(g,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&pe(this._container,n)},_animateZoom:function(n){var r=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(r)},_getAnchor:function(){return tt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),qc=function(n,r){return new js(n,r)};Qt.include({openTooltip:function(n,r,c){return this._initOverlay(js,n,r,c).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),jn.include({bindTooltip:function(n,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(js,this._tooltip,n,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var r=n?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[r](c),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof In||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&(Ot(r,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Ot(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var r=typeof n.getElement=="function"&&n.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var r=n.latlng,c,m;this._tooltip.options.sticky&&n.originalEvent&&(c=this._map.mouseEventToContainerPoint(n.originalEvent),m=this._map.containerPointToLayerPoint(c),r=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(r)}});var Jl=Kn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:document.createElement("div"),c=this.options;if(c.html instanceof Element?(vn(r),r.appendChild(c.html)):r.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=tt(c.bgPos);r.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Gc(n){return new Jl(n)}Kn.Default=Ls;var Za=jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:St.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){z(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),oe(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof K?n:new K(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,c=-n(-1/0,1/0),m=0,g=r.length,S;m<g;m++)S=r[m].style.zIndex,r[m]!==this._container&&S&&(c=n(c,+S));isFinite(c)&&(this.options.zIndex=c+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!St.ielt9){pe(this._container,this.options.opacity);var n=+new Date,r=!1,c=!1;for(var m in this._tiles){var g=this._tiles[m];if(!(!g.current||!g.loaded)){var S=Math.min(1,(n-g.loaded)/200);pe(g.el,S),S<1?r=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),r&&(vt(this._fadeFrame),this._fadeFrame=ht(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=Vt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,r=this.options.maxZoom;if(n!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===n?(this._levels[c].el.style.zIndex=r-Math.abs(n-c),this._onUpdateLevel(c)):(oe(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[n],g=this._map;return m||(m=this._levels[n]={},m.el=Vt("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=r,m.origin=g.project(g.unproject(g.getPixelOrigin()),n).round(),m.zoom=n,this._setZoomTransform(m,g.getCenter(),g.getZoom()),T(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var n,r,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)r=this._tiles[n],r.retain=r.current;for(n in this._tiles)if(r=this._tiles[n],r.current&&!r.active){var m=r.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var r in this._tiles)this._tiles[r].coords.z===n&&this._removeTile(r)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)oe(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,r,c,m){var g=Math.floor(n/2),S=Math.floor(r/2),M=c-1,U=new K(+g,+S);U.z=+M;var V=this._tileCoordsToKey(U),nt=this._tiles[V];return nt&&nt.active?(nt.retain=!0,!0):(nt&&nt.loaded&&(nt.retain=!0),M>m?this._retainParent(g,S,M,m):!1)},_retainChildren:function(n,r,c,m){for(var g=2*n;g<2*n+2;g++)for(var S=2*r;S<2*r+2;S++){var M=new K(g,S);M.z=c+1;var U=this._tileCoordsToKey(M),V=this._tiles[U];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);c+1<m&&this._retainChildren(g,S,c+1,m)}},_resetView:function(n){var r=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var r=this.options;return r.minNativeZoom!==void 0&&n<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<n?r.maxNativeZoom:n},_setView:function(n,r,c,m){var g=Math.round(r);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var S=this.options.updateWhenZooming&&g!==this._tileZoom;(!m||S)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(n),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(n,r)},_setZoomTransforms:function(n,r){for(var c in this._levels)this._setZoomTransform(this._levels[c],n,r)},_setZoomTransform:function(n,r,c){var m=this._map.getZoomScale(c,n.zoom),g=n.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(r,c)).round();St.any3d?si(n.el,g,m):he(n.el,g)},_resetGrid:function(){var n=this._map,r=n.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,r.wrapLng[0]],m).x/c.x),Math.ceil(n.project([0,r.wrapLng[1]],m).x/c.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([r.wrapLat[0],0],m).y/c.x),Math.ceil(n.project([r.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var r=this._map,c=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),m=r.getZoomScale(c,this._tileZoom),g=r.project(n,this._tileZoom).floor(),S=r.getSize().divideBy(m*2);return new C(g.subtract(S),g.add(S))},_update:function(n){var r=this._map;if(r){var c=this._clampZoom(r.getZoom());if(n===void 0&&(n=r.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(n),g=this._pxBoundsToTileRange(m),S=g.getCenter(),M=[],U=this.options.keepBuffer,V=new C(g.getBottomLeft().subtract([U,-U]),g.getTopRight().add([U,-U]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var nt in this._tiles){var pt=this._tiles[nt].coords;(pt.z!==this._tileZoom||!V.contains(new K(pt.x,pt.y)))&&(this._tiles[nt].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(n,c);return}for(var Et=g.min.y;Et<=g.max.y;Et++)for(var Pt=g.min.x;Pt<=g.max.x;Pt++){var Ze=new K(Pt,Et);if(Ze.z=this._tileZoom,!!this._isValidTile(Ze)){var Te=this._tiles[this._tileCoordsToKey(Ze)];Te?Te.current=!0:M.push(Ze)}}if(M.sort(function(Wt,$t){return Wt.distanceTo(S)-$t.distanceTo(S)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var mn=document.createDocumentFragment();for(Pt=0;Pt<M.length;Pt++)this._addTile(M[Pt],mn);this._level.el.appendChild(mn)}}}},_isValidTile:function(n){var r=this._map.options.crs;if(!r.infinite){var c=this._globalTileRange;if(!r.wrapLng&&(n.x<c.min.x||n.x>c.max.x)||!r.wrapLat&&(n.y<c.min.y||n.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(n);return lt(this.options.bounds).overlaps(m)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var r=this._map,c=this.getTileSize(),m=n.scaleBy(c),g=m.add(c),S=r.unproject(m,n.z),M=r.unproject(g,n.z);return[S,M]},_tileCoordsToBounds:function(n){var r=this._tileCoordsToNwSe(n),c=new rt(r[0],r[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var r=n.split(":"),c=new K(+r[0],+r[1]);return c.z=+r[2],c},_removeTile:function(n){var r=this._tiles[n];r&&(oe(r.el),delete this._tiles[n],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){jt(n,"leaflet-tile");var r=this.getTileSize();n.style.width=r.x+"px",n.style.height=r.y+"px",n.onselectstart=T,n.onmousemove=T,St.ielt9&&this.options.opacity<1&&pe(n,this.options.opacity)},_addTile:function(n,r){var c=this._getTilePos(n),m=this._tileCoordsToKey(n),g=this.createTile(this._wrapCoords(n),_(this._tileReady,this,n));this._initTile(g),this.createTile.length<2&&ht(_(this._tileReady,this,n,null,g)),he(g,c),this._tiles[m]={el:g,coords:n,current:!0},r.appendChild(g),this.fire("tileloadstart",{tile:g,coords:n})},_tileReady:function(n,r,c){r&&this.fire("tileerror",{error:r,tile:c,coords:n});var m=this._tileCoordsToKey(n);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(pe(c.el,0),vt(this._fadeFrame),this._fadeFrame=ht(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),r||(jt(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),St.ielt9||!this._map._fadeAnimated?ht(this._pruneTiles,this):setTimeout(_(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var r=new K(this._wrapX?A(n.x,this._wrapX):n.x,this._wrapY?A(n.y,this._wrapY):n.y);return r.z=n.z,r},_pxBoundsToTileRange:function(n){var r=this.getTileSize();return new C(n.min.unscaleBy(r).floor(),n.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Wl(n){return new Za(n)}var Li=Za.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,r){this._url=n,r=z(this,r),r.detectRetina&&St.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,r){return this._url===n&&r===void 0&&(r=!0),this._url=n,r||this.redraw(),this},createTile:function(n,r){var c=document.createElement("img");return Ot(c,"load",_(this._tileOnLoad,this,r,c)),Ot(c,"error",_(this._tileOnError,this,r,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(n),c},getTileUrl:function(n){var r={r:St.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-n.y;this.options.tms&&(r.y=c),r["-y"]=c}return et(this._url,d(r,this.options))},_tileOnLoad:function(n,r){St.ielt9?setTimeout(_(n,this,null,r),0):n(null,r)},_tileOnError:function(n,r,c){var m=this.options.errorTileUrl;m&&r.getAttribute("src")!==m&&(r.src=m),n(c,r)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,r=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(n=r-n),n+m},_getSubdomain:function(n){var r=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var n,r;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(r=this._tiles[n].el,r.onload=T,r.onerror=T,!r.complete)){r.src=ut;var c=this._tiles[n].coords;oe(r),delete this._tiles[n],this.fire("tileabort",{tile:r,coords:c})}},_removeTile:function(n){var r=this._tiles[n];if(r)return r.el.setAttribute("src",ut),Za.prototype._removeTile.call(this,n)},_tileReady:function(n,r,c){if(!(!this._map||c&&c.getAttribute("src")===ut))return Za.prototype._tileReady.call(this,n,r,c)}});function xn(n,r){return new Li(n,r)}var Ds=Li.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,r){this._url=n;var c=d({},this.defaultWmsParams);for(var m in r)m in this.options||(c[m]=r[m]);r=z(this,r);var g=r.detectRetina&&St.retina?2:1,S=this.getTileSize();c.width=S.x*g,c.height=S.y*g,this.wmsParams=c},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,Li.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),c=this._crs,m=H(c.project(r[0]),c.project(r[1])),g=m.min,S=m.max,M=(this._wmsVersion>=1.3&&this._crs===zo?[g.y,g.x,S.y,S.x]:[g.x,g.y,S.x,S.y]).join(","),U=Li.prototype.getTileUrl.call(this,n);return U+P(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(n,r){return d(this.wmsParams,n),r||this.redraw(),this}});function wn(n,r){return new Ds(n,r)}Li.WMS=Ds,xn.wms=wn;var rn=jn.extend({options:{padding:.1},initialize:function(n){z(this,n),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),jt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,r){var c=this._map.getZoomScale(r,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,r),S=m.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(n,r));St.any3d?si(this._container,S,c):he(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,r=this._map.getSize(),c=this._map.containerPointToLayerPoint(r.multiplyBy(-n)).round();this._bounds=new C(c,c.add(r.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Sr=rn.extend({options:{tolerance:0},getEvents:function(){var n=rn.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){rn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Ot(n,"mousemove",this._onMouseMove,this),Ot(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ot(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){vt(this._redrawRequest),delete this._ctx,oe(this._container),ae(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var r in this._layers)n=this._layers[r],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rn.prototype._update.call(this);var n=this._bounds,r=this._container,c=n.getSize(),m=St.retina?2:1;he(r,n.min),r.width=m*c.x,r.height=m*c.y,r.style.width=c.x+"px",r.style.height=c.y+"px",St.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){rn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[v(n)]=n;var r=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,c=r.next,m=r.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete n._order,delete this._layers[v(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var r=n.options.dashArray.split(/[, ]+/),c=[],m,g;for(g=0;g<r.length;g++){if(m=Number(r[g]),isNaN(m))return;c.push(m)}n.options._dashArray=c}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||ht(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var r=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new C,this._redrawBounds.extend(n._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(n._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var r=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,r=this._redrawBounds;if(this._ctx.save(),r){var c=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)n=m.layer,(!r||n._pxBounds&&n._pxBounds.intersects(r))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,r){if(this._drawing){var c,m,g,S,M=n._parts,U=M.length,V=this._ctx;if(U){for(V.beginPath(),c=0;c<U;c++){for(m=0,g=M[c].length;m<g;m++)S=M[c][m],V[m?"lineTo":"moveTo"](S.x,S.y);r&&V.closePath()}this._fillStroke(V,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var r=n._point,c=this._ctx,m=Math.max(Math.round(n._radius),1),g=(Math.max(Math.round(n._radiusY),1)||m)/m;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(r.x,r.y/g,m,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,n)}},_fillStroke:function(n,r){var c=r.options;c.fill&&(n.globalAlpha=c.fillOpacity,n.fillStyle=c.fillColor||c.color,n.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(n.setLineDash&&n.setLineDash(r.options&&r.options._dashArray||[]),n.globalAlpha=c.opacity,n.lineWidth=c.weight,n.strokeStyle=c.color,n.lineCap=c.lineCap,n.lineJoin=c.lineJoin,n.stroke())},_onClick:function(n){for(var r=this._map.mouseEventToLayerPoint(n),c,m,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(r)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,r)}},_handleMouseOut:function(n){var r=this._hoveredLayer;r&&(ve(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,r){if(!this._mouseHoverThrottled){for(var c,m,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(r)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(n),m&&(jt(this._container,"leaflet-interactive"),this._fireEvent([m],n,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(_(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,r,c){this._map._fireDOMEvent(r,c||r.type,n)},_bringToFront:function(n){var r=n._order;if(r){var c=r.next,m=r.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(n)}},_bringToBack:function(n){var r=n._order;if(r){var c=r.next,m=r.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(n)}}});function Us(n){return St.canvas?new Sr(n):null}var Ni=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Co={_initContainer:function(){this._container=Vt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(rn.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var r=n._container=Ni("shape");jt(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",n._path=Ni("path"),r.appendChild(n._path),this._updateStyle(n),this._layers[v(n)]=n},_addPath:function(n){var r=n._container;this._container.appendChild(r),n.options.interactive&&n.addInteractiveTarget(r)},_removePath:function(n){var r=n._container;oe(r),n.removeInteractiveTarget(r),delete this._layers[v(n)]},_updateStyle:function(n){var r=n._stroke,c=n._fill,m=n.options,g=n._container;g.stroked=!!m.stroke,g.filled=!!m.fill,m.stroke?(r||(r=n._stroke=Ni("stroke")),g.appendChild(r),r.weight=m.weight+"px",r.color=m.color,r.opacity=m.opacity,m.dashArray?r.dashStyle=at(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=m.lineCap.replace("butt","flat"),r.joinstyle=m.lineJoin):r&&(g.removeChild(r),n._stroke=null),m.fill?(c||(c=n._fill=Ni("fill")),g.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(g.removeChild(c),n._fill=null)},_updateCircle:function(n){var r=n._point.round(),c=Math.round(n._radius),m=Math.round(n._radiusY||c);this._setPath(n,n._empty()?"M0 0":"AL "+r.x+","+r.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(n,r){n._path.v=r},_bringToFront:function(n){Pe(n._container)},_bringToBack:function(n){Xi(n._container)}},Xn=St.vml?Ni:hn,qa=rn.extend({_initContainer:function(){this._container=Xn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){oe(this._container),ae(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){rn.prototype._update.call(this);var n=this._bounds,r=n.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,c.setAttribute("width",r.x),c.setAttribute("height",r.y)),he(c,n.min),c.setAttribute("viewBox",[n.min.x,n.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(n){var r=n._path=Xn("path");n.options.className&&jt(r,n.options.className),n.options.interactive&&jt(r,"leaflet-interactive"),this._updateStyle(n),this._layers[v(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){oe(n._path),n.removeInteractiveTarget(n._path),delete this._layers[v(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var r=n._path,c=n.options;r&&(c.stroke?(r.setAttribute("stroke",c.color),r.setAttribute("stroke-opacity",c.opacity),r.setAttribute("stroke-width",c.weight),r.setAttribute("stroke-linecap",c.lineCap),r.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?r.setAttribute("stroke-dasharray",c.dashArray):r.removeAttribute("stroke-dasharray"),c.dashOffset?r.setAttribute("stroke-dashoffset",c.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),c.fill?(r.setAttribute("fill",c.fillColor||c.color),r.setAttribute("fill-opacity",c.fillOpacity),r.setAttribute("fill-rule",c.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(n,r){this._setPath(n,Mn(n._parts,r))},_updateCircle:function(n){var r=n._point,c=Math.max(Math.round(n._radius),1),m=Math.max(Math.round(n._radiusY),1)||c,g="a"+c+","+m+" 0 1,0 ",S=n._empty()?"M0 0":"M"+(r.x-c)+","+r.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(n,S)},_setPath:function(n,r){n._path.setAttribute("d",r)},_bringToFront:function(n){Pe(n._path)},_bringToBack:function(n){Xi(n._path)}});St.vml&&qa.include(Co);function Hs(n){return St.svg||St.vml?new qa(n):null}Qt.include({getRenderer:function(n){var r=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var r=this._paneRenderers[n];return r===void 0&&(r=this._createRenderer({pane:n}),this._paneRenderers[n]=r),r},_createRenderer:function(n){return this.options.preferCanvas&&Us(n)||Hs(n)}});var $i=Da.extend({initialize:function(n,r){Da.prototype.initialize.call(this,this._boundsToLatLngs(n),r)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=lt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Vc(n,r){return new $i(n,r)}qa.create=Xn,qa.pointsToPath=Mn,ui.geometryToLayer=Ye,ui.coordsToLatLng=vr,ui.coordsToLatLngs=Os,ui.latLngToCoords=_r,ui.latLngsToCoords=ks,ui.getFeature=Ai,ui.asFeature=br,Qt.mergeOptions({boxZoom:!0});var on=Yn.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Ot(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ca(),ur(),this._startPoint=this._map.mouseEventToContainerPoint(n),Ot(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Vt("div","leaflet-zoom-box",this._container),jt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var r=new C(this._point,this._startPoint),c=r.getSize();he(this._box,r.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(oe(this._box),ve(this._container,"leaflet-crosshair")),Gn(),xs(),ae(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(_(this._resetState,this),0);var r=new rt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qt.addInitHook("addHandler","boxZoom",on),Qt.mergeOptions({doubleClickZoom:!0});var Er=Yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var r=this._map,c=r.getZoom(),m=r.options.zoomDelta,g=n.originalEvent.shiftKey?c-m:c+m;r.options.doubleClickZoom==="center"?r.setZoom(g):r.setZoomAround(n.containerPoint,g)}});Qt.addInitHook("addHandler","doubleClickZoom",Er),Qt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fn=Yn.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Ti(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}jt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ve(this._map._container,"leaflet-grab"),ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=lt(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var r=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(r),this._prunePositions(r)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,r){return n-(n-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;n.x<r.min.x&&(n.x=this._viscousLimit(n.x,r.min.x)),n.y<r.min.y&&(n.y=this._viscousLimit(n.y,r.min.y)),n.x>r.max.x&&(n.x=this._viscousLimit(n.x,r.max.x)),n.y>r.max.y&&(n.y=this._viscousLimit(n.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,r=Math.round(n/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,g=(m-r+c)%n+r-c,S=(m+r+c)%n-r-c,M=Math.abs(g+c)<Math.abs(S+c)?g:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(n){var r=this._map,c=r.options,m=!c.inertia||n.noInertia||this._times.length<2;if(r.fire("dragend",n),m)r.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,M=c.easeLinearity,U=g.multiplyBy(M/S),V=U.distanceTo([0,0]),nt=Math.min(c.inertiaMaxSpeed,V),pt=U.multiplyBy(nt/V),Et=nt/(c.inertiaDeceleration*M),Pt=pt.multiplyBy(-Et/2).round();!Pt.x&&!Pt.y?r.fire("moveend"):(Pt=r._limitOffset(Pt,r.options.maxBounds),ht(function(){r.panBy(Pt,{duration:Et,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Qt.addInitHook("addHandler","dragging",Fn),Qt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Lo=Yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Ot(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ae(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,r=document.documentElement,c=n.scrollTop||r.scrollTop,m=n.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var r=this._panKeys={},c=this.keyCodes,m,g;for(m=0,g=c.left.length;m<g;m++)r[c.left[m]]=[-1*n,0];for(m=0,g=c.right.length;m<g;m++)r[c.right[m]]=[n,0];for(m=0,g=c.down.length;m<g;m++)r[c.down[m]]=[0,n];for(m=0,g=c.up.length;m<g;m++)r[c.up[m]]=[0,-1*n]},_setZoomDelta:function(n){var r=this._zoomKeys={},c=this.keyCodes,m,g;for(m=0,g=c.zoomIn.length;m<g;m++)r[c.zoomIn[m]]=n;for(m=0,g=c.zoomOut.length;m<g;m++)r[c.zoomOut[m]]=-n},_addHooks:function(){Ot(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var r=n.keyCode,c=this._map,m;if(r in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[r],n.shiftKey&&(m=tt(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset(tt(m),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(g)}else c.panBy(m)}else if(r in this._zoomKeys)c.setZoom(c.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Ei(n)}}});Qt.addInitHook("addHandler","keyboard",Lo),Qt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ps=Yn.extend({addHooks:function(){Ot(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var r=Je(n),c=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(_(this._performZoom,this),m),Ei(n)},_performZoom:function(){var n=this._map,r=n.getZoom(),c=this._map.options.zoomSnap||0;n._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,S=c?Math.ceil(g/c)*c:g,M=n._limitZoom(r+(this._delta>0?S:-S))-r;this._delta=0,this._startTime=null,M&&(n.options.scrollWheelZoom==="center"?n.setZoom(r+M):n.setZoomAround(this._lastMousePos,r+M))}});Qt.addInitHook("addHandler","scrollWheelZoom",Ps);var ta=600;Qt.mergeOptions({tapHold:St.touchNative&&St.safari&&St.mobile,tapTolerance:15});var Tr=Yn.extend({addHooks:function(){Ot(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var r=n.touches[0];this._startPos=this._newPos=new K(r.clientX,r.clientY),this._holdTimeout=setTimeout(_(function(){this._cancel(),this._isTapValid()&&(Ot(document,"touchend",Ee),Ot(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),ta),Ot(document,"touchend touchcancel contextmenu",this._cancel,this),Ot(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){ae(document,"touchend",Ee),ae(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)},_onMove:function(n){var r=n.touches[0];this._newPos=new K(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,r){var c=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});c._simulated=!0,r.target.dispatchEvent(c)}});Qt.addInitHook("addHandler","tapHold",Tr),Qt.mergeOptions({touchZoom:St.touch,bounceAtZoomLimits:!0});var No=Yn.extend({addHooks:function(){jt(this._map._container,"leaflet-touch-zoom"),Ot(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var r=this._map;if(!(!n.touches||n.touches.length!==2||r._animatingZoom||this._zooming)){var c=r.mouseEventToContainerPoint(n.touches[0]),m=r.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),Ot(document,"touchmove",this._onTouchMove,this),Ot(document,"touchend touchcancel",this._onTouchEnd,this),Ee(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var r=this._map,c=r.mouseEventToContainerPoint(n.touches[0]),m=r.mouseEventToContainerPoint(n.touches[1]),g=c.distanceTo(m)/this._startDist;if(this._zoom=r.getScaleZoom(g,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&g<1||this._zoom>r.getMaxZoom()&&g>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var S=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(g===1&&S.x===0&&S.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),vt(this._animRequest);var M=_(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ht(M,this,!0),Ee(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,vt(this._animRequest),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qt.addInitHook("addHandler","touchZoom",No),Qt.BoxZoom=on,Qt.DoubleClickZoom=Er,Qt.Drag=Fn,Qt.Keyboard=Lo,Qt.ScrollWheelZoom=Ps,Qt.TapHold=Tr,Qt.TouchZoom=No,l.Bounds=C,l.Browser=St,l.CRS=Tt,l.Canvas=Sr,l.Circle=yr,l.CircleMarker=ja,l.Class=Ct,l.Control=dn,l.DivIcon=Jl,l.DivOverlay=Ie,l.DomEvent=hr,l.DomUtil=Ma,l.Draggable=Ti,l.Evented=I,l.FeatureGroup=In,l.GeoJSON=ui,l.GridLayer=Za,l.Handler=Yn,l.Icon=Kn,l.ImageOverlay=Ha,l.LatLng=ft,l.LatLngBounds=rt,l.Layer=jn,l.LayerGroup=Ba,l.LineUtil=Uc,l.Map=Qt,l.Marker=Ms,l.Mixin=Rc,l.Path=Qn,l.Point=K,l.PolyUtil=To,l.Polygon=Da,l.Polyline=li,l.Popup=Bs,l.PosAnimation=Oa,l.Projection=ql,l.Rectangle=$i,l.Renderer=rn,l.SVG=qa,l.SVGOverlay=wr,l.TileLayer=Li,l.Tooltip=js,l.Transformation=fn,l.Util=kt,l.VideoOverlay=Ci,l.bind=_,l.bounds=H,l.canvas=Us,l.circle=Kl,l.circleMarker=Il,l.control=oi,l.divIcon=Gc,l.extend=d,l.featureGroup=Vl,l.geoJSON=xr,l.geoJson=Rs,l.gridLayer=Wl,l.icon=Cs,l.imageOverlay=Ql,l.latLng=dt,l.latLngBounds=lt,l.layerGroup=Hc,l.map=_o,l.marker=Yl,l.point=tt,l.polygon=Zc,l.polyline=Pc,l.popup=Fl,l.rectangle=Vc,l.setOptions=z,l.stamp=v,l.svg=Hs,l.svgOverlay=Xl,l.tileLayer=xn,l.tooltip=qc,l.transformation=fe,l.version=u,l.videoOverlay=Pa;var Mo=window.L;l.noConflict=function(){return window.L=Mo,this},window.L=l}))})(dl,dl.exports)),dl.exports}var Sl=_E();const ba=od(Sl);function Yd(a,s,l){return Object.freeze({instance:a,context:s,container:l})}function Id(a,s){return s==null?function(u,d){const p=X.useRef(void 0);return p.current||(p.current=a(u,d)),p}:function(u,d){const p=X.useRef(void 0);p.current||(p.current=a(u,d));const _=X.useRef(u),{instance:b}=p.current;return X.useEffect(function(){_.current!==u&&(s(b,u,_.current),_.current=u)},[b,u,s]),p}}function Mv(a,s){X.useEffect(function(){return(s.layerContainer??s.map).addLayer(a.instance),function(){s.layerContainer?.removeLayer(a.instance),s.map.removeLayer(a.instance)}},[s,a])}function Ov(a){return function(l){const u=Gd(),d=a(Vd(l,u),u);return mE(u.map,l.attribution),Nv(d.current,l.eventHandlers),Mv(d.current,u),d}}function bE(a,s){const l=X.useRef(void 0);X.useEffect(function(){if(s.pathOptions!==l.current){const d=s.pathOptions??{};a.instance.setStyle(d),l.current=d}},[a,s])}function xE(a){return function(l){const u=Gd(),d=a(Vd(l,u),u);return Nv(d.current,l.eventHandlers),Mv(d.current,u),bE(d.current,l),d}}function wE(a,s){const l=Id(a,s),u=Ov(l);return Lv(u)}function SE(a,s){const l=Id(a,s),u=xE(l);return Lv(u)}function EE(a,s){const l=Id(a,s),u=Ov(l);return yE(u)}function TE(a,s,l){const{opacity:u,zIndex:d}=s;u!=null&&u!==l.opacity&&a.setOpacity(u),d!=null&&d!==l.zIndex&&a.setZIndex(d)}function kv(){return Gd().map}function Kd(a){const s=kv();return X.useEffect(function(){return s.on(a),function(){s.off(a)}},[s,a]),s}function AE({bounds:a,boundsOptions:s,center:l,children:u,className:d,id:p,placeholder:_,style:b,whenReady:v,zoom:w,...A},T){const[N]=X.useState({className:d,id:p,style:b}),[j,B]=X.useState(null),z=X.useRef(void 0);X.useImperativeHandle(T,()=>j?.map??null,[j]);const P=X.useCallback(et=>{if(et!==null&&!z.current){const at=new Sl.Map(et,A);z.current=at,l!=null&&w!=null?at.setView(l,w):a!=null&&at.fitBounds(a,s),v!=null&&at.whenReady(v),B(gE(at))}},[]);X.useEffect(()=>()=>{j?.map.remove()},[j]);const Z=j?Jr.createElement(qd,{value:j},u):_??null;return Jr.createElement("div",{...N,ref:P},Z)}const zE=X.forwardRef(AE),so=wE(function({position:s,...l},u){const d=new Sl.Marker(s,l);return Yd(d,Cv(u,{overlayContainer:d}))},function(s,l,u){l.position!==u.position&&s.setLatLng(l.position),l.icon!=null&&l.icon!==u.icon&&s.setIcon(l.icon),l.zIndexOffset!=null&&l.zIndexOffset!==u.zIndexOffset&&s.setZIndexOffset(l.zIndexOffset),l.opacity!=null&&l.opacity!==u.opacity&&s.setOpacity(l.opacity),s.dragging!=null&&l.draggable!==u.draggable&&(l.draggable===!0?s.dragging.enable():s.dragging.disable())}),A0=SE(function({positions:s,...l},u){const d=new Sl.Polyline(s,l);return Yd(d,Cv(u,{overlayContainer:d}))},function(s,l,u){l.positions!==u.positions&&s.setLatLngs(l.positions)}),CE=EE(function({url:s,...l},u){const d=new Sl.TileLayer(s,Vd(l,u));return Yd(d,u)},function(s,l,u){TE(s,l,u);const{url:d}=l;d!=null&&d!==u.url&&s.setUrl(d)}),pi={PARKING_LOG:31417,OPEN_SPOT_BROADCAST:31714,ROUTE_LOG:34171},Ln=["wss://relay.damus.io","wss://nos.lol","wss://relay.primal.net","wss://relay.snort.social"];function lc(a,s,l=10){const u=[16,8,4,2,1],d="0123456789bcdefghjkmnpqrstuvwxyz";let p=!0,_=-90,b=90,v=-180,w=180,A="",T=0,N=0;for(;A.length<l;){if(p){const j=(v+w)/2;s>j?(N|=u[T],v=j):w=j}else{const j=(_+b)/2;a>j?(N|=u[T],_=j):b=j}p=!p,T<4?T++:(A+=d[N],T=0,N=0)}return A}function LE(a,s,l=5){const u=lc(a,s,l),d=l===5?.02:l===6?.005:.001,p=l===5?.04:l===6?.01:.002,_=new Set;_.add(u);const b=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[v,w]of b){const A=a+v*d,T=s+w*p;_.add(lc(A,T,l))}return Array.from(_)}async function Rv(a,s,l){const u=JSON.stringify(a);if(l){const d=yl.getConversationKey(l,s);return yl.encrypt(u,d)}else if(window.nostr?.nip44?.encrypt)return await window.nostr.nip44.encrypt(s,u);throw new Error("No encryption method available")}async function Bv(a,s,l){let u;if(l){const d=yl.getConversationKey(l,s);u=yl.decrypt(a,d)}else if(window.nostr?.nip44?.decrypt)u=await window.nostr.nip44.decrypt(s,a);else throw new Error("No decryption method available");return JSON.parse(u)}const uc={IN:"INR",US:"USD",GB:"GBP",DE:"EUR",FR:"EUR",ES:"EUR",IT:"EUR",NL:"EUR",BE:"EUR",AT:"EUR",PT:"EUR",IE:"EUR",JP:"JPY",CA:"CAD",AU:"AUD",CN:"CNY",AE:"AED",SG:"SGD",HK:"HKD",CH:"CHF",SE:"SEK",NO:"NOK",DK:"DKK",NZ:"NZD",MX:"MXN",BR:"BRL",ZA:"ZAR",KR:"KRW",TH:"THB",MY:"MYR",PH:"PHP",ID:"IDR",VN:"VND",RU:"RUB",PL:"PLN",TR:"TRY",SA:"SAR",EG:"EGP"};async function NE(a,s){try{const l=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${a}&lon=${s}&zoom=3`,{headers:{"User-Agent":"Parlens-PWA/1.0"}});if(!l.ok)throw new Error("Geocoding failed");const d=(await l.json()).address?.country_code?.toUpperCase();return d&&uc[d]?uc[d]:"USD"}catch(l){return console.warn("Currency detection failed, using locale fallback:",l),jv()}}function jv(){try{const s=window.navigator.language.split("-")[1]?.toUpperCase();return s&&uc[s]?uc[s]:"USD"}catch{return"USD"}}function eo(a){try{return 0 .toLocaleString(window.navigator.language,{style:"currency",currency:a,minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\d/g,"").trim()}catch{return{INR:"",USD:"$",GBP:"",EUR:"",JPY:"",CAD:"C$",AUD:"A$",CNY:"",AED:".",SGD:"S$"}[a]||"$"}}const ME={INR:"IN",USD:"US",GBP:"GB",EUR:"EU",JPY:"JP",CAD:"CA",AUD:"AU",CNY:"CN",AED:"AE",SGD:"SG",HKD:"HK",CHF:"CH",SEK:"SE",NOK:"NO",DKK:"DK",NZD:"NZ",MXN:"MX",BRL:"BR",ZAR:"ZA",KRW:"KR",THB:"TH",MYR:"MY",PHP:"PH",IDR:"ID",VND:"VN",RUB:"RU",PLN:"PL",TRY:"TR",SAR:"SA",EGP:"EG"};function OE(a){return(ME[a]||"US").toUpperCase().replace(/./g,l=>String.fromCodePoint(l.charCodeAt(0)+127397))}var tr=Symbol("verified"),kE=a=>a instanceof Object;function Dv(a){if(!kE(a)||typeof a.kind!="number"||typeof a.content!="string"||typeof a.created_at!="number"||typeof a.pubkey!="string"||!a.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(a.tags))return!1;for(let s=0;s<a.tags.length;s++){let l=a.tags[s];if(!Array.isArray(l))return!1;for(let u=0;u<l.length;u++)if(typeof l[u]!="string")return!1}return!0}new TextDecoder("utf-8");var RE=new TextEncoder,BE=class{generateSecretKey(){return Ui.utils.randomPrivateKey()}getPublicKey(a){return De(Ui.getPublicKey(a))}finalizeEvent(a,s){const l=a;return l.pubkey=De(Ui.getPublicKey(s)),l.id=tc(l),l.sig=De(Ui.sign(tc(l),s)),l[tr]=!0,l}verifyEvent(a){if(typeof a[tr]=="boolean")return a[tr];const s=tc(a);if(s!==a.id)return a[tr]=!1,!1;try{const l=Ui.verify(a.sig,s,a.pubkey);return a[tr]=l,l}catch{return a[tr]=!1,!1}}};function Uv(a){if(!Dv(a))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,a.pubkey,a.created_at,a.kind,a.tags,a.content])}function tc(a){let s=ps(RE.encode(Uv(a)));return De(s)}var Tc=new BE,Hv=Tc.generateSecretKey,jE=Tc.getPublicKey,Pv=Tc.finalizeEvent;Tc.verifyEvent;const DE=Object.freeze(Object.defineProperty({__proto__:null,finalizeEvent:Pv,generateSecretKey:Hv,getEventHash:tc,getPublicKey:jE,serializeEvent:Uv,validateEvent:Dv,verifiedSymbol:tr},Symbol.toStringTag,{value:"Module"})),UE=({status:a,setStatus:s,location:l,vehicleType:u,setOpenSpots:d,parkLocation:p,setParkLocation:_})=>{const{pubkey:b,pool:v,signEvent:w}=ao(),[A,T]=X.useState(!1),[N,j]=X.useState("0"),[B,z]=X.useState("USD"),[P,Z]=X.useState("$"),[et,at]=X.useState(null),ct=Jr.useRef(u);X.useEffect(()=>{if(a==="search"&&l){ct.current!==u&&(d([]),ct.current=u);const F=LE(l[0],l[1],5);console.log("[Parlens] Searching for spots in geohashes:",F);const $=Math.floor(Date.now()/1e3);console.log("[Parlens] Searching for open spots - Kind:",pi.OPEN_SPOT_BROADCAST,"Geohashes:",F),console.log("[Parlens] Subscribing to spots - Kind:",pi.OPEN_SPOT_BROADCAST,"Geohashes:",F);const gt=v.subscribeMany(Ln,[{kinds:[pi.OPEN_SPOT_BROADCAST],"#g":F,since:$-300}],{onevent(yt){try{const ht=yt.tags,vt=ht.find(O=>O[0]==="location"),kt=ht.find(O=>O[0]==="hourly_rate"),Ct=ht.find(O=>O[0]==="currency"),st=ht.find(O=>O[0]==="type");if(vt){const[O,I]=vt[1].split(",").map(Number),K=st?st[1]:"car";if(K!==u)return;const mt=yt.tags.find(H=>H[0]==="expiration"),tt=mt?parseInt(mt[1]):Math.floor(Date.now()/1e3)+300,C={id:yt.id,lat:O,lon:I,price:kt?parseFloat(kt[1]):0,currency:Ct?Ct[1]:"USD",type:K,expiresAt:tt};d(H=>{const rt=Math.floor(Date.now()/1e3),lt=H.filter(ft=>!ft.expiresAt||ft.expiresAt>rt);return lt.find(ft=>ft.id===C.id)?lt:(console.log("[Parlens] New spot received via SUB:",C.id),[...lt,C])})}}catch(ht){console.warn("[Parlens] Error parsing spot:",ht)}},oneose(){console.log("[Parlens] EOSE received for spots")}});return()=>{gt.close()}}},[a,l,u]),X.useEffect(()=>{const F=localStorage.getItem("parlens_session");if(F)try{const $=JSON.parse(F);$.status==="parked"&&$.parkLocation&&$.sessionStart?(console.log("[Parlens] Restoring parked session:",$),at($.sessionStart),_($.parkLocation),s("parked")):$.status==="search"&&(console.log("[Parlens] Restoring search session"),s("search"))}catch($){console.warn("[Parlens] Failed to restore session:",$),localStorage.removeItem("parlens_session")}},[]),X.useEffect(()=>{a==="parked"&&et&&p?(localStorage.setItem("parlens_session",JSON.stringify({status:"parked",sessionStart:et,parkLocation:p})),d([])):a==="search"?localStorage.setItem("parlens_session",JSON.stringify({status:"search"})):a==="idle"&&(localStorage.removeItem("parlens_session"),d([]))},[a,et,p]),X.useEffect(()=>{(async()=>{const $=jv();if(z($),Z(eo($)),l)try{const gt=await NE(l[0],l[1]);z(gt),Z(eo(gt))}catch{console.warn("GPS currency detection failed")}})()},[l]);const ut=async()=>{if(a==="idle"){const F=parseInt(localStorage.getItem("parlens_last_parked_at")||"0"),$=Date.now(),gt=300*1e3;if($-F<gt){const yt=Math.ceil((gt-($-F))/6e4);alert(`Please wait ${yt} minutes before searching for a new spot.`);return}s("search")}else a==="search"?(at(Math.floor(Date.now()/1e3)),_([l[0],l[1]]),d([]),s("parked")):a==="parked"&&(j("0"),T(!0))},ot=async()=>{T(!1),s("submitting");const F=p?p[0]:l[0],$=p?p[1]:l[1],gt=lc(F,$,5),yt=Math.floor(Date.now()/1e3),ht=et||yt;try{const vt={status:"vacated",type:u,lat:F,lon:$,geohash:gt,fee:N,currency:B,started_at:ht,finished_at:yt},kt=localStorage.getItem("parlens_privkey"),Ct=kt?new Uint8Array(kt.match(/.{1,2}/g).map(Rt=>parseInt(Rt,16))):void 0,st=await Rv(vt,b,Ct),O={kind:pi.PARKING_LOG,content:st,tags:[["g",gt],["client","parlens"],["d",`session_${ht}`]],created_at:yt,pubkey:b},I=await w(O);console.log("[Parlens] Publishing log:",I.id,"to",Ln),console.log("[Parlens] Log content (encrypted):",I.content.substring(0,50)+"..."),console.log("[Parlens] Log tags:",I.tags);const K=v.publish(Ln,I),mt=await Promise.allSettled(K);mt.forEach((Rt,xe)=>{Rt.status==="fulfilled"?console.log(`[Parlens] Relay ${Ln[xe]}: Published successfully`):console.error(`[Parlens] Relay ${Ln[xe]}: Failed -`,Rt.reason)});const tt=mt.filter(Rt=>Rt.status==="fulfilled").length;console.log(`[Parlens] Log published to ${tt}/${Ln.length} relays`),tt>0?localStorage.setItem("parlens_last_parked_at",Date.now().toString()):alert("Could not save to Nostr. Check relay connections.");const C=Hv(),H=yt-ht,rt=Math.max(Math.ceil(H/3600),1),lt=(parseFloat(N)/rt).toFixed(2),ft=yt+300,dt={kind:pi.OPEN_SPOT_BROADCAST,content:"",tags:[["d",`spot_${gt}_${yt}`],["g",gt],["location",`${F},${$}`],["hourly_rate",lt],["currency",B],["type",u],["expiration",String(ft)],["client","parlens"]],created_at:yt},Tt=Pv(dt,C);console.log("[Parlens] *** BROADCASTING OPEN SPOT ***"),console.log("[Parlens] Geohash:",gt),console.log("[Parlens] Location:",`${F},${$}`),console.log("[Parlens] Event ID:",Tt.id),console.log("[Parlens] Pubkey:",Tt.pubkey.substring(0,20)+"...");const Jt=v.publish(Ln,Tt);await Promise.allSettled(Jt),console.log("[Parlens] Broadcast published to relays"),at(null),_(null),s("idle")}catch(vt){console.error("Persistence error:",vt),alert("Could not save to Nostr. Check relay connections."),s("idle")}};return x.jsxs("div",{className:"relative flex flex-col items-end gap-4",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[a==="search"&&x.jsx("button",{onClick:()=>{d([]),s("idle")},className:"h-14 px-8 rounded-full bg-red-500/90 text-white font-bold text-xs tracking-widest shadow-2xl backdrop-blur-md animate-in slide-in-from-left-8",children:"CANCEL"}),x.jsxs("button",{onClick:ut,disabled:a==="submitting",className:`h-20 w-20 flex items-center justify-center rounded-[2.5rem] shadow-2xl transition-all active:scale-90 ${a==="idle"?"bg-[#007AFF] text-white shadow-blue-500/20":a==="search"?"bg-[#FF9500] text-white shadow-orange-500/20":a==="submitting"?"bg-[#007AFF] text-white shadow-blue-500/20":"bg-[#34C759] text-white shadow-green-500/20"}`,children:[a==="idle"&&x.jsx(rE,{size:32,strokeWidth:2.5}),a==="search"&&x.jsx(_l,{size:32,strokeWidth:2.5,className:"animate-pulse"}),a==="submitting"&&x.jsx("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin"}),a==="parked"&&(u==="bicycle"?x.jsx("span",{className:"text-3xl",children:""}):u==="motorcycle"?x.jsx("span",{className:"text-3xl",children:""}):x.jsx("span",{className:"text-3xl",children:""}))]})]}),A&&x.jsx("div",{className:"fixed inset-0 z-[2000] flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-xl animate-in fade-in duration-300 p-4",children:x.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-[#1c1c1e] rounded-[2rem] shadow-2xl p-6 flex flex-col items-center space-y-5 animate-in slide-in-from-bottom-10 sm:zoom-in-95 border border-black/5 dark:border-white/10 transition-colors",children:[x.jsxs("div",{className:"text-center space-y-1",children:[x.jsx("h3",{className:"text-2xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"End Session"}),x.jsx("p",{className:"text-xs font-medium text-zinc-500 dark:text-white/40",children:"Enter total parking fee, 0 if free parking"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"flex items-center gap-3 bg-zinc-100 dark:bg-white/5 px-5 py-4 rounded-[1.5rem] border border-black/5 dark:border-white/5",children:[x.jsx("span",{className:"text-2xl font-bold text-blue-500",children:P}),x.jsx("input",{type:"number",value:N,onChange:F=>j(F.target.value),autoFocus:!0,className:"w-20 bg-transparent text-4xl font-black text-center text-zinc-900 dark:text-white focus:outline-none placeholder:text-zinc-300 dark:placeholder:text-white/10 appearance-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none [-moz-appearance:textfield]",min:"0"}),x.jsx("span",{className:"text-sm font-bold text-zinc-400 dark:text-white/20",children:B})]}),x.jsxs("div",{className:"flex flex-col gap-1.5",children:[x.jsx("button",{onClick:()=>j(String(Math.max(0,parseFloat(N||"0")+1))),className:"h-10 w-10 rounded-xl bg-zinc-100 hover:bg-zinc-200 dark:bg-white/10 dark:hover:bg-white/20 active:scale-95 transition-all flex items-center justify-center",children:x.jsx(DS,{size:22,className:"text-zinc-600 dark:text-white/70"})}),x.jsx("button",{onClick:()=>j(String(Math.max(0,parseFloat(N||"0")-1))),className:"h-10 w-10 rounded-xl bg-zinc-100 hover:bg-zinc-200 dark:bg-white/10 dark:hover:bg-white/20 active:scale-95 transition-all flex items-center justify-center",children:x.jsx(vl,{size:22,className:"text-zinc-600 dark:text-white/70"})})]})]}),x.jsxs("div",{className:"w-full space-y-3",children:[x.jsxs("button",{onClick:ot,className:"w-full h-14 rounded-[1.5rem] bg-[#007AFF] text-white text-lg font-bold flex items-center justify-center gap-2 shadow-xl active:scale-95 transition-all",children:["Log Parking ",x.jsx(MS,{size:20})]}),x.jsx("button",{onClick:()=>T(!1),className:"w-full text-xs font-bold text-zinc-400 dark:text-white/30 tracking-widest uppercase py-3 hover:text-zinc-600 dark:hover:text-white/50 transition-colors",children:"Cancel"})]})]})})]})};function HE(){const{pool:a,pubkey:s}=ao(),[l,u]=X.useState([]),[d,p]=X.useState(!0),_=X.useCallback(async()=>{if(s){p(!0),console.log("[useParkingLogs] Fetching logs for",s);try{const b=await a.querySync(Ln,{kinds:[pi.PARKING_LOG],authors:[s],limit:50});console.log("[useParkingLogs] Fetched",b.length,"events");const v=b.sort((w,A)=>A.created_at-w.created_at);u(v)}catch(b){console.error("[useParkingLogs] Fetch error:",b)}finally{p(!1)}}},[a,s]);return X.useEffect(()=>{_()},[_]),{logs:l,loading:d,refetch:_}}const PE=({setHistorySpots:a,onOpenChange:s})=>{const{pubkey:l,logout:u,pool:d,signEvent:p}=ao(),{logs:_,refetch:b}=HE(),[v,w]=X.useState(!1),[A,T]=X.useState(null),[N,j]=X.useState([]),[B,z]=X.useState(!1),[P,Z]=X.useState(!1);X.useEffect(()=>{l&&(async()=>{const ut=await d.get(Ln,{kinds:[0],authors:[l]});if(ut)try{const ot=JSON.parse(ut.content);T({name:ot.name||ot.display_name||"Nostr User",npub:ar.npubEncode(l),picture:ot.picture})}catch(ot){console.error("Error parsing profile:",ot)}else T({name:"Nostr User",npub:ar.npubEncode(l),picture:`https://api.dicebear.com/7.x/bottts/svg?seed=${l}`})})()},[l,d]),X.useEffect(()=>{(async()=>{if(!l||!_.length)return;const ut=localStorage.getItem("parlens_privkey"),ot=ut?new Uint8Array(ut.match(/.{1,2}/g).map($=>parseInt($,16))):void 0,F=await Promise.all(_.map(async $=>{try{const gt=await Bv($.content,l,ot);return{...$,decryptedContent:gt}}catch{return{...$,decryptedContent:null}}}));j(F.filter($=>$.decryptedContent))})()},[_,l]),X.useEffect(()=>{a&&a(B?N:[])},[B,N,a]);const et=()=>{const ct=localStorage.getItem("parlens_privkey");if(ct){const ut=ar.nsecEncode(new Uint8Array(ct.match(/.{1,2}/g).map(ot=>parseInt(ot,16))));navigator.clipboard.writeText(ut),alert("Copied to clipboard")}},at=async ct=>{if(confirm("Are you sure you want to delete this parking entry? This action cannot be undone.")){Z(!0);try{const ut=ct.tags?.find($=>$[0]==="d")?.[1],ot={kind:5,content:"Deleted by user",tags:[["e",ct.id],...ut?[["a",`${pi.PARKING_LOG}:${l}:${ut}`]]:[]],created_at:Math.floor(Date.now()/1e3),pubkey:l},F=await p(ot);await Promise.allSettled(d.publish(Ln,F)),j($=>$.filter(gt=>gt.id!==ct.id)),b(),alert("Entry deleted")}catch(ut){console.error("Delete error:",ut),alert("Failed to delete entry")}finally{Z(!1)}}};return x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>{b(),w(!0),s?.(!0)},className:"h-12 w-12 flex items-center justify-center rounded-[1.5rem] bg-white/80 dark:bg-white/10 backdrop-blur-md text-zinc-600 dark:text-white/70 hover:bg-white dark:hover:bg-white/20 active:scale-95 transition-all shadow-lg border border-black/5 dark:border-white/10",title:"Profile",children:x.jsx(hE,{size:20})}),v&&x.jsxs("div",{className:"fixed inset-0 z-[2000] flex flex-col items-center justify-start bg-black/60 backdrop-blur-xl animate-in fade-in duration-300 pt-2 px-4 pb-4",children:[x.jsx("button",{onClick:()=>{w(!1),s?.(!1)},className:"absolute inset-0 z-0 cursor-default"}),x.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white dark:bg-[#1c1c1e] rounded-[2rem] shadow-2xl p-6 flex flex-col gap-6 animate-in slide-in-from-bottom-10 duration-300 h-[calc(100vh-1.5rem)] overflow-y-auto no-scrollbar border border-black/5 dark:border-white/5 transition-colors",children:[P&&x.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center bg-black/70 backdrop-blur-sm",children:x.jsxs("div",{className:"flex flex-col items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-white/20 border-t-white animate-spin"}),x.jsx("p",{className:"text-sm font-medium text-white",children:"Deleting..."})]})}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:A?.name||"Nostr User"}),x.jsx("button",{onClick:()=>{w(!1),s?.(!1)},className:"p-2 rounded-full bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/20 transition-colors",children:x.jsx(Zd,{size:20,className:"text-black/60 dark:text-white/60"})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h4",{className:"text-xs font-bold uppercase tracking-widest text-zinc-400 dark:text-white/20 ml-2",children:"Keys"}),x.jsxs("div",{className:"space-y-0.5 rounded-[2rem] bg-zinc-50 dark:bg-white/[0.03] border border-black/5 dark:border-white/5",children:[x.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-black/5 dark:hover:bg-white/5 transition-colors cursor-pointer rounded-t-[2rem] last:rounded-b-[2rem]",onClick:()=>{navigator.clipboard.writeText(A?.npub),alert("Copied to clipboard")},children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2.5 rounded-xl bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400",children:x.jsx(td,{size:20})}),x.jsx("span",{className:"font-semibold text-sm text-zinc-700 dark:text-white",children:"Copy Nostr Public Key (Npub)"})]}),x.jsx(oc,{size:18,className:"text-zinc-400 dark:text-white/20"})]}),localStorage.getItem("parlens_privkey")&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"h-[1px] bg-black/5 dark:bg-white/5 mx-4"}),x.jsxs("div",{onClick:et,className:"flex items-center justify-between p-4 cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 transition-colors active:bg-black/10 dark:active:bg-white/10 rounded-b-[2rem]",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2.5 rounded-xl bg-red-500/10 dark:bg-red-500/20 text-red-500",children:x.jsx(zv,{size:20})}),x.jsx("span",{className:"font-semibold text-sm text-zinc-700 dark:text-white",children:"Copy Nostr Secret Key (Nsec)"})]}),x.jsx(oc,{size:18,className:"text-zinc-400 dark:text-white/20"})]})]})]}),x.jsx("p",{className:"text-xs text-zinc-400 dark:text-white/30 mt-2 ml-2 leading-relaxed",children:" Store your npub and nsec securely. These are your account access keys and cannot be recovered if lost."})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h4",{className:"text-xs font-bold uppercase tracking-widest text-zinc-400 dark:text-white/20 ml-2",children:"Parking History"}),a&&x.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-white/5 rounded-[2rem] border border-black/5 dark:border-white/5 mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2.5 rounded-xl bg-purple-500/10 dark:bg-purple-500/20 text-purple-500 dark:text-purple-400",children:x.jsx(_l,{size:20})}),x.jsx("span",{className:"font-semibold text-sm text-zinc-700 dark:text-white",children:"Show logs on map"})]}),x.jsx("button",{onClick:()=>z(!B),className:`w-12 h-7 rounded-full transition-colors relative ${B?"bg-blue-500":"bg-zinc-200 dark:bg-white/20"}`,children:x.jsx("div",{className:`absolute top-1 bottom-1 w-5 h-5 rounded-full bg-white transition-transform ${B?"left-[calc(100%-1.25rem-0.25rem)]":"left-1"}`})})]}),x.jsx("div",{className:"space-y-2",children:N.length>0?N.map(ct=>{const ut=ct.decryptedContent,ot=eo(ut.currency||"USD"),F=ut.started_at?new Date(ut.started_at*1e3):null,$=ut.finished_at?new Date(ut.finished_at*1e3):new Date(ct.created_at*1e3),gt=ut.lat&&ut.lon?`${ut.lat.toFixed(5)}, ${ut.lon.toFixed(5)}`:null,yt=ut.type||ct.tags?.find(vt=>vt[0]==="type")?.[1]||"car",ht=yt==="bicycle"?"":yt==="motorcycle"?"":"";return x.jsxs("div",{className:"p-5 rounded-[2rem] bg-zinc-50 dark:bg-white/[0.03] space-y-3 border border-black/5 dark:border-white/5 text-zinc-900 dark:text-white",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("span",{className:"text-2xl",children:ht}),x.jsx("p",{className:"font-bold text-xl",children:ut.fee?`${ot}${ut.fee}`:"Free"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-2xl",children:OE(ut.currency||"USD")}),x.jsx("button",{onClick:()=>at(ct),className:"p-2 rounded-xl text-zinc-400 dark:text-white/40 active:scale-95 transition-transform",title:"Delete entry",children:x.jsx(nd,{size:16})})]})]}),gt&&x.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 dark:text-white/40",children:[x.jsx(_l,{size:12,className:"text-blue-500 dark:text-blue-400"}),x.jsx("span",{className:"font-mono",children:gt})]}),x.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 dark:text-white/30",children:[x.jsx(Av,{size:12,className:"text-green-500 dark:text-green-400"}),x.jsxs("div",{className:"space-x-1",children:[F&&x.jsxs("span",{children:["Start: ",F.toLocaleDateString(void 0,{month:"short",day:"numeric"})," ",F.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),x.jsx("span",{className:"text-black/10 dark:text-white/10",children:""}),x.jsxs("span",{children:["End: ",$.toLocaleDateString(void 0,{month:"short",day:"numeric"})," ",$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]},ct.id)}):x.jsx("div",{className:"p-10 rounded-[2.5rem] border-2 border-dashed border-black/5 dark:border-white/5 text-center",children:x.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-white/10",children:"No recent activity"})})})]}),x.jsx("button",{onClick:()=>{u(),w(!1),s?.(!1)},className:"w-full py-5 rounded-[2rem] bg-zinc-100 dark:bg-zinc-800 text-red-500 font-bold tracking-wide border border-black/5 dark:border-white/5 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 text-center mt-4",children:"Logout"})]})]})]})},ZE=({vehicleType:a,onRouteChange:s,currentLocation:l,onDropPinModeChange:u,pendingDropPin:d,onDropPinConsumed:p,onOpenChange:_})=>{const{pool:b,pubkey:v,signEvent:w}=ao(),[A,T]=X.useState(!1);X.useEffect(()=>{_?.(A)},[A,_]);const[N,j]=X.useState([]),[B,z]=X.useState(""),[P,Z]=X.useState(!1),[et,at]=X.useState(null),[ct,ut]=X.useState(null),[ot,F]=X.useState(!1),$=X.useRef(null),[gt,yt]=X.useState([]),[ht,vt]=X.useState(""),[kt,Ct]=X.useState(!1),[st,O]=X.useState(!1),[I,K]=X.useState(!1),[mt,tt]=X.useState(!1),[C,H]=X.useState(null),[rt,lt]=X.useState(""),[ft,dt]=X.useState(!1),Tt=Jr.useMemo(()=>{if(!B||B.length<2)return[];const bt=B.toLowerCase(),Nt=[];for(const Ht of gt)for(const qt of Ht.decryptedContent.waypoints)qt.name.toLowerCase().includes(bt)&&(Nt.find(_t=>_t.name.toLowerCase()===qt.name.toLowerCase())||Nt.push({name:qt.name,lat:qt.lat,lon:qt.lon}));return Nt.slice(0,5)},[B,gt]),Jt=bt=>{j(Nt=>Nt.filter(Ht=>Ht.id!==bt)),at(null),ut(null),Z(!1),s(null,null,null,!1)},Rt=()=>{j([]),at(null),ut(null),Z(!1),s(null,null,null,!1)},xe=async()=>{if(N.length<2){alert("Add at least 2 waypoints to create a route");return}F(!0);try{const Nt={bicycle:"cycling",motorcycle:"driving",car:"driving"}[a],Ht=[],qt=[];for(let At=0;At<N.length-1;At++){const Bt=N[At],Gt=N[At+1],Se=`${Bt.lon},${Bt.lat};${Gt.lon},${Gt.lat}`;console.log(`[Parlens] Fetching segment ${At+1}: ${Bt.name}  ${Gt.name}`);const nn=await fetch(`https://router.project-osrm.org/route/v1/${Nt}/${Se}?overview=full&geometries=geojson&alternatives=true`);if(!nn.ok)throw new Error(`OSRM error: ${nn.status}`);const Ge=await nn.json();if(Ge.routes&&Ge.routes[0]){const an=Ge.routes[0].geometry.coordinates.map(qn=>[qn[1],qn[0]]);if(Ht.push(an),Ge.routes.length>1){const qn=Ge.routes[1].geometry.coordinates.map(sn=>[sn[1],sn[0]]);qt.push(qn),console.log(`[Parlens] Segment ${At+1} has alternate route`)}else qt.push(an),console.log(`[Parlens] Segment ${At+1} has no alternate, using primary`)}else throw new Error(`No route found for segment ${At+1}`)}const _t=[],Lt=[];for(let At=0;At<Ht.length;At++){const Bt=At===0?0:1;_t.push(...Ht[At].slice(Bt)),Lt.push(...qt[At].slice(Bt))}console.log("[Parlens] Combined primary route:",_t.length,"points"),console.log("[Parlens] Combined alternate route:",Lt.length,"points"),at(_t),ut(Lt),Z(!0),s(_t,Lt,N.map(At=>({lat:At.lat,lon:At.lon})),!0),T(!1)}catch(bt){console.error("Route creation error:",bt);const Nt=N.map(Ht=>[Ht.lat,Ht.lon]);at(Nt),ut(null),Z(!0),s(Nt,null,N.map(Ht=>({lat:Ht.lat,lon:Ht.lon})),!0),T(!1)}finally{F(!1)}},fn=()=>{const bt=!P;Z(bt),s(et,ct,N.map(Nt=>({lat:Nt.lat,lon:Nt.lon})),bt)},fe=X.useCallback(async()=>{if(!(!b||!v)){O(!0);try{const bt=await b.querySync(Ln,{kinds:[pi.ROUTE_LOG],authors:[v]});console.log("[Parlens] Fetched route events:",bt.length);const Nt=localStorage.getItem("parlens_privkey"),Ht=Nt?new Uint8Array(Nt.match(/.{1,2}/g).map(_t=>parseInt(_t,16))):void 0,qt=[];for(const _t of bt)if(!_t.tags.find(Lt=>Lt[0]==="deleted")&&_t.content)try{const Lt=await Bv(_t.content,v,Ht);if(Lt){const At=_t.tags.find(Bt=>Bt[0]==="d")?.[1]||"";qt.push({id:_t.id,dTag:At,decryptedContent:Lt,created_at:_t.created_at})}}catch(Lt){console.warn("[Parlens] Failed to decrypt route:",Lt)}qt.sort((_t,Lt)=>Lt.created_at-_t.created_at),yt(qt)}catch(bt){console.error("Error fetching saved routes:",bt)}finally{O(!1)}}},[b,v]);X.useEffect(()=>{A&&v&&fe()},[A,v,fe]);const Ue=()=>{const bt=!mt;tt(bt),u?.(bt),bt&&T(!1)};X.useEffect(()=>{if(d){const bt={id:crypto.randomUUID(),name:`Pin ${N.length+1}`,lat:d.lat,lon:d.lon};j(Nt=>[...Nt,bt]),at(null),ut(null),Z(!1),s(null,null,null,!1),p?.(),T(!0),tt(!1),u?.(!1)}},[d]);const He=async()=>{if(!b||!v||!w||!et||N.length<2){alert("Please create a route first");return}const bt=ht.trim()||`Route ${new Date().toLocaleDateString()}`;Ct(!0);try{const Nt={name:bt,waypoints:N.map(Se=>({name:Se.name,lat:Se.lat,lon:Se.lon})),routeCoords:et,alternateRouteCoords:ct||void 0,vehicleType:a,created_at:Math.floor(Date.now()/1e3)},Ht=localStorage.getItem("parlens_privkey"),qt=Ht?new Uint8Array(Ht.match(/.{1,2}/g).map(Se=>parseInt(Se,16))):void 0,_t=await Rv(Nt,v,qt),Lt=`route_${Date.now()}`,At={kind:pi.ROUTE_LOG,created_at:Math.floor(Date.now()/1e3),tags:[["d",Lt],["client","parlens"]],content:_t},Bt=await w(At);console.log("[Parlens] Signed route event:",Bt);const Gt=await Promise.any(b.publish(Ln,Bt));console.log("[Parlens] Route published:",Gt),vt(""),await fe(),alert("Route saved!")}catch(Nt){console.error("[Parlens] Error saving route:",Nt),alert("Failed to save route, try again later")}finally{Ct(!1)}},hn=(bt,Nt)=>{j(Ht=>Ht.map(qt=>qt.id===bt?{...qt,name:Nt}:qt)),H(null),lt("")},Mn=bt=>{H(bt.id),lt(bt.name)},yi=async bt=>{const Nt=bt.decryptedContent,Ht=Nt.waypoints.map(qt=>({id:crypto.randomUUID(),name:qt.name,lat:qt.lat,lon:qt.lon}));j(Ht),at(Nt.routeCoords),ut(Nt.alternateRouteCoords||null),Z(!0),K(!1),s(Nt.routeCoords,Nt.alternateRouteCoords||null,Nt.waypoints.map(qt=>({lat:qt.lat,lon:qt.lon})),!0),T(!1)},Xe=async bt=>{if(!(!b||!v||!w)&&confirm("Are you sure you want to delete this route? This action cannot be undone.")){dt(!0);try{const Nt={kind:5,created_at:Math.floor(Date.now()/1e3),tags:[["e",bt.id],["a",`${pi.ROUTE_LOG}:${v}:${bt.dTag}`]],content:"Deleted by user"},Ht=await w(Nt);await Promise.allSettled(b.publish(Ln,Ht));const qt={kind:pi.ROUTE_LOG,created_at:Math.floor(Date.now()/1e3),tags:[["d",bt.dTag],["deleted","true"]],content:""},_t=await w(qt);await Promise.allSettled(b.publish(Ln,_t)),yt(Lt=>Lt.filter(At=>At.id!==bt.id)),alert("Route deleted")}catch(Nt){console.error("Error deleting route:",Nt),alert("Failed to delete route")}finally{dt(!1)}}};return x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>T(!0),className:"h-12 w-12 flex items-center justify-center rounded-[1.5rem] bg-white/80 dark:bg-white/10 backdrop-blur-md text-zinc-600 dark:text-white/70 hover:bg-white dark:hover:bg-white/20 active:scale-95 transition-all shadow-lg border border-black/5 dark:border-white/10",title:"Create Route",children:x.jsx(nE,{size:20})}),A&&x.jsxs("div",{className:"fixed inset-0 z-[2000] flex flex-col items-center justify-start bg-black/60 backdrop-blur-xl animate-in fade-in duration-300 pt-2 px-4 pb-4",children:[x.jsx("button",{onClick:()=>T(!1),className:"absolute inset-0 z-0 cursor-default"}),x.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white dark:bg-[#1c1c1e] rounded-[2rem] shadow-2xl p-6 flex flex-col gap-6 animate-in slide-in-from-bottom-10 duration-300 h-[calc(100vh-1.5rem)] overflow-y-auto no-scrollbar border border-black/5 dark:border-white/5 transition-colors",children:[ft&&x.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center bg-black/70 backdrop-blur-sm",children:x.jsxs("div",{className:"flex flex-col items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-white/20 border-t-white animate-spin"}),x.jsx("p",{className:"text-sm font-medium text-white",children:"Deleting..."})]})}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-500 to-cyan-500 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:"Create Route"}),x.jsx("button",{onClick:()=>T(!1),className:"p-2 rounded-full bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/20 transition-colors",children:x.jsx(Zd,{size:20,className:"text-black/60 dark:text-white/60"})})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-zinc-400 dark:text-white/30 ml-2",children:"Add Waypoint"}),x.jsx("div",{className:"relative",children:x.jsx("input",{ref:$,type:"text",placeholder:"Search waypoints from saved routes",value:B,onChange:bt=>z(bt.target.value),className:"w-full h-14 rounded-2xl bg-zinc-100 dark:bg-white/5 border border-black/5 dark:border-white/10 px-4 text-zinc-900 dark:text-white placeholder:text-zinc-400 dark:placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),Tt.length>0&&x.jsxs("div",{className:"rounded-2xl overflow-hidden bg-green-50 dark:bg-green-500/10 border border-green-500/20",children:[x.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-green-700 dark:text-green-400 bg-green-100/50 dark:bg-green-500/5",children:" From your saved routes"}),Tt.map((bt,Nt)=>x.jsxs("button",{onClick:()=>{const Ht={id:crypto.randomUUID(),name:bt.name,lat:bt.lat,lon:bt.lon};j(qt=>[...qt,Ht]),z(""),at(null),ut(null),Z(!1),s(null,null,null,!1)},className:"w-full p-3 flex items-center gap-3 hover:bg-green-100 dark:hover:bg-green-500/10 transition-colors text-left border-b border-green-500/10 last:border-0",children:[x.jsx(_l,{size:16,className:"text-green-600 dark:text-green-400 shrink-0"}),x.jsx("span",{className:"flex-1 text-sm text-zinc-700 dark:text-white/80 truncate",children:bt.name})]},`saved-${Nt}`))]}),l&&x.jsxs("button",{onClick:()=>{const bt={id:crypto.randomUUID(),name:"Current Location",lat:l[0],lon:l[1]};j(Nt=>[...Nt,bt]),at(null),ut(null),Z(!1),s(null,null,null,!1)},className:"w-full p-3 flex items-center gap-3 rounded-2xl bg-blue-500/10 dark:bg-blue-500/20 border border-blue-500/20 hover:bg-blue-500/20 transition-colors",children:[x.jsx(ed,{size:16,className:"text-blue-500"}),x.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Add Current Location"})]}),x.jsxs("button",{onClick:Ue,className:"w-full p-3 flex items-center gap-3 rounded-2xl bg-orange-500/10 dark:bg-orange-500/20 border border-orange-500/20 hover:bg-orange-500/20 transition-colors",children:[x.jsx(JS,{size:16,className:"text-orange-500"}),x.jsx("span",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Drop Pin on Map"})]})]}),x.jsxs("div",{className:"space-y-2 flex-1",children:[x.jsxs("label",{className:"text-xs font-bold uppercase tracking-widest text-zinc-400 dark:text-white/30 ml-2",children:["Waypoints (",N.length,")"]}),N.length===0?x.jsx("div",{className:"p-8 text-center text-zinc-400 dark:text-white/30 text-sm",children:"No waypoints added yet."}):x.jsx("div",{className:"space-y-2",children:N.map((bt,Nt)=>x.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-zinc-100 dark:bg-white/5 border border-black/5 dark:border-white/10",children:[x.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs font-bold flex items-center justify-center shrink-0",children:Nt+1}),C===bt.id?x.jsxs(x.Fragment,{children:[x.jsx("input",{type:"text",value:rt,onChange:Ht=>lt(Ht.target.value),className:"flex-1 text-sm bg-white dark:bg-white/10 rounded-lg px-2 py-1 text-zinc-700 dark:text-white border border-blue-500",autoFocus:!0,onKeyDown:Ht=>{Ht.key==="Enter"&&hn(bt.id,rt),Ht.key==="Escape"&&H(null)}}),x.jsx("button",{onClick:()=>hn(bt.id,rt),className:"p-2 rounded-xl text-green-500 hover:bg-green-500/10 transition-colors",children:x.jsx(kS,{size:16})})]}):x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"flex-1 text-sm text-zinc-700 dark:text-white font-medium truncate",children:bt.name}),x.jsx("button",{onClick:()=>Mn(bt),className:"p-2 rounded-xl text-zinc-400 dark:text-white/40 active:scale-95 transition-transform",children:x.jsx(tE,{size:14})})]}),x.jsx("button",{onClick:()=>Jt(bt.id),className:"p-2 rounded-xl text-zinc-400 dark:text-white/40 active:scale-95 transition-transform",children:x.jsx(nd,{size:16})})]},bt.id))})]}),et&&x.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-zinc-100 dark:bg-white/5 border border-black/5 dark:border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[P?x.jsx(YS,{size:20,className:"text-blue-500"}):x.jsx(GS,{size:20,className:"text-zinc-400"}),x.jsx("span",{className:"font-medium text-zinc-700 dark:text-white",children:"Show on Map"})]}),x.jsx("button",{onClick:fn,className:`w-14 h-8 rounded-full transition-colors ${P?"bg-blue-500":"bg-zinc-300 dark:bg-white/20"}`,children:x.jsx("div",{className:`w-6 h-6 rounded-full bg-white shadow-md transition-transform ${P?"translate-x-7":"translate-x-1"}`})})]}),et&&v&&x.jsxs("div",{className:"space-y-3 p-4 rounded-2xl bg-green-500/5 dark:bg-green-500/10 border border-green-500/20",children:[x.jsxs("label",{className:"text-xs font-bold uppercase tracking-widest text-green-600 dark:text-green-400 flex items-center gap-2",children:[x.jsx(aE,{size:14}),"Save Route"]}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[x.jsx("input",{type:"text",value:ht,onChange:bt=>vt(bt.target.value),placeholder:"Route name (optional)",className:"w-full sm:flex-1 p-3 rounded-xl bg-white dark:bg-white/5 border border-black/5 dark:border-white/10 text-zinc-700 dark:text-white placeholder-zinc-400 dark:placeholder-white/40 text-sm"}),x.jsx("button",{onClick:He,disabled:kt,className:"w-full sm:w-auto px-6 rounded-xl bg-green-500 text-white font-bold disabled:opacity-50 transition-all active:scale-95 py-3 sm:py-0",children:kt?"...":"Save"})]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:Rt,disabled:N.length===0,className:"flex-1 h-14 rounded-2xl bg-zinc-200 dark:bg-white/10 text-zinc-600 dark:text-white/70 font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95",children:"Clear Route"}),x.jsx("button",{onClick:xe,disabled:N.length<2||ot,className:"flex-1 h-14 rounded-2xl bg-blue-500 text-white font-bold shadow-lg shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95",children:ot?"Creating...":"Create Route"})]}),!et&&N.length>=2&&v&&x.jsx("p",{className:"text-xs text-center text-zinc-400 dark:text-white/40",children:" Save option will appear after you create the route"}),v&&x.jsxs("div",{className:"space-y-3 border-t border-black/5 dark:border-white/10 pt-4",children:[x.jsxs("button",{onClick:()=>K(!I),className:"w-full flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(KS,{size:18,className:"text-zinc-500 dark:text-white/50"}),x.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest text-zinc-400 dark:text-white/30",children:["Saved Routes (",gt.length,")"]})]}),x.jsx("span",{className:"text-xs text-zinc-400 dark:text-white/40",children:I?"Hide":"Show"})]}),I&&x.jsx("div",{className:"space-y-2",children:st?x.jsx("div",{className:"text-center text-zinc-400 dark:text-white/40 text-sm py-4",children:"Loading..."}):gt.length===0?x.jsx("div",{className:"text-center text-zinc-400 dark:text-white/40 text-sm py-4",children:"No saved routes yet"}):gt.map(bt=>x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-zinc-100 dark:bg-white/5 border border-black/5 dark:border-white/10",children:[x.jsxs("button",{onClick:()=>yi(bt),className:"flex-1 text-left",children:[x.jsx("div",{className:"font-medium text-sm text-zinc-700 dark:text-white truncate",children:bt.decryptedContent.name}),x.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 dark:text-white/40",children:[x.jsxs("span",{children:[bt.decryptedContent.waypoints.length," stops"]}),x.jsx("span",{children:""}),x.jsx(Av,{size:12}),x.jsx("span",{children:new Date(bt.created_at*1e3).toLocaleDateString()})]})]}),x.jsx("button",{onClick:()=>Xe(bt),className:"p-2 rounded-lg text-zinc-400 dark:text-white/40 active:scale-95 transition-transform",children:x.jsx(nd,{size:16})})]},bt.id))})]}),x.jsx("div",{className:"p-3 rounded-xl bg-amber-500/10 dark:bg-amber-500/5 border border-amber-500/20",children:x.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400/80 leading-relaxed",children:[x.jsx("strong",{children:"Tip:"})," Use ",x.jsx("strong",{children:"Drop Pin on Map"})," and",x.jsx("strong",{children:" edit waypoint names"})," to label locations. When you ",x.jsx("strong",{children:"save routes"}),", waypoint names become searchable  building your personal offline map over time! "]})})]})]})]})};function qE(a){return a>=17?8:a>=15?7:a>=13?6:a>=11?5:a>=9?4:3}function z0(a,s,l=!0){if(!l||s>=17||a.length<2)return a;const u=qE(s),d=new Map;for(const _ of a){const b=s>=15?`${_.lat.toFixed(6)},${_.lon.toFixed(6)}`:lc(_.lat,_.lon,u);if(d.has(b)){const v=d.get(b);v.spots.push(_),v.count++,v.minPrice=Math.min(v.minPrice,_.price),v.maxPrice=Math.max(v.maxPrice,_.price),v.lat=v.spots.reduce((w,A)=>w+A.lat,0)/v.count,v.lon=v.spots.reduce((w,A)=>w+A.lon,0)/v.count}else d.set(b,{id:`cluster-${b}`,lat:_.lat,lon:_.lon,spots:[_],minPrice:_.price,maxPrice:_.price,currency:_.currency,count:1})}const p=[];for(const _ of d.values())_.count===1?p.push(_.spots[0]):p.push(_);return p}function C0(a){return"count"in a&&a.count>1}class Zh{q;r;x;p;k;initialized=!1;constructor(s=1e-5,l=.001){this.q=s,this.r=l,this.x=0,this.p=1,this.k=0}filter(s){return this.initialized?(this.p=this.p+this.q,this.k=this.p/(this.p+this.r),this.x=this.x+this.k*(s-this.x),this.p=(1-this.k)*this.p,this.x):(this.x=s,this.initialized=!0,s)}reset(){this.initialized=!1,this.x=0,this.p=1}}class GE{latFilter;lonFilter;bearingFilter;lastBearing=0;constructor(){this.latFilter=new Zh(1e-5,1e-4),this.lonFilter=new Zh(1e-5,1e-4),this.bearingFilter=new Zh(.1,.5)}smoothLocation(s,l){return[this.latFilter.filter(s),this.lonFilter.filter(l)]}smoothBearing(s,l){if(l<2)return null;let u=(s%360+360)%360;if(this.lastBearing!==0){const _=u-this.lastBearing;_>180&&(u-=360),_<-180&&(u+=360)}const p=(this.bearingFilter.filter(u)%360+360)%360;return this.lastBearing=p,p}reset(){this.latFilter.reset(),this.lonFilter.reset(),this.bearingFilter.reset(),this.lastBearing=0}}class VE{currentRotation=0;lastRawBearing=0;initialized=!1;setBearing(s){const l=(s%360+360)%360;if(!this.initialized)return this.currentRotation=l,this.lastRawBearing=l,this.initialized=!0,this.currentRotation;let u=l-this.lastRawBearing;return u>180?u-=360:u<-180&&(u+=360),this.currentRotation+=u,this.lastRawBearing=l,this.currentRotation}getCurrentRotation(){return this.currentRotation}reset(){this.currentRotation=0,this.lastRawBearing=0,this.initialized=!1}}const YE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",IE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",KE=ba.icon({iconUrl:YE,shadowUrl:IE,iconSize:[25,41],iconAnchor:[12,41]});ba.Marker.prototype.options.icon=KE;const QE=({location:a,bearing:s})=>{const l=`
           <div style="transform: rotate(${s}deg); transition: transform 0.05s linear; display: flex; align-items: center; justify-content: center;">
             <div style="width: 28px; height: 28px; background: #007AFF; border: 3px solid white; border-radius: 50%; box-shadow: 0 0 0 2px rgba(0,122,255,0.4), 0 4px 12px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; position: relative;">
                <svg width="14" height="14" viewBox="0 0 14 14" style="transform: translateY(-1px); filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));">
                  <path d="M7 0L14 14L7 12L0 14L7 0Z" fill="white" />
                </svg>
             </div>
           </div>`,u=ba.divIcon({className:"user-location-marker",html:l,iconSize:[40,40],iconAnchor:[20,20]});return x.jsx(so,{position:a,icon:u,zIndexOffset:1e3})},XE=({location:a,vehicleType:s,bearing:l,orientationMode:u})=>{const _=`<div style="font-size: 36px; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4)); transform: rotate(${u==="auto"?l:0}deg);">${s==="bicycle"?"":s==="motorcycle"?"":""}</div>`,b=ba.divIcon({className:"active-session-marker",html:_,iconSize:[40,40],iconAnchor:[20,20]});return x.jsx(so,{position:a,icon:b})},FE=X.memo(({spot:a,bearing:s,orientationMode:l})=>{const d=`
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 60px; transform: rotate(${l==="auto"?s:0}deg);">
             <div style="font-size: 32px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));">
                
             </div>
             <div style="background: #34C759; border-radius: 12px; padding: 2px 8px; font-weight: bold; font-size: 11px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transform: translateY(-5px); white-space: nowrap; color: white;">
                ${a.price>0?`${a.currency==="USD"?"$":a.currency}${a.price.toFixed(2)}/hr`:"Free"}
             </div>
        </div>
    `,p=ba.divIcon({className:"spot-marker",html:d,iconSize:[60,60],iconAnchor:[30,45]});return x.jsx(so,{position:[a.lat,a.lon],icon:p})}),JE=({spot:a,bearing:s,orientationMode:l})=>{const u=a.decryptedContent;if(!u||!u.lat||!u.lon)return null;const p=`
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 60px; transform: rotate(${l==="auto"?s:0}deg);">
             <div style="font-size: 32px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); opacity: 0.7;">
                
             </div>
             <div style="background: #8E8E93; border-radius: 12px; padding: 2px 8px; font-weight: bold; font-size: 11px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transform: translateY(-5px); white-space: nowrap; color: white;">
                ${u.fee?`${eo(u.currency||"USD")}${u.fee}`:"Free"}
             </div>
        </div>
    `,_=ba.divIcon({className:"history-marker",html:p,iconSize:[60,60],iconAnchor:[30,45]});return x.jsx(so,{position:[u.lat,u.lon],icon:_})},L0=({cluster:a,type:s,bearing:l,orientationMode:u})=>{const d=s==="open"?"":"",p=s==="open"?"#34C759":"#8E8E93",_=u==="auto"?l:0,b=a.minPrice===a.maxPrice?a.minPrice>0?`${eo(a.currency)}${a.minPrice}`:"Free":`${eo(a.currency)}${a.minPrice}-${a.maxPrice}`,v=`
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 70px; transform: rotate(${_}deg);">
             <div style="font-size: 28px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); position: relative;">
                ${d}
                <div style="position: absolute; top: -5px; right: -5px; background: ${p}; color: white; font-size: 10px; font-weight: bold; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; border: 2px solid white;">
                    ${a.count}
                </div>
             </div>
             <div style="background: ${p}; border-radius: 12px; padding: 2px 8px; font-weight: bold; font-size: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transform: translateY(-5px); white-space: nowrap; color: white;">
                ${b}
             </div>
        </div>
    `,w=ba.divIcon({className:"cluster-marker",html:v,iconSize:[70,60],iconAnchor:[35,45]});return x.jsx(so,{position:[a.lat,a.lon],icon:w})},WE=({onZoomChange:a})=>{const s=Kd({zoomend:()=>{a(s.getZoom())}});return X.useEffect(()=>{a(s.getZoom())},[]),null},$E=({enabled:a,onDropPin:s})=>(Kd({click:l=>{a&&s(l.latlng.lat,l.latlng.lng)}}),null),tT=({location:a,bearing:s,cumulativeRotation:l,orientationMode:u,setOrientationMode:d,shouldRecenter:p,setShouldRecenter:_,setNeedsRecenter:b,routeBounds:v,setRouteBounds:w,manualRotation:A,setManualRotation:T})=>{const N=kv(),j=X.useRef(!1),B=X.useRef(!1);return Kd({dragstart:()=>{j.current=!0,u!=="fixed"&&(u==="auto"&&T(l),d("fixed")),b(!0)},zoomstart:()=>{B.current||(j.current=!0,u!=="fixed"&&(u==="auto"&&T(l),d("fixed")),b(!0))},dragend:()=>{j.current=!1},zoomend:()=>{j.current=!1,B.current=!1},moveend:()=>{B.current=!1}}),X.useEffect(()=>{N.invalidateSize();const z=[setTimeout(()=>N.invalidateSize(),100),setTimeout(()=>N.invalidateSize(),300),setTimeout(()=>N.invalidateSize(),500),setTimeout(()=>N.invalidateSize(),1e3)];return()=>z.forEach(P=>clearTimeout(P))},[N]),X.useEffect(()=>{v&&(N.fitBounds(v,{padding:[50,50],animate:!0}),w(null))},[v,N,w]),X.useEffect(()=>{p&&a&&(N.setView(a,17,{animate:!0}),_(!1))},[p,a,N,_]),X.useEffect(()=>{const z=()=>{window.dispatchEvent(new CustomEvent("map-user-interaction"))};return N.on("dragend",z),()=>{N.off("dragend",z)}},[N]),X.useEffect(()=>{const z=N.getContainer();if(u==="auto")z.style.width="300%",z.style.height="300%",z.style.top="-100%",z.style.left="-100%",z.style.left="-100%";else{const P=A||0;z.style.transform=`rotate(${-P}deg)`,P!==0?(z.style.width="300%",z.style.height="300%",z.style.top="-100%",z.style.left="-100%"):(z.style.width="100%",z.style.height="100%",z.style.top="0",z.style.left="0"),document.documentElement.style.setProperty("--map-rotation",`${P}deg`)}z.style.position="absolute",setTimeout(()=>N.invalidateSize(),50)},[u,N]),X.useEffect(()=>{if(u==="auto"){const z=N.getContainer();requestAnimationFrame(()=>{z.style.transition="transform 0.3s linear",z.style.transformOrigin="center center",z.style.transform=`rotate(${-l}deg)`,document.documentElement.style.setProperty("--map-rotation",`${s}deg`)})}},[l,s,u,N]),X.useEffect(()=>{if(a&&(u==="auto"||u==="recentre")){const z=N.getZoom();Math.abs(z-17)>.5&&(B.current=!0,N.flyTo(a,17,{animate:!0,duration:1.5}))}},[u,N]),X.useEffect(()=>{!j.current&&a&&(u==="auto"||u==="recentre")&&(B.current=!0,N.panTo(a,{animate:!0,duration:.3}))},[a,u,N]),X.useEffect(()=>{if(u==="fixed"&&p&&a){const z=N.getZoom();Math.abs(z-17)>.5?(B.current=!0,N.flyTo(a,17,{animate:!0,duration:1.5})):(B.current=!0,N.panTo(a,{animate:!0,duration:.5}))}},[u,p,a,N]),X.useEffect(()=>{const z=()=>{setTimeout(()=>{N.invalidateSize()},100)};return window.addEventListener("resize",z),window.addEventListener("orientationchange",z),window.visualViewport&&window.visualViewport.addEventListener("resize",z),()=>{window.removeEventListener("resize",z),window.removeEventListener("orientationchange",z),window.visualViewport&&window.visualViewport.removeEventListener("resize",z)}},[N]),null},eT=()=>{const[a,s]=X.useState(null),[l,u]=X.useState(null),[d,p]=X.useState(0),[_,b]=X.useState("idle"),[v,w]=X.useState("fixed"),[A,T]=X.useState(0),[N,j]=X.useState(!1),[B,z]=X.useState(()=>{const _t=localStorage.getItem("parlens_vehicle_type");return _t==="bicycle"||_t==="motorcycle"||_t==="car"?_t:"car"}),[P,Z]=X.useState([]),[et,at]=X.useState([]),[ct,ut]=X.useState(null),[ot,F]=X.useState(!1),[$,gt]=X.useState(!1),[yt,ht]=X.useState(17),[vt,kt]=X.useState(!1),[Ct,st]=X.useState(!1),[O,I]=X.useState(null),[K,mt]=X.useState(null),[tt,C]=X.useState(null),[H,rt]=X.useState(!1),[lt,ft]=X.useState(null),[dt,Tt]=X.useState(!1),[Jt,Rt]=X.useState(null),xe=(_t,Lt,At,Bt)=>{if(I(_t),mt(Lt),C(At),rt(Bt),_t&&_t.length>1&&Bt){const Gt=ba.latLngBounds(_t);ft(Gt)}};X.useEffect(()=>{const _t=setInterval(()=>{const Lt=Math.floor(Date.now()/1e3);Z(At=>{const Bt=At.filter(Gt=>!Gt.expiresAt||Gt.expiresAt>Lt);return Bt.length!==At.length&&console.log("[Parlens] Expired",At.length-Bt.length,"spots"),Bt.length!==At.length?Bt:At})},1e4);return()=>clearInterval(_t)},[]),X.useEffect(()=>{const _t=()=>gt(!0);return window.addEventListener("map-user-interaction",_t),()=>window.removeEventListener("map-user-interaction",_t)},[]);const[fn,fe]=X.useState(!1);X.useEffect(()=>{const _t=window.matchMedia("(prefers-color-scheme: dark)");fe(_t.matches);const Lt=At=>fe(At.matches);return _t.addEventListener("change",Lt),()=>_t.removeEventListener("change",Lt)},[]);const Ue=X.useRef(null),He=X.useRef(new GE),hn=X.useRef(new VE),[Mn,yi]=X.useState(0);X.useEffect(()=>{if("geolocation"in navigator){const _t=setTimeout(()=>{a||u("Unable to get location. Please enable location permissions in your browser/device settings.")},1e4);let Lt=0,At=0,Bt=0;return Ue.current=navigator.geolocation.watchPosition(Gt=>{const{latitude:Se,longitude:nn,heading:Ge,speed:an,accuracy:qn}=Gt.coords,sn=Date.now(),me=an||0,[On,Fe]=He.current.smoothLocation(Se,nn),vi=Math.abs(Se-At)*111e3,or=Math.abs(nn-Bt)*111e3*Math.cos(Se*(Math.PI/180)),ro=Math.sqrt(vi*vi+or*or),qi=Math.min(qn||10,30)/10,Gi=(me>10?6:me>5?4:2)*qi,ii=me>10?1500:2500;if((ro>Gi||sn-Lt>ii)&&(s([On,Fe]),At=Se,Bt=nn,Lt=sn),u(null),Ge!==null&&!isNaN(Ge)&&me>2){const _i=He.current.smoothBearing(Ge,me);if(_i!==null){const Vi=hn.current.setBearing(_i);yi(Vi),p(_i)}}},Gt=>{console.error("Location error:",Gt),Gt.code===Gt.PERMISSION_DENIED?u("Location permission denied. Please enable location access in your browser settings."):Gt.code===Gt.POSITION_UNAVAILABLE?u("Location unavailable. Please check your device's GPS settings."):Gt.code===Gt.TIMEOUT&&u("Location request timed out. Please try again.")},{enableHighAccuracy:!0,maximumAge:500,timeout:15e3}),()=>{clearTimeout(_t),Ue.current!==null&&navigator.geolocation.clearWatch(Ue.current)}}else u("Geolocation is not supported by this browser.")},[a]);const Xe=X.useRef(null),[bt,Nt]=X.useState(!1),Ht=async()=>{if(typeof DeviceOrientationEvent.requestPermission=="function")try{if(await DeviceOrientationEvent.requestPermission()==="granted")return Nt(!1),Xe.current&&window.addEventListener("deviceorientation",Xe.current,!0),!0}catch(_t){console.error("Error requesting device orientation permission:",_t)}return!1};X.useEffect(()=>{let _t=0,Lt=0;const At=nn=>{const Ge=Date.now();let an=0;nn.webkitCompassHeading!==void 0?an=nn.webkitCompassHeading:nn.alpha!==null&&(an=360-nn.alpha);const qn=Math.abs(an-Lt),sn=Ge-_t;if(qn>3||sn>100){Lt=an,_t=Ge,p(an);const me=hn.current.setBearing(an);yi(me)}};Xe.current=At;const Bt=async()=>{if(typeof DeviceOrientationEvent.requestPermission=="function"){Nt(!0);return}window.addEventListener("deviceorientation",At,!0)},Gt=async()=>{document.visibilityState==="visible"&&(typeof DeviceOrientationEvent.requestPermission=="function"?Nt(!0):Xe.current&&window.addEventListener("deviceorientation",Xe.current,!0))};document.addEventListener("visibilitychange",Gt);const Se=setTimeout(Bt,500);return()=>{clearTimeout(Se),document.removeEventListener("visibilitychange",Gt),Xe.current&&window.removeEventListener("deviceorientation",Xe.current,!0)}},[]);const qt=_t=>{if(_!=="idle"){alert("Please end your current session before changing vehicle type.");return}z(_t),localStorage.setItem("parlens_vehicle_type",_t)};return a?x.jsxs("div",{className:"fixed inset-0 overflow-hidden bg-gray-50 dark:bg-black transition-colors duration-300",children:[dt&&x.jsx("div",{className:"absolute top-0 left-0 right-0 z-[1000] bg-orange-500 text-white py-3 px-4 text-center font-medium shadow-lg animate-pulse",children:" Tap anywhere on the map to drop a pin"}),x.jsx("div",{className:"absolute inset-0",children:x.jsxs(zE,{center:a,zoom:17,zoomControl:!1,className:"absolute inset-0",dragging:!0,scrollWheelZoom:!0,touchZoom:!0,doubleClickZoom:!0,children:[x.jsx(CE,{url:fn?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:" CARTO",keepBuffer:12,updateWhenIdle:!1}),x.jsx(WE,{onZoomChange:ht}),x.jsx($E,{enabled:dt,onDropPin:(_t,Lt)=>Rt({lat:_t,lon:Lt})}),et.length>0&&(()=>{const Lt=et.filter(Bt=>(Bt.decryptedContent?.type||"car")===B).map(Bt=>{const Gt=Bt.decryptedContent;return Gt&&Gt.lat&&Gt.lon?{id:Bt.id,lat:Gt.lat,lon:Gt.lon,price:parseFloat(Gt.fee)||0,currency:Gt.currency||"USD",original:Bt}:null}).filter(Boolean);return z0(Lt,yt).map(Bt=>C0(Bt)?x.jsx(L0,{cluster:Bt,type:"history",bearing:d,orientationMode:v},Bt.id):x.jsx(JE,{spot:Bt.original||Bt,bearing:d,orientationMode:v},Bt.id))})(),_==="search"&&P.length>0&&(()=>{const _t=P.map(At=>({id:At.id,lat:At.lat,lon:At.lon,price:At.price,currency:At.currency,original:At}));return z0(_t,yt).map(At=>C0(At)?x.jsx(L0,{cluster:At,type:"open",bearing:d,orientationMode:v},At.id):x.jsx(FE,{spot:At.original||At,bearing:d,orientationMode:v},At.id))})(),_==="parked"&&ct&&x.jsx(XE,{location:ct,vehicleType:B,bearing:d,orientationMode:v}),H&&K&&K.length>1&&x.jsx(A0,{positions:K,color:"#007AFF",weight:3,opacity:.4,dashArray:"8, 8"}),H&&O&&O.length>1&&x.jsx(A0,{positions:O,color:"#007AFF",weight:4,opacity:.9}),H&&tt&&tt.map((_t,Lt)=>x.jsx(so,{position:[_t.lat,_t.lon],icon:ba.divIcon({className:"waypoint-marker",html:`<div style="width: 20px; height: 20px; background: #007AFF; border: 2px solid white; border-radius: 50%; box-shadow: 0 2px 6px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold;">${Lt+1}</div>`,iconSize:[20,20],iconAnchor:[10,10]})},`waypoint-${Lt}`)),x.jsx(QE,{location:a,bearing:d}),x.jsx(tT,{location:a,bearing:d,cumulativeRotation:Mn,orientationMode:v,setOrientationMode:w,shouldRecenter:ot,setShouldRecenter:F,setNeedsRecenter:gt,routeBounds:lt,setRouteBounds:ft,manualRotation:A,setManualRotation:T})]})}),x.jsxs("div",{className:"absolute z-[1000] flex flex-col items-start gap-4 animate-in slide-in-from-left-6",style:{bottom:"max(1.5rem, calc(env(safe-area-inset-bottom) + 0.5rem))",left:"max(1rem, env(safe-area-inset-left))"},children:[x.jsxs("div",{className:"flex flex-col gap-1 p-1 rounded-[2rem] bg-white/80 dark:bg-white/10 backdrop-blur-md border border-black/5 dark:border-white/10 shadow-lg mb-2",children:[x.jsx("button",{onClick:()=>qt("bicycle"),className:`p-2.5 rounded-full transition-all ${B==="bicycle"?"bg-zinc-200 dark:bg-zinc-700 text-black dark:text-white shadow-lg scale-110":"text-black/50 dark:text-white/50 hover:text-black hover:bg-black/5 dark:hover:text-white dark:hover:bg-white/10"}`,children:x.jsx("span",{className:"text-xl",children:""})}),x.jsx("button",{onClick:()=>qt("motorcycle"),className:`p-2.5 rounded-full transition-all ${B==="motorcycle"?"bg-zinc-200 dark:bg-zinc-700 text-black dark:text-white shadow-lg scale-110":"text-black/50 dark:text-white/50 hover:text-black hover:bg-black/5 dark:hover:text-white dark:hover:bg-white/10"}`,children:x.jsx("span",{className:"text-xl",children:""})}),x.jsx("button",{onClick:()=>qt("car"),className:`p-2.5 rounded-full transition-all ${B==="car"?"bg-zinc-200 dark:bg-zinc-700 text-black dark:text-white shadow-lg scale-110":"text-black/50 dark:text-white/50 hover:text-black hover:bg-black/5 dark:hover:text-white dark:hover:bg-white/10"}`,children:x.jsx("span",{className:"text-xl",children:""})})]}),x.jsx("button",{onClick:()=>j(!0),className:"h-12 w-12 flex items-center justify-center rounded-[1.5rem] bg-white/80 dark:bg-zinc-800/80 backdrop-blur-xl border border-black/5 dark:border-white/10 text-zinc-600 dark:text-white/70 shadow-2xl active:scale-95 transition-all",children:x.jsx(E0,{size:20})})]}),x.jsxs("div",{className:"absolute z-[1000] flex flex-col items-end gap-5 animate-in slide-in-from-right-6",style:{bottom:"max(1.5rem, calc(env(safe-area-inset-bottom) + 0.5rem))",right:"max(1rem, env(safe-area-inset-right))"},children:[x.jsx("button",{onClick:async()=>{if(bt){await Ht();return}if($)F(!0),gt(!1);else{if(v==="fixed"&&A!==0){T(0);return}w(_t=>_t==="fixed"?"recentre":_t==="recentre"?"auto":"fixed"),v!=="fixed"&&T(0),F(!0)}},className:`flex flex-col gap-1 p-2.5 rounded-full ${v==="auto"?"bg-blue-500 text-white shadow-blue-500/50":v==="recentre"?"bg-green-500 text-white shadow-green-500/50":"bg-white text-zinc-700 dark:bg-zinc-800 dark:text-zinc-200"} shadow-xl active:scale-95 transition-all`,children:v==="auto"?x.jsx(ed,{size:24,className:"fill-white"}):v==="recentre"?x.jsx(_l,{size:24,className:"fill-white"}):A!==0?x.jsx(ed,{size:24,style:{transform:`rotate(${A}deg)`}}):x.jsx(ZS,{size:24})}),x.jsx(ZE,{vehicleType:B,onRouteChange:xe,currentLocation:a,onDropPinModeChange:Tt,pendingDropPin:Jt,onDropPinConsumed:()=>Rt(null),onOpenChange:st}),x.jsx(PE,{setHistorySpots:at,onOpenChange:kt}),x.jsx(UE,{status:_,setStatus:b,location:a,vehicleType:B,setOpenSpots:Z,parkLocation:ct,setParkLocation:ut})]}),N&&x.jsxs("div",{className:"fixed inset-0 z-[2000] flex flex-col items-center justify-start bg-black/60 backdrop-blur-xl pt-2 px-4 pb-4 animate-in fade-in",children:[x.jsx("button",{onClick:()=>j(!1),className:"absolute inset-0 z-0 cursor-default"}),x.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white dark:bg-[#1c1c1e] rounded-[2rem] border border-black/5 dark:border-white/5 shadow-2xl p-6 space-y-6 animate-in slide-in-from-bottom-10 duration-300 h-[calc(100vh-1.5rem)] overflow-y-auto no-scrollbar transition-colors",children:[x.jsx("button",{onClick:()=>j(!1),className:"absolute top-6 right-6 p-2 rounded-full bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/20 transition-colors",children:x.jsx(Zd,{size:20,className:"text-black/60 dark:text-white/60"})}),x.jsxs("div",{className:"text-center space-y-2 pt-4",children:[x.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-500 dark:text-blue-400 mb-4",children:x.jsx(E0,{size:32})}),x.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:"How to use Parlens"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("h3",{className:"text-center font-bold text-zinc-600 dark:text-white/90",children:"Add to your homescreen"}),x.jsxs("div",{className:"rounded-2xl bg-zinc-100 dark:bg-white/5",children:[x.jsxs("button",{onClick:()=>{document.getElementById("android-guide")?.classList.toggle("hidden")},className:"w-full flex items-center justify-between p-4 font-bold text-sm text-left hover:bg-zinc-200 dark:hover:bg-white/5 text-zinc-800 dark:text-zinc-200 transition-colors rounded-2xl",style:{WebkitTapHighlightColor:"transparent"},children:[x.jsx("span",{children:"Using Browser Menu (Android)"}),x.jsx(vl,{size:16,className:"text-zinc-400 dark:text-white/50"})]}),x.jsxs("div",{id:"android-guide",className:"hidden p-4 pt-0 text-xs text-zinc-600 dark:text-white/70 space-y-2",children:[x.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white",children:"Chrome & Brave:"}),x.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[x.jsx("li",{children:"Tap menu button (three dots)"}),x.jsxs("li",{children:["Tap ",x.jsx("strong",{children:"Add to Home screen"})]}),x.jsxs("li",{children:["Tap ",x.jsx("strong",{children:"Add"})," to confirm"]})]}),x.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mt-3",children:"Firefox:"}),x.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[x.jsx("li",{children:"Tap menu button (three dots)"}),x.jsxs("li",{children:["Tap ",x.jsx("strong",{children:"Install"})]})]})]})]}),x.jsxs("div",{className:"rounded-2xl bg-zinc-100 dark:bg-white/5",children:[x.jsxs("button",{onClick:()=>{document.getElementById("ios-guide")?.classList.toggle("hidden")},className:"w-full flex items-center justify-between p-4 font-bold text-sm text-left hover:bg-zinc-200 dark:hover:bg-white/5 text-zinc-800 dark:text-zinc-200 transition-colors rounded-2xl",style:{WebkitTapHighlightColor:"transparent"},children:[x.jsx("span",{children:"Using Share Button (iOS)"}),x.jsx(vl,{size:16,className:"text-zinc-400 dark:text-white/50"})]}),x.jsx("div",{id:"ios-guide",className:"hidden p-4 pt-0 text-xs text-zinc-600 dark:text-white/70 space-y-2",children:x.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[x.jsxs("li",{children:["Tap the ",x.jsx("strong",{children:"Share"})," button in Safari menu bar."]}),x.jsxs("li",{children:["Scroll down and tap ",x.jsx("strong",{children:"Add to Home Screen"}),"."]}),x.jsx("li",{children:"Launch Parlens from your home screen."})]})})]})]}),x.jsxs("div",{className:"space-y-6 text-sm text-zinc-600 dark:text-white/80 leading-relaxed pt-4 border-t border-black/5 dark:border-white/10",children:[x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"1. Plan your route (optional)"}),"Tap the route button to add waypoints and create a route. Your path will display on the map as you travel."]}),x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"2. Select vehicle type"}),"Use the vertical toggle on the bottom-left to switch between Bicycle , Motorcycle , or Car ."]}),x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"3. Search for spots"}),"Click the main button once to see open spots reported by others."]}),x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"4. Park & end session"}),"Click again to mark your location. When leaving, click once more to end the session and report the fee. Note that there is a 5-minute cool-off period after parking before you can search again."]}),x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"5. View history"}),"Use the profile button to see your parking history."]}),x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"6. Secure your keys"}),"Copy and store your npub (public key) and nsec (secret key) from the profile section. These are your account access keys and cannot be recovered if lost."]}),x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"7. User privacy"}),"Parlens does not collect or share any user data. Your log and route data is encrypted by your keys and only accessible by you. Open spot broadcasts are ephemeral and not linked to any personal identifiers."]}),x.jsxs("p",{children:[x.jsx("strong",{className:"text-zinc-900 dark:text-white block mb-1",children:"8. Create your own mirror"}),x.jsx("a",{href:"https://github.com/prasannawarrier/parlens-pwa/blob/main/MIRROR_CREATION.md",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 underline",children:"Follow these steps"})," to create your own mirror of the Parlens app to distribute the load and share with your friends."]})]})]})]}),_==="search"&&!vt&&!Ct&&x.jsx("div",{className:"absolute left-1/2 z-[1000] -translate-x-1/2 animate-in slide-in-from-top-6 duration-500",style:{top:"max(3rem, calc(env(safe-area-inset-top) + 0.75rem))"},children:x.jsxs("div",{className:"px-6 py-3 rounded-full bg-white text-black font-bold shadow-xl flex items-center gap-3 border border-black/5 whitespace-nowrap min-w-max",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500 animate-pulse"}),x.jsx("span",{className:"text-sm tracking-tight",children:"Searching for spots"})]})}),_==="parked"&&!vt&&!Ct&&x.jsx("div",{className:"absolute left-1/2 z-[1000] -translate-x-1/2 animate-in slide-in-from-top-6 duration-500",style:{top:"max(3rem, calc(env(safe-area-inset-top) + 0.75rem))"},children:x.jsxs("div",{className:"px-6 py-3 rounded-full bg-[#34C759] text-white font-bold shadow-xl flex items-center gap-3",children:[x.jsx("span",{className:"text-lg",children:B==="bicycle"?"":B==="motorcycle"?"":""}),x.jsx("span",{className:"text-sm tracking-tight text-white/90",children:"Session Active"})]})}),_==="submitting"&&!vt&&!Ct&&x.jsx("div",{className:"absolute left-1/2 z-[1000] -translate-x-1/2 animate-in slide-in-from-top-6 duration-500",style:{top:"max(3rem, calc(env(safe-area-inset-top) + 0.75rem))"},children:x.jsxs("div",{className:"px-6 py-3 rounded-full bg-blue-500 text-white font-bold shadow-xl flex items-center gap-3",children:[x.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),x.jsx("span",{className:"text-sm tracking-tight text-white/90 whitespace-nowrap",children:"Logging session..."})]})})]}):x.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-50 dark:bg-black",children:x.jsx("div",{className:"flex flex-col items-center gap-4 animate-in fade-in duration-700 px-8 max-w-sm text-center",children:l?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:x.jsx("span",{className:"text-2xl",children:""})}),x.jsx("p",{className:"text-sm font-medium text-red-500 dark:text-red-400",children:l}),x.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-6 py-2 rounded-full bg-blue-500 text-white text-sm font-medium active:scale-95 transition-transform",children:"Try Again"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-blue-500/20 border-t-blue-500 animate-spin"}),x.jsx("p",{className:"text-sm font-semibold text-zinc-400 dark:text-white/40 tracking-tight",children:"Locating..."})]})})})},nT=()=>{const{login:a}=ao(),[s,l]=X.useState(""),[u,d]=X.useState(""),[p,_]=X.useState(!1),[b,v]=X.useState("landing"),[w,A]=X.useState(""),[T,N]=X.useState(null),j=async Z=>{_(!0),d("");try{await a(Z,Z==="nsec"?s:void 0)}catch(et){d(et.message)}finally{_(!1)}},B=()=>{v("setup")},z=async()=>{if(!w.trim()){d("Please enter a username");return}_(!0);try{const{generateSecretKey:Z,getPublicKey:et}=await xb(async()=>{const{generateSecretKey:$,getPublicKey:gt}=await Promise.resolve().then(()=>DE);return{generateSecretKey:$,getPublicKey:gt}},void 0),at=$=>Array.from($).map(gt=>gt.toString(16).padStart(2,"0")).join(""),ct=Z(),ut=et(ct);localStorage.setItem("parlens_privkey",at(ct)),localStorage.setItem("parlens_pubkey",ut),localStorage.setItem("parlens_pending_username",w);const ot=ar.npubEncode(ut),F=ar.nsecEncode(ct);N({npub:ot,nsec:F}),v("backup")}catch(Z){d(Z.message)}finally{_(!1)}},P=async()=>{_(!0);try{const Z=localStorage.getItem("parlens_pending_username");await a("create",void 0,Z||w),localStorage.removeItem("parlens_pending_username")}catch(Z){d(Z.message)}finally{_(!1)}};return x.jsx("div",{className:"min-h-screen bg-black p-6 text-white text-center overflow-y-auto no-scrollbar flex flex-col items-center justify-center",style:{paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:x.jsxs("div",{className:"w-full max-w-sm space-y-12 animate-in fade-in zoom-in-95 duration-700",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("img",{src:"/parlens-pwa/pwa-512x512.png",alt:"Parlens",className:"mx-auto h-24 w-24 rounded-[22%] shadow-2xl shadow-[#007AFF]/20"}),x.jsx("h1",{className:"text-5xl font-extrabold tracking-tighter",children:"Parlens"}),x.jsx("p",{className:"text-sm font-medium text-white/40 tracking-tight",children:"Peer-to-Peer Parking Management"})]}),x.jsxs("div",{className:"space-y-4",children:[b==="landing"?x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:B,disabled:p,className:"w-full h-16 rounded-3xl bg-white text-black font-bold text-lg shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3",children:p?"Creating...":x.jsxs(x.Fragment,{children:[x.jsx(cE,{size:20,strokeWidth:3}),"Create a New Account"]})}),x.jsxs("button",{onClick:()=>v("nsec"),disabled:p,className:"w-full h-16 rounded-3xl bg-[#007AFF] text-white font-bold text-lg shadow-lg shadow-[#007AFF]/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[x.jsx(td,{size:18}),"Login with Secret Key"]})]}):b==="setup"?x.jsxs("div",{className:"space-y-4 pt-4 animate-in slide-in-from-right-4",children:[x.jsxs("div",{className:"text-center pb-2",children:[x.jsx("h3",{className:"text-xl font-bold",children:"Pick a Username"}),x.jsx("p",{className:"text-white/40 text-sm",children:"This will be your identity on Nostr"})]}),x.jsx("input",{type:"text",placeholder:"Username",value:w,onChange:Z=>A(Z.target.value),className:"w-full h-16 rounded-3xl bg-zinc-900 border border-white/10 px-6 text-white focus:outline-none focus:ring-2 focus:ring-[#007AFF] placeholder:text-white/20",autoFocus:!0}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>v("landing"),className:"h-16 px-6 rounded-3xl bg-zinc-900 text-white font-bold",children:"Back"}),x.jsx("button",{onClick:z,disabled:p||!w,className:"flex-1 h-16 rounded-3xl bg-[#007AFF] text-white font-bold shadow-lg active:scale-95 transition-all",children:p?"Creating...":"Continue"})]})]}):b==="backup"?x.jsxs("div",{className:"space-y-6 pt-4 animate-in slide-in-from-right-4 text-left",children:[x.jsxs("div",{className:"text-center pb-2",children:[x.jsx("h3",{className:"text-xl font-bold",children:" Account Created!"}),x.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Back up your keys before continuing"})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h4",{className:"text-xs font-bold uppercase tracking-widest text-white/30 ml-2",children:"Your Keys"}),x.jsxs("div",{className:"space-y-0.5 rounded-[2rem] overflow-hidden bg-white/[0.03] border border-white/10",children:[x.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-white/5 transition-colors cursor-pointer active:bg-white/10",onClick:()=>{T&&(navigator.clipboard.writeText(T.npub),alert("Public Key copied to clipboard"))},children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2.5 rounded-xl bg-blue-500/20 text-blue-400",children:x.jsx(td,{size:20})}),x.jsx("span",{className:"font-semibold text-sm text-white",children:"Copy Public Key (Npub)"})]}),x.jsx(oc,{size:18,className:"text-white/20"})]}),x.jsx("div",{className:"h-[1px] bg-white/5 mx-4"}),x.jsxs("div",{className:"p-5 flex items-center justify-between hover:bg-white/5 transition-colors cursor-pointer active:bg-white/10",onClick:()=>{T&&(navigator.clipboard.writeText(T.nsec),alert("Secret Key copied to clipboard - keep this safe!"))},children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2.5 rounded-xl bg-red-500/20 text-red-500",children:x.jsx(zv,{size:20})}),x.jsx("span",{className:"font-semibold text-sm text-white",children:"Copy Secret Key (Nsec)"})]}),x.jsx(oc,{size:18,className:"text-white/20"})]})]}),x.jsx("p",{className:"text-xs text-white/30 mt-2 ml-2 leading-relaxed text-center",children:" Store these keys securely. They cannot be recovered if lost."})]}),x.jsx("button",{onClick:P,disabled:p,className:"w-full h-16 rounded-3xl bg-[#007AFF] text-white font-bold shadow-lg shadow-[#007AFF]/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:p?"Starting...":"Start Using Parlens"})]}):x.jsxs("div",{className:"space-y-4 pt-4 animate-in slide-in-from-bottom-4",children:[x.jsx("input",{type:"password",placeholder:"Paste your nsec...",value:s,onChange:Z=>l(Z.target.value),className:"w-full h-16 rounded-3xl bg-zinc-900 border border-white/10 px-6 text-white focus:outline-none focus:ring-2 focus:ring-[#007AFF] placeholder:text-white/20",autoFocus:!0}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>v("landing"),className:"h-16 px-6 rounded-3xl bg-zinc-900 text-white font-bold",children:"Back"}),x.jsx("button",{onClick:()=>j("nsec"),disabled:p||!s,className:"flex-1 h-16 rounded-3xl bg-[#007AFF] text-white font-bold shadow-lg active:scale-95 transition-all",children:p?"Decrypting...":"Login with Key"})]})]}),u&&x.jsx("div",{className:"p-4 rounded-3xl bg-red-500/10 border border-red-500/20 text-red-500 text-xs font-bold text-center animate-in fade-in slide-in-from-top-2",children:u}),x.jsxs("div",{className:"space-y-3 pt-6 border-t border-white/10",children:[x.jsx("h3",{className:"text-center font-bold text-white/70 text-sm",children:"Add to your homescreen for fullscreen experience"}),x.jsxs("div",{className:"rounded-2xl bg-white/5 overflow-hidden",children:[x.jsxs("button",{onClick:()=>{document.getElementById("login-android-guide")?.classList.toggle("hidden")},className:"w-full flex items-center justify-between p-4 font-bold text-sm text-left hover:bg-white/5 text-white/80 transition-colors",style:{WebkitTapHighlightColor:"transparent"},children:[x.jsx("span",{children:"Using Browser Menu (Android)"}),x.jsx(vl,{size:16,className:"text-white/50"})]}),x.jsxs("div",{id:"login-android-guide",className:"hidden p-4 pt-0 text-xs text-white/60 space-y-2 text-left",children:[x.jsx("p",{className:"font-semibold text-white/80",children:"Chrome & Brave:"}),x.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[x.jsx("li",{children:"Tap menu button (three dots)"}),x.jsxs("li",{children:["Tap ",x.jsx("strong",{children:"Add to Home screen"})]}),x.jsxs("li",{children:["Tap ",x.jsx("strong",{children:"Add"})," to confirm"]})]}),x.jsx("p",{className:"font-semibold text-white/80 mt-3",children:"Firefox:"}),x.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[x.jsx("li",{children:"Tap menu button (three dots)"}),x.jsxs("li",{children:["Tap ",x.jsx("strong",{children:"Install"})]})]})]})]}),x.jsxs("div",{className:"rounded-2xl bg-white/5 overflow-hidden",children:[x.jsxs("button",{onClick:()=>{document.getElementById("login-ios-guide")?.classList.toggle("hidden")},className:"w-full flex items-center justify-between p-4 font-bold text-sm text-left hover:bg-white/5 text-white/80 transition-colors",style:{WebkitTapHighlightColor:"transparent"},children:[x.jsx("span",{children:"Using Share Button (iOS)"}),x.jsx(vl,{size:16,className:"text-white/50"})]}),x.jsx("div",{id:"login-ios-guide",className:"hidden p-4 pt-0 text-xs text-white/60 space-y-2 text-left",children:x.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[x.jsxs("li",{children:["Tap the ",x.jsx("strong",{className:"text-white/80",children:"Share"})," button in Safari menu bar."]}),x.jsxs("li",{children:["Scroll down and tap ",x.jsx("strong",{className:"text-white/80",children:"Add to Home Screen"}),"."]}),x.jsx("li",{children:"Launch Parlens from your home screen."})]})})]})]})]})]})})},iT=()=>{const{pubkey:a}=ao();return a?x.jsx(eT,{}):x.jsx(nT,{})};var Ac=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){return this.listeners.add(a),this.onSubscribe(),()=>{this.listeners.delete(a),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aT={setTimeout:(a,s)=>setTimeout(a,s),clearTimeout:a=>clearTimeout(a),setInterval:(a,s)=>setInterval(a,s),clearInterval:a=>clearInterval(a)},sT=class{#t=aT;#e=!1;setTimeoutProvider(a){this.#t=a}setTimeout(a,s){return this.#t.setTimeout(a,s)}clearTimeout(a){this.#t.clearTimeout(a)}setInterval(a,s){return this.#t.setInterval(a,s)}clearInterval(a){this.#t.clearInterval(a)}},id=new sT;function rT(a){setTimeout(a,0)}var zc=typeof window>"u"||"Deno"in globalThis;function mi(){}function oT(a,s){return typeof a=="function"?a(s):a}function lT(a){return typeof a=="number"&&a>=0&&a!==1/0}function uT(a,s){return Math.max(a+(s||0)-Date.now(),0)}function ad(a,s){return typeof a=="function"?a(s):a}function cT(a,s){return typeof a=="function"?a(s):a}function N0(a,s){const{type:l="all",exact:u,fetchStatus:d,predicate:p,queryKey:_,stale:b}=a;if(_){if(u){if(s.queryHash!==Qd(_,s.options))return!1}else if(!xl(s.queryKey,_))return!1}if(l!=="all"){const v=s.isActive();if(l==="active"&&!v||l==="inactive"&&v)return!1}return!(typeof b=="boolean"&&s.isStale()!==b||d&&d!==s.state.fetchStatus||p&&!p(s))}function M0(a,s){const{exact:l,status:u,predicate:d,mutationKey:p}=a;if(p){if(!s.options.mutationKey)return!1;if(l){if(bl(s.options.mutationKey)!==bl(p))return!1}else if(!xl(s.options.mutationKey,p))return!1}return!(u&&s.state.status!==u||d&&!d(s))}function Qd(a,s){return(s?.queryKeyHashFn||bl)(a)}function bl(a){return JSON.stringify(a,(s,l)=>sd(l)?Object.keys(l).sort().reduce((u,d)=>(u[d]=l[d],u),{}):l)}function xl(a,s){return a===s?!0:typeof a!=typeof s?!1:a&&s&&typeof a=="object"&&typeof s=="object"?Object.keys(s).every(l=>xl(a[l],s[l])):!1}var fT=Object.prototype.hasOwnProperty;function Zv(a,s){if(a===s)return a;const l=O0(a)&&O0(s);if(!l&&!(sd(a)&&sd(s)))return s;const d=(l?a:Object.keys(a)).length,p=l?s:Object.keys(s),_=p.length,b=l?new Array(_):{};let v=0;for(let w=0;w<_;w++){const A=l?w:p[w],T=a[A],N=s[A];if(T===N){b[A]=T,(l?w<d:fT.call(a,A))&&v++;continue}if(T===null||N===null||typeof T!="object"||typeof N!="object"){b[A]=N;continue}const j=Zv(T,N);b[A]=j,j===T&&v++}return d===_&&v===d?a:b}function O0(a){return Array.isArray(a)&&a.length===Object.keys(a).length}function sd(a){if(!k0(a))return!1;const s=a.constructor;if(s===void 0)return!0;const l=s.prototype;return!(!k0(l)||!l.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(a)!==Object.prototype)}function k0(a){return Object.prototype.toString.call(a)==="[object Object]"}function hT(a){return new Promise(s=>{id.setTimeout(s,a)})}function dT(a,s,l){return typeof l.structuralSharing=="function"?l.structuralSharing(a,s):l.structuralSharing!==!1?Zv(a,s):s}function mT(a,s,l=0){const u=[...a,s];return l&&u.length>l?u.slice(1):u}function pT(a,s,l=0){const u=[s,...a];return l&&u.length>l?u.slice(0,-1):u}var Xd=Symbol();function qv(a,s){return!a.queryFn&&s?.initialPromise?()=>s.initialPromise:!a.queryFn||a.queryFn===Xd?()=>Promise.reject(new Error(`Missing queryFn: '${a.queryHash}'`)):a.queryFn}var gT=class extends Ac{#t;#e;#n;constructor(){super(),this.#n=a=>{if(!zc&&window.addEventListener){const s=()=>a();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(a){this.#n=a,this.#e?.(),this.#e=a(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(a){this.#t!==a&&(this.#t=a,this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(s=>{s(a)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Gv=new gT;function yT(){let a,s;const l=new Promise((d,p)=>{a=d,s=p});l.status="pending",l.catch(()=>{});function u(d){Object.assign(l,d),delete l.resolve,delete l.reject}return l.resolve=d=>{u({status:"fulfilled",value:d}),a(d)},l.reject=d=>{u({status:"rejected",reason:d}),s(d)},l}var vT=rT;function _T(){let a=[],s=0,l=b=>{b()},u=b=>{b()},d=vT;const p=b=>{s?a.push(b):d(()=>{l(b)})},_=()=>{const b=a;a=[],b.length&&d(()=>{u(()=>{b.forEach(v=>{l(v)})})})};return{batch:b=>{let v;s++;try{v=b()}finally{s--,s||_()}return v},batchCalls:b=>(...v)=>{p(()=>{b(...v)})},schedule:p,setNotifyFunction:b=>{l=b},setBatchNotifyFunction:b=>{u=b},setScheduler:b=>{d=b}}}var gn=_T(),bT=class extends Ac{#t=!0;#e;#n;constructor(){super(),this.#n=a=>{if(!zc&&window.addEventListener){const s=()=>a(!0),l=()=>a(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(a){this.#n=a,this.#e?.(),this.#e=a(this.setOnline.bind(this))}setOnline(a){this.#t!==a&&(this.#t=a,this.listeners.forEach(l=>{l(a)}))}isOnline(){return this.#t}},cc=new bT;function xT(a){return Math.min(1e3*2**a,3e4)}function Vv(a){return(a??"online")==="online"?cc.isOnline():!0}var rd=class extends Error{constructor(a){super("CancelledError"),this.revert=a?.revert,this.silent=a?.silent}};function Yv(a){let s=!1,l=0,u;const d=yT(),p=()=>d.status!=="pending",_=z=>{if(!p()){const P=new rd(z);N(P),a.onCancel?.(P)}},b=()=>{s=!0},v=()=>{s=!1},w=()=>Gv.isFocused()&&(a.networkMode==="always"||cc.isOnline())&&a.canRun(),A=()=>Vv(a.networkMode)&&a.canRun(),T=z=>{p()||(u?.(),d.resolve(z))},N=z=>{p()||(u?.(),d.reject(z))},j=()=>new Promise(z=>{u=P=>{(p()||w())&&z(P)},a.onPause?.()}).then(()=>{u=void 0,p()||a.onContinue?.()}),B=()=>{if(p())return;let z;const P=l===0?a.initialPromise:void 0;try{z=P??a.fn()}catch(Z){z=Promise.reject(Z)}Promise.resolve(z).then(T).catch(Z=>{if(p())return;const et=a.retry??(zc?0:3),at=a.retryDelay??xT,ct=typeof at=="function"?at(l,Z):at,ut=et===!0||typeof et=="number"&&l<et||typeof et=="function"&&et(l,Z);if(s||!ut){N(Z);return}l++,a.onFail?.(l,Z),hT(ct).then(()=>w()?void 0:j()).then(()=>{s?N(Z):B()})})};return{promise:d,status:()=>d.status,cancel:_,continue:()=>(u?.(),d),cancelRetry:b,continueRetry:v,canStart:A,start:()=>(A()?B():j().then(B),d)}}var Iv=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lT(this.gcTime)&&(this.#t=id.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(a){this.gcTime=Math.max(this.gcTime||0,a??(zc?1/0:300*1e3))}clearGcTimeout(){this.#t&&(id.clearTimeout(this.#t),this.#t=void 0)}},wT=class extends Iv{#t;#e;#n;#a;#i;#r;#o;constructor(a){super(),this.#o=!1,this.#r=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.#a=a.client,this.#n=this.#a.getQueryCache(),this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.#t=B0(this.options),this.state=a.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(a){if(this.options={...this.#r,...a},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=B0(this.options);s.data!==void 0&&(this.setState(R0(s.data,s.dataUpdatedAt)),this.#t=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(a,s){const l=dT(this.state.data,a,this.options);return this.#s({data:l,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),l}setState(a,s){this.#s({type:"setState",state:a,setStateOptions:s})}cancel(a){const s=this.#i?.promise;return this.#i?.cancel(a),s?s.then(mi).catch(mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(a=>cT(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>ad(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!uT(this.state.dataUpdatedAt,a)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(s=>s!==a),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(a,s){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(a&&this.setOptions(a),!this.options.queryFn){const b=this.observers.find(v=>v.options.queryFn);b&&this.setOptions(b.options)}const l=new AbortController,u=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(this.#o=!0,l.signal)})},d=()=>{const b=qv(this.options,s),w=(()=>{const A={client:this.#a,queryKey:this.queryKey,meta:this.meta};return u(A),A})();return this.#o=!1,this.options.persister?this.options.persister(b,w,this):b(w)},_=(()=>{const b={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:d};return u(b),b})();this.options.behavior?.onFetch(_,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==_.fetchOptions?.meta)&&this.#s({type:"fetch",meta:_.fetchOptions?.meta}),this.#i=Yv({initialPromise:s?.initialPromise,fn:_.fetchFn,onCancel:b=>{b instanceof rd&&b.revert&&this.setState({...this.#e,fetchStatus:"idle"}),l.abort()},onFail:(b,v)=>{this.#s({type:"failed",failureCount:b,error:v})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:_.options.retry,retryDelay:_.options.retryDelay,networkMode:_.options.networkMode,canRun:()=>!0});try{const b=await this.#i.start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),this.#n.config.onSuccess?.(b,this),this.#n.config.onSettled?.(b,this.state.error,this),b}catch(b){if(b instanceof rd){if(b.silent)return this.#i.promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw this.#s({type:"error",error:b}),this.#n.config.onError?.(b,this),this.#n.config.onSettled?.(this.state.data,b,this),b}finally{this.scheduleGc()}}#s(a){const s=l=>{switch(a.type){case"failed":return{...l,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...ST(l.data,this.options),fetchMeta:a.meta??null};case"success":const u={...l,...R0(a.data,a.dataUpdatedAt),dataUpdateCount:l.dataUpdateCount+1,...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=a.manual?u:void 0,u;case"error":const d=a.error;return{...l,error:d,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...a.state}}};this.state=s(this.state),gn.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:a})})}};function ST(a,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vv(s.networkMode)?"fetching":"paused",...a===void 0&&{error:null,status:"pending"}}}function R0(a,s){return{data:a,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function B0(a){const s=typeof a.initialData=="function"?a.initialData():a.initialData,l=s!==void 0,u=l?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:l?u??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}function j0(a){return{onFetch:(s,l)=>{const u=s.options,d=s.fetchOptions?.meta?.fetchMore?.direction,p=s.state.data?.pages||[],_=s.state.data?.pageParams||[];let b={pages:[],pageParams:[]},v=0;const w=async()=>{let A=!1;const T=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>(s.signal.aborted?A=!0:s.signal.addEventListener("abort",()=>{A=!0}),s.signal)})},N=qv(s.options,s.fetchOptions),j=async(B,z,P)=>{if(A)return Promise.reject();if(z==null&&B.pages.length)return Promise.resolve(B);const et=(()=>{const ot={client:s.client,queryKey:s.queryKey,pageParam:z,direction:P?"backward":"forward",meta:s.options.meta};return T(ot),ot})(),at=await N(et),{maxPages:ct}=s.options,ut=P?pT:mT;return{pages:ut(B.pages,at,ct),pageParams:ut(B.pageParams,z,ct)}};if(d&&p.length){const B=d==="backward",z=B?ET:D0,P={pages:p,pageParams:_},Z=z(u,P);b=await j(P,Z,B)}else{const B=a??p.length;do{const z=v===0?_[0]??u.initialPageParam:D0(u,b);if(v>0&&z==null)break;b=await j(b,z),v++}while(v<B)}return b};s.options.persister?s.fetchFn=()=>s.options.persister?.(w,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},l):s.fetchFn=w}}}function D0(a,{pages:s,pageParams:l}){const u=s.length-1;return s.length>0?a.getNextPageParam(s[u],s,l[u],l):void 0}function ET(a,{pages:s,pageParams:l}){return s.length>0?a.getPreviousPageParam?.(s[0],s,l[0],l):void 0}var TT=class extends Iv{#t;#e;#n;#a;constructor(a){super(),this.#t=a.client,this.mutationId=a.mutationId,this.#n=a.mutationCache,this.#e=[],this.state=a.state||AT(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){this.#e.includes(a)||(this.#e.push(a),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){this.#e=this.#e.filter(s=>s!==a),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(a){const s=()=>{this.#i({type:"continue"})},l={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=Yv({fn:()=>this.options.mutationFn?this.options.mutationFn(a,l):Promise.reject(new Error("No mutationFn found")),onFail:(p,_)=>{this.#i({type:"failed",failureCount:p,error:_})},onPause:()=>{this.#i({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const u=this.state.status==="pending",d=!this.#a.canStart();try{if(u)s();else{this.#i({type:"pending",variables:a,isPaused:d}),await this.#n.config.onMutate?.(a,this,l);const _=await this.options.onMutate?.(a,l);_!==this.state.context&&this.#i({type:"pending",context:_,variables:a,isPaused:d})}const p=await this.#a.start();return await this.#n.config.onSuccess?.(p,a,this.state.context,this,l),await this.options.onSuccess?.(p,a,this.state.context,l),await this.#n.config.onSettled?.(p,null,this.state.variables,this.state.context,this,l),await this.options.onSettled?.(p,null,a,this.state.context,l),this.#i({type:"success",data:p}),p}catch(p){try{throw await this.#n.config.onError?.(p,a,this.state.context,this,l),await this.options.onError?.(p,a,this.state.context,l),await this.#n.config.onSettled?.(void 0,p,this.state.variables,this.state.context,this,l),await this.options.onSettled?.(void 0,p,a,this.state.context,l),p}finally{this.#i({type:"error",error:p})}}finally{this.#n.runNext(this)}}#i(a){const s=l=>{switch(a.type){case"failed":return{...l,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...l,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:a.error,failureCount:l.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=s(this.state),gn.batch(()=>{this.#e.forEach(l=>{l.onMutationUpdate(a)}),this.#n.notify({mutation:this,type:"updated",action:a})})}};function AT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zT=class extends Ac{constructor(a={}){super(),this.config=a,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(a,s,l){const u=new TT({client:a,mutationCache:this,mutationId:++this.#n,options:a.defaultMutationOptions(s),state:l});return this.add(u),u}add(a){this.#t.add(a);const s=Ju(a);if(typeof s=="string"){const l=this.#e.get(s);l?l.push(a):this.#e.set(s,[a])}this.notify({type:"added",mutation:a})}remove(a){if(this.#t.delete(a)){const s=Ju(a);if(typeof s=="string"){const l=this.#e.get(s);if(l)if(l.length>1){const u=l.indexOf(a);u!==-1&&l.splice(u,1)}else l[0]===a&&this.#e.delete(s)}}this.notify({type:"removed",mutation:a})}canRun(a){const s=Ju(a);if(typeof s=="string"){const u=this.#e.get(s)?.find(d=>d.state.status==="pending");return!u||u===a}else return!0}runNext(a){const s=Ju(a);return typeof s=="string"?this.#e.get(s)?.find(u=>u!==a&&u.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){gn.batch(()=>{this.#t.forEach(a=>{this.notify({type:"removed",mutation:a})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(a){const s={exact:!0,...a};return this.getAll().find(l=>M0(s,l))}findAll(a={}){return this.getAll().filter(s=>M0(a,s))}notify(a){gn.batch(()=>{this.listeners.forEach(s=>{s(a)})})}resumePausedMutations(){const a=this.getAll().filter(s=>s.state.isPaused);return gn.batch(()=>Promise.all(a.map(s=>s.continue().catch(mi))))}};function Ju(a){return a.options.scope?.id}var CT=class extends Ac{constructor(a={}){super(),this.config=a,this.#t=new Map}#t;build(a,s,l){const u=s.queryKey,d=s.queryHash??Qd(u,s);let p=this.get(d);return p||(p=new wT({client:a,queryKey:u,queryHash:d,options:a.defaultQueryOptions(s),state:l,defaultOptions:a.getQueryDefaults(u)}),this.add(p)),p}add(a){this.#t.has(a.queryHash)||(this.#t.set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const s=this.#t.get(a.queryHash);s&&(a.destroy(),s===a&&this.#t.delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){gn.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return this.#t.get(a)}getAll(){return[...this.#t.values()]}find(a){const s={exact:!0,...a};return this.getAll().find(l=>N0(s,l))}findAll(a={}){const s=this.getAll();return Object.keys(a).length>0?s.filter(l=>N0(a,l)):s}notify(a){gn.batch(()=>{this.listeners.forEach(s=>{s(a)})})}onFocus(){gn.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){gn.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},LT=class{#t;#e;#n;#a;#i;#r;#o;#s;constructor(a={}){this.#t=a.queryCache||new CT,this.#e=a.mutationCache||new zT,this.#n=a.defaultOptions||{},this.#a=new Map,this.#i=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#o=Gv.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#s=cc.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(a){return this.#t.findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return this.#e.findAll({...a,status:"pending"}).length}getQueryData(a){const s=this.defaultQueryOptions({queryKey:a});return this.#t.get(s.queryHash)?.state.data}ensureQueryData(a){const s=this.defaultQueryOptions(a),l=this.#t.build(this,s),u=l.state.data;return u===void 0?this.fetchQuery(a):(a.revalidateIfStale&&l.isStaleByTime(ad(s.staleTime,l))&&this.prefetchQuery(s),Promise.resolve(u))}getQueriesData(a){return this.#t.findAll(a).map(({queryKey:s,state:l})=>{const u=l.data;return[s,u]})}setQueryData(a,s,l){const u=this.defaultQueryOptions({queryKey:a}),p=this.#t.get(u.queryHash)?.state.data,_=oT(s,p);if(_!==void 0)return this.#t.build(this,u).setData(_,{...l,manual:!0})}setQueriesData(a,s,l){return gn.batch(()=>this.#t.findAll(a).map(({queryKey:u})=>[u,this.setQueryData(u,s,l)]))}getQueryState(a){const s=this.defaultQueryOptions({queryKey:a});return this.#t.get(s.queryHash)?.state}removeQueries(a){const s=this.#t;gn.batch(()=>{s.findAll(a).forEach(l=>{s.remove(l)})})}resetQueries(a,s){const l=this.#t;return gn.batch(()=>(l.findAll(a).forEach(u=>{u.reset()}),this.refetchQueries({type:"active",...a},s)))}cancelQueries(a,s={}){const l={revert:!0,...s},u=gn.batch(()=>this.#t.findAll(a).map(d=>d.cancel(l)));return Promise.all(u).then(mi).catch(mi)}invalidateQueries(a,s={}){return gn.batch(()=>(this.#t.findAll(a).forEach(l=>{l.invalidate()}),a?.refetchType==="none"?Promise.resolve():this.refetchQueries({...a,type:a?.refetchType??a?.type??"active"},s)))}refetchQueries(a,s={}){const l={...s,cancelRefetch:s.cancelRefetch??!0},u=gn.batch(()=>this.#t.findAll(a).filter(d=>!d.isDisabled()&&!d.isStatic()).map(d=>{let p=d.fetch(void 0,l);return l.throwOnError||(p=p.catch(mi)),d.state.fetchStatus==="paused"?Promise.resolve():p}));return Promise.all(u).then(mi)}fetchQuery(a){const s=this.defaultQueryOptions(a);s.retry===void 0&&(s.retry=!1);const l=this.#t.build(this,s);return l.isStaleByTime(ad(s.staleTime,l))?l.fetch(s):Promise.resolve(l.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(mi).catch(mi)}fetchInfiniteQuery(a){return a.behavior=j0(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(mi).catch(mi)}ensureInfiniteQueryData(a){return a.behavior=j0(a.pages),this.ensureQueryData(a)}resumePausedMutations(){return cc.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(a){this.#n=a}setQueryDefaults(a,s){this.#a.set(bl(a),{queryKey:a,defaultOptions:s})}getQueryDefaults(a){const s=[...this.#a.values()],l={};return s.forEach(u=>{xl(a,u.queryKey)&&Object.assign(l,u.defaultOptions)}),l}setMutationDefaults(a,s){this.#i.set(bl(a),{mutationKey:a,defaultOptions:s})}getMutationDefaults(a){const s=[...this.#i.values()],l={};return s.forEach(u=>{xl(a,u.mutationKey)&&Object.assign(l,u.defaultOptions)}),l}defaultQueryOptions(a){if(a._defaulted)return a;const s={...this.#n.queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return s.queryHash||(s.queryHash=Qd(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Xd&&(s.enabled=!1),s}defaultMutationOptions(a){return a?._defaulted?a:{...this.#n.mutations,...a?.mutationKey&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},NT=X.createContext(void 0),MT=({client:a,children:s})=>(X.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),x.jsx(NT.Provider,{value:a,children:s}));const Fd=()=>{const a=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${a}px`)};Fd();window.addEventListener("resize",Fd);window.addEventListener("orientationchange",()=>{setTimeout(Fd,100)});const OT=new LT;vb.createRoot(document.getElementById("root")).render(x.jsx(Jr.StrictMode,{children:x.jsx(MT,{client:OT,children:x.jsx(ES,{children:x.jsx(iT,{})})})}));
